var MOVIE_LIST_TYPE={ALL:"ALL",MOVIECOLLAGE:"MOVIECOLLAGE",SPECIALTHEATER:"SPECIALTHEATER"},MOVIE_SORT_TYPE={RANK:"RANK",ABC:"ABC",SUBTITLE:"SUBTITLE"},THEATER_LIST_TYPE={ALL:"ALL",MOVIECOLLAGE:"MOVIECOLLAGE",SPECIALTHEATER:"SPECIALTHEATER"},SCHEDULE_SELECT_TYPE={NONE:"NONE",MOVIE:"MOVIE",THEATER:"THEATER",DATE:"DATE"},MOVIE_RATING={"01":"rating-18","02":"rating-15","03":"rating-12","04":"rating-all",99:"not-rated"},THEATER_RATING={11:0,"02":1,"05":2,"09":3,"04":4,"08":5,15:6,"06":7},THEATER_DESCRIPTION={"0009":"눈스퀘어 8층","0105":"명동역 7,8번 출구","0097":"포항시 북구 덕산동","0045":"포항시 남구 상도동","0002":"구월동 홈플러스","0103":"논현동 시네마타워","0036":"관교동 신세계백화점","0106":"메타폴리스 A블럭","0100":"동탄 시네스타","0126":"풍무동 홈플러스","0001":"강변역 테크노마트","0162":"성남동","0018":"안양역 안양일번가","0101":"평촌역 한림대병원앞","0155":"범계역 뉴코아아울렛","0044":"천안역 1번 출구","0110":"불당동 펜타포트(천안아산역)","0128":"삼산동","0131":"홈플러스 중계점 8층","0164":"건영백화점 B1층","0075":"김포공항 국제선청사 3층","0177":"CGV김포는 경기도 사우동의 (구)프리머스 영화관입니다.","0015":"현대백화점 5층","0182":"철산역 1번 출구","0113":"신세계 백화점 10층","0187":"센트럴타워 15층","0041":"인계동 씨네파크 7층","0109":"현대백화점 지하 2층","0058":"중앙로역 영플라자 5층","0185":"중앙로역 2번 출구","0147":"동성로광장 진입로","0194":"부천역 3번출구에 있습니다.","0021":"청천동 아이즈빌 아울렛","0184":"부평역 근교 부평일번가","0198":"주안역 8번 출구 아이하니 9층 ","0197":"호구포역 2번 출구"},_movieListType=MOVIE_LIST_TYPE.ALL,_movieListSubType=0,_movieSortType=MOVIE_SORT_TYPE.RANK,_theaterListType=THEATER_LIST_TYPE.ALL,_selectedTheaterLeftTabIndex=-1,_scheduleSelectedType=SCHEDULE_SELECT_TYPE.NONE,_movieListSpecialTheaterRatingCd="",_movieSelectedTypeName="",_reloadScheduleDataCompleteCount=0,_reloadScheduleDataCompleteListener=null,IS_ENGLISH_SUBTITLES_CHK=!1,lockMovieCD="20019245",lockMovieInterval=5,eventMovieCD=null;function ticketStep1Init(){timeStampStart("ticketStep1Init()"),_movieListType=MOVIE_LIST_TYPE.ALL,_movieListSubType=0,_movieSortType=MOVIE_SORT_TYPE.RANK,_theaterListType=THEATER_LIST_TYPE.ALL,_selectedTheaterLeftTabIndex=-1,_scheduleSelectedType=SCHEDULE_SELECT_TYPE.NONE,_movieSelectedTypeName=_movieListSpecialTheaterRatingCd="",eventMovieCD=specialEventMovie.code,clearUserData(),clearTimeTableData(),$.cgv.data.SCHEDULE초기화(),$.cgv.data.고객선택정보.극장.극장특성="Y",$.cgv.data.고객선택정보.극장.상영관종류="";var e=$("#ticket > .steps > .step1"),t=e.find("> .section-movie").find("> .col-body > .movie-select"),a=t.find("> .tabmenu"),i=t.find("> .sortmenu > .button"),l=e.find("> .section-theater > .col-body > .theater-select > .tabmenu");if(selectTabmenu(a,a.find(".button.menu1")),i.removeClass("selected").filter(".btn-rank").addClass("selected"),selectTabmenu(l,l.find(".button.menu1")),ticketStep1CloseUI(),setupTabmenu(a,movieTabmenuSelectListener),setupTabmenu(l,theaterTabmenuSelectListener),updateTimeSection(!0),loadScheduleAll(loadScheduleAllCallback),IS_ENGLISH){$("#movieSortSubTitleBtn").click(function(e){e.preventDefault(),sortMovieBySubtitle()});var s=$("#movieSortRankBtn"),o=$("#movieSortNameBtn"),c=$("#movieSortSubTitleBtn");o.remove(),s.text("Most Popular").css({width:"100px","text-align":"left"}),c.text("English Subtitle").css({width:"100px","text-align":"left",color:"#ff6c00"})}$("div#ticket .newsletter p").hide(),$.cgv.data.고객정보.로그인여부&&!$.cgv.data.고객정보.비회원여부||$("#favorite_cgv").remove()}function loadScheduleAllCallback(){if(timeStampStart("loadScheduleAllCallback()"),ticketStep1Update(),loadGetMovieCollageMenu(),loadGetTime(updateDateSection),1<=$("#favorite_cgv").length&&loadTop3NNearData(),null!=$.cookie("quickdata")){var e=$.cookie("quickdata");quickdatas=e.split("|"),$.cgv.data.빠른예매정보.setData(e),$.removeCookie("quickdata",{path:"/"}),$.removeCookie("quickdata",{path:"/",domain:".cgv.co.kr"});var i=$.cgv.data.빠른예매정보.지역,t=(quickdatas[0],quickdatas[2]),l=quickdatas[4],s=quickdatas[6],o=(quickdatas[3],quickdatas[5]),c=$("#movie_list"),a=c.find("li"),n=null;if(a.each(function(){$(this).attr("movie_cd_group")==t&&(n=$(this))}),null==n)return;n.find("a").trigger("click");var r=$("div.selectbox-movie-type"),d=($("div#date_list"),setInterval(function(){var e=!1;if(r.hasClass("checkedBD")){e=!0;var t=r.find("li"),a=null;""===s?a=t.eq(0):t.each(function(){var e=$(this).find("a");s==e.attr("data-type")&&(a=e)}),SelectboxMovieTypeClickListener(a)}e&&(c.nanoScroller({scrollTo:n}),clearInterval(d),function(){if(""==i)return;if(selectTheaterLeftTab(getAreaIndexByAreaCode(i)),""==o||""==l)return;var a=setInterval(function(){var e=$("div.time-list").find("div.content").find("div.theater"),t=!1;0!=e.length&&(t=!0,e.each(function(){if(l==$(this).attr("screen_cd")){var e=$(this).find("li");e.each(function(){o==$(this).attr("play_start_tm")&&screenTimeClickListener($(this).find("a"))})}})),t&&clearInterval(a)},500)}())},500))}setTimeout(function(){loadAdvertise(1)},1e3)}function movieTabmenuSelectListener(e,t){switch(hideSelectboxMovieType(),t){case 0:_movieListType=MOVIE_LIST_TYPE.ALL,_movieSortType=MOVIE_SORT_TYPE.RANK,$(".section-movie .sortmenu .button").removeClass("selected"),$(".section-movie .sortmenu .button.btn-rank").addClass("selected"),selectTabmenu($(".section-movie .tabmenu"),e),hideTabmenuSelectBox(),_selectedTheaterLeftTabIndex=-1,clearUserData(),clearTimeTableData(),$.cgv.data.고객선택정보.극장.극장특성="Y",$.cgv.data.고객선택정보.극장.상영관종류="",_scheduleSelectedType=SCHEDULE_SELECT_TYPE.NONE,loadScheduleAll(ticketStep1Update),logClick("영화/전체");break;case 1:e.hasClass("over")?hideTabmenuSelectBox():(showTabmenuSelectBox(MOVIE_LIST_TYPE.MOVIECOLLAGE),logClick("영화/무비꼴라쥬"));break;case 2:e.hasClass("over")?hideTabmenuSelectBox():(showTabmenuSelectBox(MOVIE_LIST_TYPE.SPECIALTHEATER),logClick("영화/특별관"))}}function theaterTabmenuSelectListener(e,t){switch(t){case 0:_theaterListType=THEATER_LIST_TYPE.ALL,_selectedTheaterLeftTabIndex=-1,clearUserData(),clearTimeTableData(),$.cgv.data.고객선택정보.극장.극장특성="Y",$.cgv.data.고객선택정보.극장.상영관종류="",_scheduleSelectedType=SCHEDULE_SELECT_TYPE.NONE,loadScheduleAll(ticketStep1Update),logClick("극장/전체");break;case 1:_theaterListType=THEATER_LIST_TYPE.MOVIECOLLAGE,_selectedTheaterLeftTabIndex=-1,_movieListType=MOVIE_LIST_TYPE.ALL,selectTabmenu($(".section-movie .tabmenu"),$(".section-movie .tabmenu .button.menu1")),hideTabmenuSelectBox(),clearUserData(),clearTimeTableData(),$.cgv.data.고객선택정보.극장.극장특성="N",$.cgv.data.고객선택정보.극장.상영관종류="16",_scheduleSelectedType=SCHEDULE_SELECT_TYPE.NONE,loadScheduleAll(ticketStep1Update),logClick("극장/무비꼴라쥬");break;case 2:_theaterListType=THEATER_LIST_TYPE.SPECIALTHEATER,_selectedTheaterLeftTabIndex=-1,_movieListType=MOVIE_LIST_TYPE.ALL,selectTabmenu($(".section-movie .tabmenu"),$(".section-movie .tabmenu .button.menu1")),hideTabmenuSelectBox(),updateTheaterSection(!0),logClick("극장/특별관")}selectTabmenu($(".section-theater .tabmenu"),e),tnbUpdate()}function ticketStep1Update(){updateMovieSection(!0),updateTheaterSection(!0),updateDateSection(!0),updateTimeSection(!0)}function ticketStep1CloseUI(){hideTabmenuSelectBox(),hideSelectboxMovieType()}function onTicketStep1Prev(){$.cgv.data.고객선택정보.좌석.초기화()}function movieSectionScrollEvent(){$(".section-movie .movie-list > ul > li.press").removeClass("press"),hideSelectboxMovieType()}function sortMovieByRank(){$("#movieSortRankBtn").addClass("selected"),$("#movieSortNameBtn, #movieSortSubTitleBtn").removeClass("selected"),ticketStep1CloseUI(),selectMovieSort(MOVIE_SORT_TYPE.RANK),logClick("영화/예매율순")}function sortMovieByName(){$("#movieSortNameBtn").addClass("selected"),$("#movieSortRankBtn, #movieSortSubTitleBtn").removeClass("selected"),ticketStep1CloseUI(),selectMovieSort(MOVIE_SORT_TYPE.ABC),logClick("영화/가나다순")}function sortMovieBySubtitle(){$("#movieSortSubTitleBtn").addClass("selected"),$("#movieSortNameBtn, #movieSortRankBtn").removeClass("selected"),ticketStep1CloseUI(),selectMovieSort(MOVIE_SORT_TYPE.SUBTITLE),logClick("영화/영문자막순")}function movieClickListener(){var i=$(this).parent("li"),l=i.parent("ul");if(0<getLoadingCount())setTimeout(function(){i.find("a").trigger("click")},200);else{ticketStep1CloseUI();var s=!1;if(i.hasClass("dimmed")){if(!confirm(MSG1_SELECT_CLEAR_BY_MOVIE))return;s=!0}l.find("> li.press").removeClass("press"),i.addClass("press");var e=l.find("> li.selected");if(0==i.hasClass("selected")){_showLoadingIE(),e.removeAttr("selectedMovieType"),e.removeClass("selected");var t="ALL";if(_movieListType==MOVIE_LIST_TYPE.SPECIALTHEATER)switch(_movieListSpecialTheaterRatingCd){case"11":t="4DX";break;case"02":t="IMAX"}else _movieSelectedTypeName="";if(i.attr("selectedMovieType",t),s||i.addClass("selected"),!selectMovie2(i))return void i.removeClass("press").removeClass("selected");reloadScheduleData(function(){if(s){var e=i.attr("MOVIE_CD_GROUP"),t=i.attr("MOVIE_IDX"),a=i.attr("selectedMovieType");updateMovieSection(),(i=l.find("> li[MOVIE_CD_GROUP="+e+"][MOVIE_IDX="+t+"]")).attr("selectedMovieType",a)}skipToSomething("skip_theater_list"),showSelectboxMovieType(i),_hideLoadingIE()})}else _movieListType==MOVIE_LIST_TYPE.MOVIECOLLAGE?0!=_movieListSubType&&1!=_movieListSubType||showSelectboxMovieType(i):_movieListType==MOVIE_LIST_TYPE.SPECIALTHEATER?""==_movieListSpecialTheaterRatingCd&&showSelectboxMovieType(i):showSelectboxMovieType(i)}}function updateMovieSection(e){timeStampStart("updateMovieSection()");var t=$("#movie_list"),a=t.find("> ul"),i=a.find("> li"),l=i.filter(".selected").attr("selectedMovieType");i.remove(),$(".selectbox-movie-type").hide();var s=null;null!=$.cgv.data.SCHEDULE.GroupMovies&&(s=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie),s||(s=[]),$.isArray(s)||(s=[s]),s.sort(_movieSortType==MOVIE_SORT_TYPE.ABC?SortAbcByName:_movieSortType==MOVIE_SORT_TYPE.RANK?SortRankByName:sortMovieBySubtitle);var o="",c=[],n=[],r=$.cgv.data,d=r.고객선택정보.영화.세번째속성코드,T=r.SCHEDULE_BY_MOVIE.Movies.CMovie;T||(T=[]),$.isArray(T)||(T=[T]);var E=r.SCHEDULE_BY_MOVIE.GroupMovies.CGroupMovie;E||(E=[]),$.isArray(E)||(E=[E]),$(s).each(function(e,t){t.index=e,isDimMovie(t.MOVIE_CD_GROUP,d,T,E)?c.push(t):n.push(t)}),$(n).each(function(e,t){o+=getMovieItemElementString(t,!1,l)}),$(c).each(function(e,t){o+=getMovieItemElementString(t,!0,l)}),a.append(o),a.find("> li a").on("click",movieClickListener);var _=a.find("> li.selected");0<_.length?ftScrollTo(_):a.closest(".nano").nanoScroller({scroll:"top"}),updateNanoScroller(t),timeStampEnd("updateMovieSection()")}function getMovieItemElementString(e,t,a){var i=[],l="",s=MOVIE_RATING[e.RATING_CD],o="";return s=s||"",i.push(s),t&&(i.push("dimmed"),l=IS_ENGLISH?"can not select":"선택불가"),e.MOVIE_CD_GROUP==$.cgv.data.고객선택정보.영화.영화그룹코드&&(i.push("selected"),o='selectedMovieType="'+(a||"ALL")+'"',l=IS_ENGLISH?"selected":"선택됨"),'<li class="'+i.join(" ")+'" data-index="'+e.index+'" movie_cd_group="'+e.MOVIE_CD_GROUP+'" movie_idx="'+e.MOVIE_IDX+'" '+o+'><a href="#" onclick="return false;" title="'+e.MOVIE_GROUP_NM+'" alt="'+e.MOVIE_GROUP_NM+'"><span class="icon">&nbsp;</span><span class="text">'+e.MOVIE_GROUP_NM+'</span><span class="sreader">'+l+"</span></a></li>"}function isDimMovie(t,a,e,i){return!(_movieListType==MOVIE_LIST_TYPE.MOVIECOLLAGE&&""!=a&&"00"!=a&&"N"!=a?e.some(function(e){return e.THIRD_ATTR_CD==a&&e.GROUP_CD==t}):i.some(function(e){return e.MOVIE_CD_GROUP==t}))}function updateMovieSectionScroll(){var e=$("#movie_list > ul");e.find("> li").hasClass("selected")?ftScrollTo(e.find("> li.selected")):e.closest(".nano").nanoScroller({scroll:"top"}),updateNanoScroller($("#movie_list")),timeStampEnd("updateMovieSection()")}function updateMovieSectionForSort(){timeStampStart("updateMovieSectionForSort()");var e,l=$("#movie_list > ul");if(l.find("li.press").removeClass("press"),$(".selectbox-movie-type").hide(),null!=$.cgv.data.SCHEDULE.GroupMovies&&(e=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie),$.isArray(e))switch(_movieSortType){case MOVIE_SORT_TYPE.RANK:e.sort(SortRankByName);break;case MOVIE_SORT_TYPE.ABC:e.sort(SortAbcByName);break;case MOVIE_SORT_TYPE.SUBTITLE:e.sort(SortSubtitleByName)}$(e).each(function(e,t){var a=$("li",l);if(_movieSortType==MOVIE_SORT_TYPE.SUBTITLE){IS_ENGLISH_SUBTITLES_CHK=!0;var i=l.find("> li[MOVIE_CD_GROUP="+t.MOVIE_CD_GROUP+"]").attr("data-index",e);"1"==t.IS_ENG_SUBTITLE?i.show():i.hide()}else IS_ENGLISH_SUBTITLES_CHK=!1,l.append(l.find("> li[MOVIE_CD_GROUP="+t.MOVIE_CD_GROUP+"]").attr("data-index",e)),a.show()}),l.find("> li").each(function(){$(this).hasClass("dimmed")&&l.append(this)}),l.find("> li").hasClass("selected")?ftScrollTo(l.find("> li.selected")):l.closest(".nano").nanoScroller({scroll:"top"}),timeStampEnd("updateMovieSectionForSort()")}function updateTheaterSection(e){updateTheaterSectionForFavorite();var n,r,d,a,t=null;_movieListType==MOVIE_LIST_TYPE.SPECIALTHEATER||_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER||_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE?t=$.cgv.data.SCHEDULE.STheaters.CSTheater:null!=$.cgv.data.SCHEDULE.Theaters&&(t=$.cgv.data.SCHEDULE.Theaters.CTheater),t||(t=[]),$.isArray(t)||(t=[t]),t.sort(function(e,t){var a=e.THEATER_NM.replace(/CGV /g,""),i=t.THEATER_NM.replace(/CGV /g,"");return $.cgv.util.compareAscendingForKor(a,i)});for(var i=0;i<t.length;++i)t[i].index=i;_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER&&(d=SPECIALTHEATERGROUP_CODES[_selectedTheaterLeftTabIndex]),_movieListType==MOVIE_LIST_TYPE.SPECIALTHEATER||_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE||_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER?null!=$.cgv.data.SCHEDULE_BY_THEATER.STheaters&&(a=$.cgv.data.SCHEDULE_BY_THEATER.STheaters.CSTheater):null!=$.cgv.data.SCHEDULE_BY_THEATER.Theaters&&(a=$.cgv.data.SCHEDULE_BY_THEATER.Theaters.CTheater),a||(a=[]),$.isArray(a)||(a=[a]);var T=[],E=[],l=[],s=[];$(t).each(function(e,t){isDimmedTheater(a,t.THEATER_CD)?l.push(t):s.push(t)});var o=function(e,t,a){var i="";r=THEATER_DESCRIPTION[t.THEATER_CD],r=!IS_ENGLISH&&r?' title="'+r+'"':"";var l=_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER?THEATER_RATING[t.RATING_CD]:getAreaIndexByAreaCode(t.AREA_CD),s=_theaterListType==THEATER_LIST_TYPE.ALL||_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE&&"16"==t.RATING_CD||_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER&&t.RATING_CD==d,o=s?"list-item":"none",c=[];t.THEATER_CD==$.cgv.data.고객선택정보.극장.극장코드&&(c.push("selected"),i=IS_ENGLISH?"selected":"선택됨",$.cgv.data.고객선택정보.극장.극장명=t.THEATER_NM),a?(c.push("dimmed"),i=IS_ENGLISH?"can not select":"선택불가"):s&&(void 0===E[l]&&(E[l]=0),E[l]+=1),n='<li class="'+c.join(" ")+'" data-index="'+t.index+'" areaindex="'+l+'" THEATER_CD="'+t.THEATER_CD+'" RATING_CD="'+t.RATING_CD+'" style="display: '+o+';"><a href="#" onclick="theaterListClickListener(event);return false;"'+r+">"+t.THEATER_NM.replace(/CGV /g,"")+'<span class="sreader">'+i+"</span></a></li>",null==T[l]&&(T[l]=""),T[l]+=n},c={};$(s).each(function(e,t){c[t.THEATER_CD]&&_theaterListType!=THEATER_LIST_TYPE.SPECIALTHEATER||_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE&&"16"!=t.RATING_CD||(c[t.THEATER_CD]=!0,o(0,t,!1))}),$(l).each(function(e,t){c[t.THEATER_CD]&&_theaterListType!=THEATER_LIST_TYPE.SPECIALTHEATER||_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE&&"16"!=t.RATING_CD||(c[t.THEATER_CD]=!0,o(0,t,!0))});var _=$("#theater_area_list > ul > li"),S=_.find("> .area_theater_list ul");$.each(T,function(e,t){S.eq(e).empty().append(t)}),-1==_selectedTheaterLeftTabIndex&&selectTheaterLeftTab(0,!0),_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER?updateTheaterLeftTabCount():updateTheaterLeftTabCountWithCountSet(E),updateTheaterNanoScoll(_.filter(".selected")),tnbUpdate()}function updateTheaterSectionNewPerformance(){}function isDimmedTheater(e,t){return!e.some(function(e){return e.THEATER_CD==t})}function theaterAreaClickListener(e){timeStamp("지역 클릭 이벤트");var t=e.target?e.target:e.currentTarget?e.currentTarget:e.srcElement,a=$(t).closest("li").index();ticketStep1CloseUI(),selectTheaterLeftTab(a)}function theaterListClickListener(e){if(timeStamp("극장 클릭 이벤트"),timeStampStart("극장 클릭 소요시간"),!(0<getLoadingCount())){var t=e.target?e.target:e.currentTarget?e.currentTarget:e.srcElement,a=$(t).parent("li");a.attr("theater_cd");theaterListClickListener2(a)}}function theaterListClickListener2(e){var t=e.attr("data-index");(ticketStep1CloseUI(),!e.hasClass("dimmed")||confirm(MSG1_SELECT_CLEAR_BY_THEATER))&&(e.addClass("selected"),$.cgv.data.고객선택정보.상영관시간.초기화(),updateTimeSection(),selectTheater(_movieListType==MOVIE_LIST_TYPE.SPECIALTHEATER||_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE||_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER?$.isArray($.cgv.data.SCHEDULE.STheaters.CSTheater)?$.cgv.data.SCHEDULE.STheaters.CSTheater[t]:$.cgv.data.SCHEDULE.STheaters.CSTheater:$.isArray($.cgv.data.SCHEDULE.Theaters.CTheater)?$.cgv.data.SCHEDULE.Theaters.CTheater[t]:$.cgv.data.SCHEDULE.Theaters.CTheater),reloadScheduleData(updateTheaterSection),skipToSomething("skip_date_list"))}function updateTheaterSectionSreader(){setScreenReaderMTD($("#theater_area_list .area_theater_list li"))}function updateTheaterSectionForFavorite(){var e=$("#favorite_cgv"),t=e.parent(),a=e.find(".tit"),i=e.find(".setting"),l=e.find(".theaters"),s="";if(l.empty(),1==$.cgv.data.고객정보.로그인여부&&0==$.cgv.data.고객정보.비회원여부)if(IS_ENGLISH?a.html("MY CGV"):a.html("자주가는 CGV"),i.show(),0<$.cgv.data.FAVORITE_THEATERS.length){if($($.cgv.data.FAVORITE_THEATERS).each(function(e,t){s+='<li TheaterCode="'+t.TheaterCode+'"><a href="#" onclick="favoriteCGVClickListener(event);return false;">'+t.Name+"</a></li>"}),l.append(s),e.css("height","72px"),$("li",l).css({display:"inline-block",width:"45%",height:"20px"}),$("#favorite_cgv .nolist").hide(),0==$("#favorite_cgv_titleCon").length){var o=$('<div class="favorite_cgv" id="favorite_cgv_titleCon"/>');t.prepend(o),o.append(a).append(i),i.css({position:"absolute",top:"17px",right:"0",left:"auto"}),o.css({width:"225px",height:"19px",border:"none","margin-top":"5px","margin-left":"15px"}),l.css({width:"225px",left:"5px",top:"10px"})}}else $("#favorite_cgv .nolist").show();else IS_ENGLISH?a.html("Near CGV"):a.html("가까운 CGV"),i.hide(),0<$.cgv.data.FAVORITE_THEATERS.length&&($($.cgv.data.FAVORITE_THEATERS).each(function(e,t){s+='<li TheaterCode="'+t.TheaterCode+'"><a href="#" onclick="favoriteCGVClickListener(event);return false;">'+t.Name+"</a></li>"}),l.append(s)),$("#favorite_cgv .nolist").hide()}function favoriteCGVSettingClickListener(){IS_ENGLISH?ticketNewPopup("http://www.cgv.co.kr/user/popup/e_favoriteTheater.aspx","favorite_setting","626","459"):ticketNewPopup("http://www.cgv.co.kr/user/popup/favoritetheaters.aspx","favorite_setting","626","459"),logClick("극장/자주가는CGV설정")}function favoriteCGVClickListener(e){var t=$(e.currentTarget?e.currentTarget:e.srcElement).parents("li").attr("TheaterCode");setTimeout(function(){selectTheaterByFavoriteCGV(t)},0),1==$.cgv.data.고객정보.로그인여부?logClick("극장/자주가는CGV선택"):logClick("극장/가까운CGV선택")}function dateClickListener(){if(timeStamp("날짜 목록 클릭 이벤트"),timeStampStart("날짜 목록 클릭 소요시간"),!(0<getLoadingCount())){var e=$(this).parent("li");ticketStep1CloseUI(),e.hasClass("dimmed")&&!confirm(MSG1_SELECT_CLEAR_BY_DATE)||($.cgv.data.고객선택정보.상영관시간.초기화(),updateTimeSection(),selectDate(e.attr("date")),reloadScheduleData(updateDateSection),skipToSomething("skip_time_list"))}}function updateDateSection(i){timeStampStart("updateDateSection()"),timeStampStart("[NEW] Draw Date section.");var e=null!=$.cgv.data.SCHEDULE.PlayDays?$.cgv.data.SCHEDULE.PlayDays.CPlayDay:[],t=$("#date_list ul");if(i){t.empty();var o="<div>";$(e).each(function(e,t){var a=$.cgv.util.parseDate(t.PLAY_YMD),i=!1,l=a.getMonth();0!==e?(l!==saveMonth&&(i=!0,saveMonth=l),1==a.getDate()&&(i=!0)):(i=!0,saveMonth=l),i&&(o+='<li class="month"><div>',o+='<span class="year">'+a.getFullYear()+"</span>",o+='<span class="month">'+(a.getMonth()+1)+"</span>",o+="<div></div></div></li>");var s=a.getDay();o+='<li data-index="'+e+'" date="'+t.PLAY_YMD+'" class="day',6==s?o+=" day-sat":0==s&&(o+=" day-sun"),t.PLAY_YMD==$.cgv.data.고객정보.예매일자&&(o+=" today"),o+='"><a href="#" onclick="return false;"><span class="dayweek">'+DAYOFWEEK[s]+"</span>",o+='<span class="day">'+a.getDate()+'</span><span class="sreader"></span></a>',t.PLAY_YMD==$.cgv.data.고객정보.예매일자&&(o+='<span class="today"></span>'),o+="</li>"}),o+="</div>",t.append(o),t.find("a").bind("click",dateClickListener)}else""==$.cgv.data.고객선택정보.날짜.상영일자&&t.find("li.day.selected").removeClass("selected");var l,s=$.cgv.data.SCHEDULE_BY_DATE.PlayDays.CPlayDay;s||(s=[]),$.isArray(s)||(s=[s]),null!=$.cgv.data.SCHEDULE_BY_DATE&&null!=$.cgv.data.SCHEDULE_BY_DATE.PlayDays&&t.find("li").each(function(){var e=$(this),t=e.find("> a > span.sreader"),a=e.attr("date");s.some(function(e){return e.PLAY_YMD==a})?(a==$.cgv.data.고객선택정보.날짜.상영일자?(e.addClass("selected"),t.html(IS_ENGLISH?"selected":"선택됨"),l=e):t.html(""),i||e.removeClass("dimmed")):(a==$.cgv.data.고객선택정보.날짜.상영일자&&$.cgv.data.고객선택정보.날짜.초기화(),e.addClass("dimmed"),t.html(IS_ENGLISH?"can not select":"선택불가"))}),l?t.parents(".nano").nanoScroller({scroll:l.prevAll(".month").first()}):i||t.parents(".nano").nanoScroller({scroll:"top"}),updateNanoScroller($("#date_list")),timeStampEnd("[NEW] Draw Date section."),timeStampEnd("updateDateSection()"),timeStampEnd("날짜 목록 클릭 소요시간")}function updateDateSectionDelay(){var e=$("#date_list ul"),t=e.find("li");e.find("li").removeClass("today"),e.find("li .today").remove(),e.find("li[date="+$.cgv.data.고객정보.예매일자+"]").addClass("today"),e.find("li[date="+$.cgv.data.고객정보.예매일자+"]").append("<span class='today'></span>"),t.hasClass("selected")?e.parents(".nano").nanoScroller({scroll:e.find("li.selected").prevAll(".month").first()}):e.parents(".nano").nanoScroller({scroll:"top"}),updateNanoScroller($("#date_list")),setScreenReaderMTD(t),timeStampEnd("[OLD] Draw Date section."),timeStampEnd("updateDateSection()"),timeStampEnd("날짜 목록 클릭 소요시간")}function updateTimeSection(e){try{if(timeStampStart("updateTimeSection("+e+")"),e&&($(".step"+_ticketCurrentStep+" .section-time .placeholder").removeClass("hidden"),$(".step"+_ticketCurrentStep+" .section-time .time-list").remove()),null==$.cgv.data.TIMETABLE.Table)return;var a,t=$.cgv.data.TIMETABLE.Table;if(""!=$.cgv.data.고객선택정보.상영관시간.상영시간&&""==$.cgv.data.고객선택정보.상영관시간.상영관명)$.isArray($.cgv.data.TIMETABLE.Table)?$($.cgv.data.TIMETABLE.Table).each(function(e,t){if($.cgv.data.고객선택정보.상영관시간.상영시간==t.PLAY_START_TM&&$.cgv.data.고객선택정보.상영관시간.상영관코드==t.SCREEN_CD)return a=t,!1}):a=$.cgv.data.TIMETABLE.Table,null!=a&&($.cgv.data.고객선택정보.상영관시간.상영관등급코드=a.SCREEN_RATING_CD,$.cgv.data.고객선택정보.상영관시간.상영관코드=a.SCREEN_CD,$.cgv.data.고객선택정보.상영관시간.상영시간=a.PLAY_START_TM,$.cgv.data.고객선택정보.상영관시간.상영종료시간=a.PLAY_END_TM,$.cgv.data.고객선택정보.상영관시간.상영회차=a.PLAY_NUM,$.cgv.data.고객선택정보.상영관시간.상영관명=a.SCREEN_NM,$.cgv.data.고객선택정보.상영관시간.상영시간코드=a.PLAY_TIME_CD,$.cgv.data.고객선택정보.상영관시간.영화자막속성=a.SUBTITLE_CD,$.cgv.data.고객선택정보.영화.영화코드=a.MOVIE_CD,$.cgv.data.고객선택정보.영화.영화명=a.MOVIE_NM),tnbUpdate();var l=$(".section-time"),i=null;if(e){var c,n,r,d,T,E,s=$("<div class='time-list nano'></div>"),_=$("<div class='content scroll-y'></div>");s.append(_),$(t).each(function(e,a){if((_movieListType==MOVIE_LIST_TYPE.SPECIALTHEATER||_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER)&&""!=$.cgv.data.고객선택정보.극장.상영관종류&&a.SCREEN_RATING_CD!=$.cgv.data.고객선택정보.극장.상영관종류&&"09"!=$.cgv.data.고객선택정보.극장.상영관종류&&"20"!=a.SCREEN_RATING_CD)return!0;var i=a.SEAT_CAPACITY+"";if($($.cgv.data.REMAIN_SEAT_INFO).each(function(e,t){return null==t||(a.SCREEN_CD==t.SCREEN_CD&&parseInt(a.PLAY_NUM,10)==parseInt(t.PLAY_NUM,10)?(i=parseInt(t.REMAIN_SEAT,10),!1):void 0)}),_.find("div.theater").is("[SCREEN_CD="+a.SCREEN_CD+"][MOVIE_CD="+a.MOVIE_CD+"]"))c=_.find("div.theater[SCREEN_CD="+a.SCREEN_CD+"][MOVIE_CD="+a.MOVIE_CD+"] ul");else{var t="";t=""!=a.SUBTITLE_NM&&""!=a.MOVIE_ADD_ATTR?a.MOVIE_KIND_DISPLAY_NM+"("+a.SUBTITLE_NM+","+a.MOVIE_ADD_ATTR+")":""!=a.SUBTITLE_NM&&""==a.MOVIE_ADD_ATTR?a.MOVIE_KIND_DISPLAY_NM+"("+a.SUBTITLE_NM+")":""==a.SUBTITLE_NM&&""!=a.MOVIE_ADD_ATTR?a.MOVIE_KIND_DISPLAY_NM+"("+a.MOVIE_ADD_ATTR+")":a.MOVIE_KIND_DISPLAY_NM,T='<div class="theater" SCREEN_CD="'+a.SCREEN_CD+'" MOVIE_CD="'+a.MOVIE_CD+'">',T+='<span class="title">',T+='<span class="name">'+t+"</span>",T+='<span class="floor">'+a.SCREEN_NM+"</span>",IS_ENGLISH?T+='<span class="seatcount">(Total '+a.SEAT_CAPACITY+" seats)</span>":T+='<span class="seatcount">(총'+a.SEAT_CAPACITY+"석)</span>",T+="</span></div>",d=$(T),c=$("<ul></ul>"),d.append(c),_.append(d)}var l=$.cgv.util.convertTime(a.PLAY_START_TM),s=$.cgv.util.convertTime(a.PLAY_END_TM);T='<li data-index="'+e+'" data-remain_seat="'+i+'" PLAY_START_TM="'+a.PLAY_START_TM+'" SCREEN_CD="'+a.SCREEN_CD+'" MOVIE_CD="'+a.MOVIE_CD+'" PLAY_NUM="'+a.PLAY_NUM+'">',T+='<a class="button" href="#" onclick="screenTimeClickListener(event);return false;">',T+='<span class="time"><span>'+l+"</span></span>",IS_ENGLISH?T+='<span class="count">'+i+'<div class="sreader">seats remain</div></span>':T+='<span class="count">'+i+"석</span>",IS_ENGLISH?T+='<div class="sreader">End time '+s+"</div>":T+='<div class="sreader">종료시간 '+s+"</div>",T+='<span class="sreader mod"></span>',T+="</a></li>",n=$(T),r=n.find("a"),E=n.find("span.count"),n.data("screen",a),c.append(n);var o="종료 ";switch(IS_ENGLISH&&(o="End "),$(r).aToolTip({fixed:!0,xOffset:-8,yOffset:1,inSpeed:100,outspeed:100,toolTipClass:"tooltip-ticket-time",tipContent:"<span class='time'>"+o+s+"<span></span></span>"}),a.PLAY_TIME_CD){case"01":n.addClass("morning");break;case"03":n.addClass("night");break;case"04":n.addClass("morning")}}),$(".step"+_ticketCurrentStep+" .section-time .col-body").append(s),$(".step"+_ticketCurrentStep+" .section-time .time-list .theater:last-child").css("border","none"),$(".section-time .time-list ul li").removeClass("selected"),$(".section-time .time-list ul li[SCREEN_CD="+$.cgv.data.고객선택정보.상영관시간.상영관코드+"][PLAY_START_TM="+$.cgv.data.고객선택정보.상영관시간.상영시간+"]").addClass("selected"),(0<t.length||null!=t)&&$(".step"+_ticketCurrentStep+" .section-time .placeholder").addClass("hidden"),i=s,setupNanoScroller(s)}else(0<t.length||null!=t)&&$(".step"+_ticketCurrentStep+" .section-time .placeholder").addClass("hidden"),i=l.find(".time-list");$(t).each(function(e,a){var i=0;if(i=a.SEAT_CAPACITY,$($.cgv.data.REMAIN_SEAT_INFO).each(function(e,t){return null==t||(a.SCREEN_CD==t.SCREEN_CD&&parseInt(a.PLAY_NUM,10)==parseInt(t.PLAY_NUM,10)?(i=parseInt(t.REMAIN_SEAT,10),!1):void 0)}),n=l.find("li[SCREEN_CD="+a.SCREEN_CD+"][PLAY_NUM="+a.PLAY_NUM+"]"),E=n.find("span.count"),"Y"==a.ALLOW_SALE_YN)0==i||"9999"==a.SEAT_REMAIN_CNT?(n.addClass("disabled").data("remain_seat",i),0===i&&E.text(IS_ENGLISH?"Sold out":"매진"),"9999"==a.SEAT_REMAIN_CNT&&E.text(IS_ENGLISH?"Finish":"예매종료")):(n.data("remain_seat",i).removeClass("disabled"),E.html(IS_ENGLISH?i+'<span class="sreader">seats remain</span>':i+"석"));else{var t=parseInt(a.SEAT_CAPACITY,10);i/t*100<3?E.text(IS_ENGLISH?"Finish":"예매종료"):E.text(IS_ENGLISH?"Prepare":"준비중"),n.addClass("disabled").data("remain_seat",i)}}),updateNanoScroller(i),setScreenReaderTime($(".step1 .section-time .time-list ul li"))}finally{timeStampEnd("updateTimeSection("+e+")")}}function screenTimeClickListener(e){var t=e;-1!=(e+"").indexOf("Event")&&(t=$(e.currentTarget?e.currentTarget:e.srcElement));var a=t.parents("li");(ticketStep1CloseUI(),a.hasClass("disabled"))||selectTime($.isArray($.cgv.data.TIMETABLE.Table)?$.cgv.data.TIMETABLE.Table[a.data("index")]:$.cgv.data.TIMETABLE.Table)}$(function(){"true"==$.cookie("IS_ENGLISH")?($("#ticket").addClass("english").removeClass("ko"),$(".ft_layer_popup").addClass("english").removeClass("ko"),IS_ENGLISH=!0):($("#ticket").addClass("ko").removeClass("english"),$(".ft_layer_popup").addClass("ko").removeClass("english"))}),$(document).ready(function(){var i={list:{}};i.list.sphereX={title:"SphereX",mCode:"18"},i.list.suitecinema={title:"Suite cinema",mCode:"32"},i.list.screenX={title:"ScreenX",mCode:"23"},i.firstAttrTheater=function(){var l=7,s=$("div.SPECIALTHEATER").find("ul"),o=$('<li><a href="#" onclick="return false;"></a></li>'),c=$("div#theater_area_list").find("ul").eq(0),n=15;$.each(i.list,function(e,t){l+=1,THEATER_RATING[t.mCode]=l,SPECIALTHEATERGROUP_CODES.push(t.mCode),SPECIALTHEATERGROUP_NAMES.push(t.title),IS_ENGLISH&&SPECIALTHEATERGROUP_NAMES_EN.push(t.title);var a=o.clone();if(a.find("a").text(t.title),s.append(a),9<=l){n+=a.height();var i=c.find("li").eq(0).clone();c.append(i)}}),IS_ENGLISH&&(DAYOFWEEK=DAYOFWEEK_EN,AREAGROUP_NAMES=AREAGROUP_NAMES_EN,SPECIALTHEATERGROUP_NAMES=SPECIALTHEATERGROUP_NAMES_EN);for(var e=["#container div.tnb_area","div.step.step1","div.step.step1 > div.section > div.col-body","div.theater-list"],t=0;t<e.length;++t){if(a($(e[t])),3===t)a($(e[t]).parent())}function a(e){e.css("height",e.height()+n)}$("div#ticket_bottom_banner").css("padding-top","0")},i.firstAttrTheater()});var dateClickBl=!0,dateClickTmr=null;function reloadScheduleData(e){if(timeStampStart("reloadScheduleData()"),tnbUpdate(),_reloadScheduleDataCompleteListener=null!=e?e:null,""!=$.cgv.data.고객선택정보.극장.극장코드&&""!=$.cgv.data.고객선택정보.날짜.상영일자&&""!=$.cgv.data.고객선택정보.영화.영화그룹코드){if(!dateClickBl&&$.cgv.data.고객선택정보.영화.영화그룹코드===lockMovieCD)return!1;null!=lockMovieCD&&$.cgv.data.고객선택정보.영화.영화그룹코드===lockMovieCD&&(dateClickBl=!1,dateClickTm=setTimeout(function(){dateClickBl=!0,dateClickTm=null},1e3*lockMovieInterval)),loadTimeTable(loadTimeTableSuccess)}else updateTimeSection(!0);switch(_scheduleSelectedType){case SCHEDULE_SELECT_TYPE.NONE:_reloadScheduleDataCompleteCount=3,loadScheduleByMovie(loadScheduleByMovieSuccess),loadScheduleByTheater(loadScheduleByTheaterSuccess),loadScheduleByDate(loadScheduleByDateSuccess);break;case SCHEDULE_SELECT_TYPE.MOVIE:_reloadScheduleDataCompleteCount=2,loadScheduleByTheater(loadScheduleByTheaterSuccess),loadScheduleByDate(loadScheduleByDateSuccess);break;case SCHEDULE_SELECT_TYPE.THEATER:_reloadScheduleDataCompleteCount=2,IS_ENGLISH_SUBTITLES_CHK||loadScheduleByMovie(loadScheduleByMovieSuccess),loadScheduleByDate(loadScheduleByDateSuccess);break;case SCHEDULE_SELECT_TYPE.DATE:_reloadScheduleDataCompleteCount=2,IS_ENGLISH_SUBTITLES_CHK||loadScheduleByMovie(loadScheduleByMovieSuccess),loadScheduleByTheater(loadScheduleByTheaterSuccess)}}function selectMovieSort(e){_movieSortType=e,updateMovieSectionForSort()}function getAreaIndexByAreaCode(e){for(var t=0;t<AREAGROUP_CODES.length;t++)if(-1!=$.inArray(e,AREAGROUP_CODES[t]))return t;return-1}function selectTheaterLeftTab(e,t){if(_selectedTheaterLeftTabIndex!=e&&!(_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER&&e>=SPECIALTHEATERGROUP_NAMES.length)){var a=$("#theater_area_list > ul > li"),i=a.removeClass("selected").eq(e).addClass("selected"),l=a.find("> .area_theater_list > ul > li");_selectedTheaterLeftTabIndex=e,_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER?(clearUserData(),clearTimeTableData(),updateTimeSection(),setDataIndexToTheater(e+=1),_scheduleSelectedType=SCHEDULE_SELECT_TYPE.NONE,"09"==$.cgv.data.고객선택정보.극장.상영관종류&&(_movieListType=MOVIE_LIST_TYPE.SPECIALTHEATER),loadScheduleAll(ticketStep1Update),l.hide()):_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE?(l.hide(),l.filter("[areaindex="+e+"][RATING_CD=16]").show()):_movieListType==MOVIE_LIST_TYPE.SPECIALTHEATER?0==_movieListSubType?l.filter("[areaindex="+e+"]").each(function(){var e=$(this).attr("theater_cd");0==$(this).prevAll("li[theater_cd="+e+"]").size()?$(this).removeClass("duplicate").show():$(this).addClass("duplicate").hide()}):l.filter("[areaindex="+e+"][RATING_CD="+_movieListSpecialTheaterRatingCd+"]").show():l.filter("[areaindex="+e+"]").show(),t||updateTheaterNanoScoll(i)}}function updateTheaterNanoScoll(e){var t=e.find(".selected"),a=e.find("> .nano");if(a.nanoScroller(),!CMN_OSBR.ie7)if(0<t.length){var i=t.closest("ul");t.offset().top-t.parent().offset().top<0&&a.nanoScroller({scroll:t}),t.offset().top-t.parent().offset().top+t.height()>t.parent().height()&&a.nanoScroller({scrollTop:t.offset().top-i.offset().top+i.scrollTop()-(i.height()-t.height())})}else a.nanoScroller({scroll:"top"})}function updateTheaterLeftTabCount(){var e,t,a=$("#theater_area_list > ul > li");a.find("a span.count").html("");var i=9;_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER&&(i=SPECIALTHEATERGROUP_NAMES.length);for(var l=0;l<i;l++)if(t=-1,(e=a.eq(l)).show(),_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER)if(l>=SPECIALTHEATERGROUP_NAMES.length)e.find("a span.name").html("&nbsp;"),e.find("a span.count").html("&nbsp;"),e.hide();else{var s="";$.each(THEATER_RATING,function(e,t){t===l&&(s=e)}),e.find("a span.name").text(SPECIALTHEATERGROUP_NAMES[l]),t=e.find(".area_theater_list li[RATING_CD="+s+"]:not(.dimmed)").length,e.find("a span.count").text("("+t+")")}else t=_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE?(e.find("a span.name").text(AREAGROUP_NAMES[l]),e.find(".area_theater_list li[areaindex="+l+"][RATING_CD=16]:not(.dimmed)").length):(e.find("a span.name").text(AREAGROUP_NAMES[l]),e.find(".area_theater_list li[areaindex="+l+"]:not(.dimmed):not(.duplicate)").length),e.find("a span.count").text("("+t+")")}function updateTheaterLeftTabCountWithCountSet(c){$("#theater_area_list > ul > li").each(function(e){var t=$(this),a=0;c[e]&&(a=c[e]);var i=t.find("a span.name"),l=t.find("a span.count"),s=_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER;if(e>=AREAGROUP_NAMES.length&&s)l.text(""),t.hide();else{var o=s?SPECIALTHEATERGROUP_NAMES:AREAGROUP_NAMES;i.text(o[e]),l.text("("+a+")"),t.show()}e>=o.length&&(i.html("&nbsp;"),l.html("&nbsp;"))})}function SortRankByName(e,t){var a=parseFloat(e.TICKET_RATE),i=parseFloat(t.TICKET_RATE),l=e.STAR_POINT,s=t.STAR_POINT,o=e.MOVIE_GROUP_NM,c=t.MOVIE_GROUP_NM;return a!=i?$.cgv.util.compareDescending(a,i):l!=s?$.cgv.util.compareDescending(l,s):$.cgv.util.compareAscendingForKor(o,c)}function SortAbcByName(e,t){var a=e.MOVIE_GROUP_NM,i=t.MOVIE_GROUP_NM,l=e.STAR_POINT,s=t.STAR_POINT;return a!=i?$.cgv.util.compareAscendingForKor(a,i):$.cgv.util.compareDescending(l,s)}function SortSubtitleByName(e,t){var a=e.GROUP_NM,i=t.GROUP_NM,l=e.IS_ENG_SUBTITLE,s=t.IS_ENG_SUBTITLE;return l!=s?$.cgv.util.compareDescending(l,s):$.cgv.util.compareAscending(a,i)}function selectMovie(e,t,a,i,l){var s=$(".section-movie .movie-list > ul > li.press");0==s.size()&&(s=$(".section-movie .movie-list > ul > li.selected"));var o,c=null;null!=$.cgv.data.SCHEDULE.GroupMovies&&($.isArray($.cgv.data.SCHEDULE.GroupMovies.CGroupMovie)?c=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie[s.attr("data-index")]:null!=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie&&(c=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie)),$($.cgv.data.SCHEDULE.Movies.CMovie).each(function(e,t){if(t.GROUP_CD==c.MOVIE_CD_GROUP)return o=t,!1}),(s.hasClass("dimmed")||t)&&(clearUserData(),clearTimeTableData(),$.cgv.data.SCHEDULE_BY_MOVIE.GroupMovies=$.cgv.util.clone($.cgv.data.SCHEDULE.GroupMovies),$.cgv.data.SCHEDULE_BY_MOVIE.Movies=$.cgv.util.clone($.cgv.data.SCHEDULE.Movies)),$.cgv.data.고객선택정보.상영관시간.초기화(),updateTimeSection(),$.cgv.data.고객선택정보.영화.초기화(),$.cgv.data.고객선택정보.영화.영화그룹코드=c.MOVIE_CD_GROUP,$.cgv.data.고객선택정보.영화.영화그룹명=c.MOVIE_GROUP_NM,$.cgv.data.고객선택정보.영화.영화명=o.MOVIE_NM,$.cgv.data.고객선택정보.영화.영화타입코드=e,$.cgv.data.고객선택정보.영화.영화포스터url=c.POSTER,$.cgv.data.고객선택정보.영화.영화MOVIEIDX=c.MOVIE_IDX,$.cgv.data.고객선택정보.영화.영화코드=o.MOVIE_CD,$.cgv.data.고객선택정보.영화.SOUNDX_YN="",$.cgv.data.고객선택정보.영화.Subtitle_CD="",$.cgv.data.고객선택정보.영화.Third_Attr_CD="",null!=a&&($.cgv.data.고객선택정보.영화.SOUNDX_YN=a),null!=i&&($.cgv.data.고객선택정보.영화.Subtitle_CD=i),null!=l?$.cgv.data.고객선택정보.영화.Third_Attr_CD=l:_movieListType==MOVIE_LIST_TYPE.MOVIECOLLAGE&&($.cgv.data.고객선택정보.영화.Third_Attr_CD=$.cgv.data.고객선택정보.영화.세번째속성코드),_scheduleSelectedType=SCHEDULE_SELECT_TYPE.MOVIE,$(".section-movie .movie-list > ul > li").removeClass("selected"),$(".section-movie .movie-list > ul > li[MOVIE_CD_GROUP="+$.cgv.data.고객선택정보.영화.영화그룹코드+"]").addClass("selected"),tnbUpdate()}function selectMovie2(e){var t=null;null!=$.cgv.data.SCHEDULE.GroupMovies&&($.isArray($.cgv.data.SCHEDULE.GroupMovies.CGroupMovie)?t=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie[e.attr("data-index")]:null!=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie&&(t=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie));var a=$.cgv.data.SCHEDULE.Movies.CMovie;a||(a=[]),$.isArray(a)||(a=[a]);var i=a.firstItem(function(e){return e.GROUP_CD==t.MOVIE_CD_GROUP});return eventMovieCD==i.MOVIE_CD&&1==$.cgv.data.고객정보.비회원여부?(alert(specialEventMovie.alertMent1),!1):(e.hasClass("dimmed")&&(clearUserData(),clearTimeTableData(),$.cgv.data.SCHEDULE_BY_MOVIE.GroupMovies=$.cgv.util.clone($.cgv.data.SCHEDULE.GroupMovies),$.cgv.data.SCHEDULE_BY_MOVIE.Movies=$.cgv.util.clone($.cgv.data.SCHEDULE.Movies)),$.cgv.data.고객선택정보.상영관시간.초기화(),updateTimeSection(),$.cgv.data.고객선택정보.영화.초기화(),$.cgv.data.고객선택정보.영화.영화그룹코드=t.MOVIE_CD_GROUP,$.cgv.data.고객선택정보.영화.영화그룹명=t.MOVIE_GROUP_NM,$.cgv.data.고객선택정보.영화.영화명=i.MOVIE_NM,$.cgv.data.고객선택정보.영화.영화포스터url=t.POSTER,$.cgv.data.고객선택정보.영화.영화MOVIEIDX=t.MOVIE_IDX,$.cgv.data.고객선택정보.영화.영화코드=i.MOVIE_CD,_movieListType==MOVIE_LIST_TYPE.MOVIECOLLAGE&&($.cgv.data.고객선택정보.영화.Third_Attr_CD=$.cgv.data.고객선택정보.영화.세번째속성코드),_scheduleSelectedType=SCHEDULE_SELECT_TYPE.MOVIE,tnbUpdate(),!0)}function selectTheater(e){$("#theater_area_list .area_theater_list li[THEATER_CD="+e.THEATER_CD+"]:visible").hasClass("dimmed")&&(clearUserData(),clearTimeTableData(),$.cgv.data.SCHEDULE_BY_THEATER.STheaters=$.cgv.util.clone($.cgv.data.SCHEDULE.STheaters),$.cgv.data.SCHEDULE_BY_THEATER.Theaters=$.cgv.util.clone($.cgv.data.SCHEDULE.Theaters)),_scheduleSelectedType=SCHEDULE_SELECT_TYPE.THEATER,$.cgv.data.고객선택정보.극장.극장코드=e.THEATER_CD,$.cgv.data.고객선택정보.극장.극장명=e.THEATER_NM,$.cgv.data.고객선택정보.극장.지역코드=e.AREA_CD,$("#theater_area_list .area_theater_list li").removeClass("selected"),$("#theater_area_list .area_theater_list li[THEATER_CD="+e.THEATER_CD+"]").addClass("selected"),tnbUpdate()}function selectTheaterByFavoriteCGV(l){var e=null;_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE||_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER?e=$.cgv.data.SCHEDULE.STheaters.CSTheater:null!=$.cgv.data.SCHEDULE.Theaters&&(e=$.cgv.data.SCHEDULE.Theaters.CTheater),null!=e&&$(e).each(function(e,t){if(t.THEATER_CD==l){var a=getAreaIndexByAreaCode(t.AREA_CD),i=$("#theater_area_list .area_theater_list li[theater_cd="+l+"]");return(_theaterListType==THEATER_LIST_TYPE.ALL||_theaterListType==THEATER_LIST_TYPE.MOVIECOLLAGE)&&_selectedTheaterLeftTabIndex!=a&&selectTheaterLeftTab(a),i.is(":visible")&&theaterListClickListener2(i),updateTheaterSection(),!1}})}function selectDate(e){$(".section-date .date-list ul li[date="+e+"]").hasClass("dimmed")&&(clearUserData(),clearTimeTableData(),$.cgv.data.SCHEDULE_BY_DATE.PlayDays=$.cgv.util.clone($.cgv.data.SCHEDULE.PlayDays)),_scheduleSelectedType=SCHEDULE_SELECT_TYPE.DATE,$.cgv.data.고객선택정보.날짜.상영일자=e,$(".section-date .date-list ul li").removeClass("selected"),$(".section-date .date-list ul li[date="+e+"]").addClass("selected"),tnbUpdate()}function selectTime(e,t){return!(1!=t&&"Y"==e.WARNING_TIME&&!confirm(MSG1_TIME_SHORT))&&($.cgv.data.고객선택정보.영화.MOVIE_ATTR_CD=e.MVE_KIND_CD,$.cgv.data.고객선택정보.영화.영화추가속성코드=e.MOVIE_ADD_CD,selectedMovieInfo.set(e),$.cgv.data.고객선택정보.상영관시간.상영관등급코드=e.SCREEN_RATING_CD,$.cgv.data.고객선택정보.상영관시간["상영관등급명"]=e.SCREEN_RATING_NM,$.cgv.data.고객선택정보.상영관시간.상영관코드=e.SCREEN_CD,$.cgv.data.고객선택정보.상영관시간.상영시간=e.PLAY_START_TM,$.cgv.data.고객선택정보.상영관시간.상영종료시간=e.PLAY_END_TM,$.cgv.data.고객선택정보.상영관시간.상영회차=e.PLAY_NUM,$.cgv.data.고객선택정보.상영관시간.상영관명=e.SCREEN_NM,$.cgv.data.고객선택정보.상영관시간.상영시간코드=e.PLAY_TIME_CD,$.cgv.data.고객선택정보.상영관시간.영화자막속성=e.SUBTITLE_CD,$.cgv.data.고객선택정보.영화.영화코드=e.MOVIE_CD,$.cgv.data.고객선택정보.영화.영화명=e.MOVIE_NM,$.cgv.data.고객선택정보.영화.영화속성코드=e.MOVIE_PLATFORM_ATTR_CD,$.cgv.data.고객선택정보.영화.영화등급코드=e.MOVIE_RATING_CD,$(".section-time .time-list ul li").removeClass("selected"),$(".section-time .time-list ul li[SCREEN_CD="+e.SCREEN_CD+"][PLAY_START_TM="+e.PLAY_START_TM+"]").addClass("selected"),tnbUpdate(),!0)}function setupTabmenu(a,t){if(null==a.prop("tabmenu_setuped")){a.prop("tabmenu_setuped","true"),a.find(".button").each(function(e){$(this).prop("tabmenu-index",e)}),0==a.find("span.side").size()&&(a.find(".button").before("<span class='side'></span>"),a.find(".button").last().after("<span class='side'></span>")),a.find("span.side").toggleClass("on",!1);var e=a.find(".button.selected");e.prevAll(".side:first").toggleClass("on",!0),e.nextAll(".side:first").toggleClass("on",!0),a.find(".button").unbind("click").bind("click",function(e){t&&t($(this),$(this).prop("tabmenu-index"))}),a.find(".button:last-child").unbind("click").bind("click",function(e){t&&t($(this),$(this).prop("tabmenu-index"))}),a.find(".button.menu1").unbind("focus").bind("focus",function(e){hideTabmenuSelectBox()}),a.find(".button").last().nextAll(".tabmenu-selectbox").find("li:last-child").unbind("blur").bind("blur",function(e){hideTabmenuSelectBox()}),a.find(".tabmenu-selectbox.MOVIECOLLAGE").unbind("mouseenter").bind("mouseenter",function(e){showTabmenuSelectBox(MOVIE_LIST_TYPE.MOVIECOLLAGE)}),a.find(".tabmenu-selectbox.SPECIALTHEATER").unbind("mouseenter").bind("mouseenter",function(e){showTabmenuSelectBox(MOVIE_LIST_TYPE.SPECIALTHEATER)}),a.find(".tabmenu-selectbox.SPECIALTHEATER ul li a").unbind("click").bind("click",function(e){var t=$(this).parent("li");_movieListType=MOVIE_LIST_TYPE.SPECIALTHEATER,_movieListSubType=t.index(),selectTabmenu(a,a.find(".button.menu3")),t.addClass("selected"),hideTabmenuSelectBox(),_selectedTheaterLeftTabIndex=-1,_movieSelectedTypeName="",$.cgv.data.고객선택정보.극장.초기화(),$.cgv.data.고객선택정보.날짜.초기화(),$.cgv.data.고객선택정보.영화.초기화(),$.cgv.data.고객선택정보.상영관시간.초기화(),$.cgv.data.고객선택정보.좌석.초기화(),updateTimeSection(),clearTimeTableData(),_theaterListType=THEATER_LIST_TYPE.ALL,selectTabmenu($(".section-theater .tabmenu"),$(".section-theater .tabmenu .button.menu1")),_movieSortType=MOVIE_SORT_TYPE.RANK,$(".section-movie .sortmenu .button").removeClass("selected"),$(".section-movie .sortmenu .button.btn-rank").addClass("selected"),setDataIndexToTheater(t.index()),_movieListSpecialTheaterRatingCd=$.cgv.data.고객선택정보.극장.상영관종류,_scheduleSelectedType=SCHEDULE_SELECT_TYPE.NONE,loadScheduleAll(ticketStep1Update)})}}function selectTabmenu(e,t){e.find(".tabmenu-selectbox.MOVIECOLLAGE ul li").removeClass("selected"),e.find(".tabmenu-selectbox.SPECIALTHEATER ul li").removeClass("selected"),e.find(".button").toggleClass("selected",!1),t.toggleClass("selected",!0),e.find("span.side").toggleClass("on",!1);var a=e.find(".button.selected");a.prevAll(".side:first").toggleClass("on",!0),a.nextAll(".side:first").toggleClass("on",!0)}function showTabmenuSelectBox(e){switch(hideTabmenuSelectBox(),e){case MOVIE_LIST_TYPE.MOVIECOLLAGE:(t=$(".section-movie .tabmenu .button.menu2")).addClass("over"),t.prevAll(".side:first").toggleClass("over",!0),t.nextAll(".side:first").toggleClass("over",!0),(a=$(".section-movie .tabmenu .tabmenu-selectbox."+e)).show(),a.find(".title a").focus();break;case MOVIE_LIST_TYPE.SPECIALTHEATER:var t,a;(t=$(".section-movie .tabmenu .button.menu3")).addClass("over"),t.prevAll(".side:first").toggleClass("over",!0),t.nextAll(".side:first").toggleClass("over",!0),(a=$(".section-movie .tabmenu .tabmenu-selectbox."+e)).show(),a.find(".title a").focus()}}function hideTabmenuSelectBox(){var e=$(".tabmenu-selectbox:visible").prevAll(".button:first");e.removeClass("over"),e.parent().find(".side.over").removeClass("over"),$(".tabmenu-selectbox").hide()}function closeSelectboxMovieType(){$(".selectbox-movie-type").hide(),$(".section-movie .movie-list > ul > li.press").removeClass("press")}function SelectboxMovieTypeClickListener(e){var t=e;-1!=(e+"").indexOf("Event")&&(t=$(e.currentTarget?e.currentTarget:e.srcElement));var a=t.parents("li");if(!a.hasClass("dimmed")||confirm(MSG1_SELECT_CLEAR_BY_MOVIE)){switch(t.data("type")){case"ALL":$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType","ALL"),selectMovie("",a.hasClass("dimmed"));break;case"DIGITAL":$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType","DIGITAL"),selectMovie("02",a.hasClass("dimmed"));break;case"IMAX":$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType","IMAX"),selectMovie("05",a.hasClass("dimmed"));break;case"4DX":$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType","4DX"),selectMovie("04",a.hasClass("dimmed"));break;case"SOUNDX":$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType","SOUNDX"),selectMovie("",a.hasClass("dimmed"),"Y");break;case"SCREENX":$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType","SCREENX"),selectMovie("09",a.hasClass("dimmed"));break;case"3D":$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType","3D"),selectMovie("03",a.hasClass("dimmed"));break;case"DUBBING":$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType","DUBBING"),selectMovie("",a.hasClass("dimmed"),null,"02");break;case"SUBTITLES":$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType","SUBTITLES"),selectMovie("",a.hasClass("dimmed"),null,"01");break;default:$(".section-movie .movie-list > ul > li.press").attr("selectedMovieType",a.attr("id")),selectMovie("",a.hasClass("dimmed"),null,null,t.attr("data-type"))}reloadScheduleData(),$(".selectbox-movie-type").hide(),skipToSomething("skip_theater_list")}}function showSelectboxMovieType(e){$("div#movie_list");var o=$(".selectbox-movie-type");o.find(".proplist").addClass("dimmed").hide();var t=o.find("> ul > li").removeClass("selected"),a=t.filter(".GROUP2"),c=t.filter(".GROUP3");null!=e.attr("selectedMovieType")&&t.filter("."+e.attr("selectedMovieType")).addClass("selected");var n=null;null!=$.cgv.data.SCHEDULE.GroupMovies&&($.isArray($.cgv.data.SCHEDULE.GroupMovies.CGroupMovie)?n=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie[e.attr("data-index")]:null!=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie&&(n=$.cgv.data.SCHEDULE.GroupMovies.CGroupMovie));var i=$.cgv.data.SCHEDULE.Movies.CMovie,r=null;$(i).each(function(e,t){if(t.GROUP_CD==n.MOVIE_CD_GROUP&&("01"!=t.TRANS_CD&&"02"!=t.TRANS_CD||("01"!=t.PLATFORM_ATTR_CD&&"04"!=t.PLATFORM_ATTR_CD||(r=$("#sbmt_digital")),"02"!=t.PLATFORM_ATTR_CD&&"05"!=t.PLATFORM_ATTR_CD||(r=$("#sbmt_3d")),"03"!=t.PLATFORM_ATTR_CD&&"06"!=t.PLATFORM_ATTR_CD||(r=$("#sbmt_4dx")),"08"==t.MOVIE_ATTR_CD&&(r=$("#sbmt_screenx")),null!=r&&r.show().removeClass("dimmed")),"02"==t.PLATFORM_CD&&$("#sbmt_imax").show().removeClass("dimmed"),"Y"==t.SOUNDX_YN&&$("#sbmt_soundx").show().removeClass("dimmed"),"01"==t.SUBTITLE_CD&&$("#sbmt_subtitle").show().removeClass("dimmed"),"02"==t.SUBTITLE_CD&&$("#sbmt_dubbing").show().removeClass("dimmed"),""!=t.THIRD_ATTR_CD)){var a=!1,i="thidItem_"+t.THIRD_ATTR_CD;if((c=o.find("li.GROUP3")).each(function(){$(this).attr("id")==i&&(a=!0,$(this).show().removeClass("dimmed"))}),0==a){var l=$('<li class="proplist GROUP3 thirdItems"/>');l.attr("id",i).addClass(i);var s=$('<a onclick="SelectboxMovieTypeClickListener(event);return false;" href="#" data-type="'+t.THIRD_ATTR_CD+'"/>');s.text(t.THIRD_ATTR_NM),l.append(s),o.find("ul").append(l),l.show().removeClass("dimmed")}}}),CMN_OSBR.ie7||o.css("width","auto"),c=o.find("li.GROUP3");var l=e.offset().top-e.parent().offset().top+e.closest(".content").scrollTop();l<e.closest(".content").scrollTop()?l=e.closest(".content").scrollTop():l>e.closest(".content").scrollTop()+e.closest(".content").height()-$(".selectbox-movie-type").height()-4&&(l=e.closest(".content").scrollTop()+e.closest(".content").height()-$(".selectbox-movie-type").height()-4),o.css("top",l+"px"),e.after(o),o.show().addClass("checkedBD"),a.removeClass("overline"),c.removeClass("overline"),$(".selectbox-movie-type .GROUP4").removeClass("overline"),0!=a.filter(":visible").size()&&a.filter(":visible").eq(0).addClass("overline"),0!=c.filter(":visible").size()&&c.filter(":visible").eq(0).addClass("overline"),0!=$(".selectbox-movie-type .GROUP4:visible").size()&&$(".selectbox-movie-type .GROUP4:visible").eq(0).addClass("overline"),IS_ENGLISH_SUBTITLES_CHK&&SelectboxMovieTypeClickListener($("#sbmt_subtitle").find("a"))}function hideSelectboxMovieType(){$(".selectbox-movie-type").hide()}function ticketStep1UpdateMovieCollageList(){$(".tabmenu-selectbox.MOVIECOLLAGE ul li").filter(function(){return 0!=$(this).index()&&1!=$(this).index()}).remove();var i=$(".tabmenu-selectbox.MOVIECOLLAGE ul");$($.cgv.data.MOVIECOLLAGE_MENU).each(function(e,t){var a=$('<li><a href="#" onclick="return false;">'+t.COM_NM+"</a></li>");a.attr("COM_CD",t.COM_CD),i.append(a)});var l=$(".movie-select .tabmenu");$(".tabmenu-selectbox.MOVIECOLLAGE ul li a").unbind("click").bind("click",function(e){var t=$(this).parent("li"),a=(t.find("a"),t.attr("COM_CD"));_movieSortType=MOVIE_SORT_TYPE.RANK,$(".section-movie .sortmenu .button").removeClass("selected"),$(".section-movie .sortmenu .button.btn-rank").addClass("selected"),_movieListType=MOVIE_LIST_TYPE.MOVIECOLLAGE,_movieListSubType=t.index(),selectTabmenu(l,l.find(".button.menu2")),t.addClass("selected"),hideTabmenuSelectBox(),_selectedTheaterLeftTabIndex=-1,clearUserData(),clearTimeTableData(),_theaterListType=THEATER_LIST_TYPE.ALL,selectTabmenu($(".section-theater .tabmenu"),$(".section-theater .tabmenu .button.menu1")),0==t.index()?($.cgv.data.고객선택정보.극장.극장특성="Y",$.cgv.data.고객선택정보.극장.상영관종류="",$.cgv.data.고객선택정보.영화.세번째속성코드="00"):1==t.index()?($.cgv.data.고객선택정보.극장.극장특성="Y",$.cgv.data.고객선택정보.극장.상영관종류="",$.cgv.data.고객선택정보.영화.세번째속성코드="N"):($.cgv.data.고객선택정보.극장.극장특성="Y",$.cgv.data.고객선택정보.극장.상영관종류="",$.cgv.data.고객선택정보.영화.세번째속성코드=a),_scheduleSelectedType=SCHEDULE_SELECT_TYPE.NONE,loadScheduleAll(ticketStep1Update)})}function clearUserData(){_movieSelectedTypeName="",$.cgv.data.고객선택정보.극장.초기화(),$.cgv.data.고객선택정보.날짜.초기화(),$.cgv.data.고객선택정보.영화.초기화(),$.cgv.data.고객선택정보.상영관시간.초기화(),$.cgv.data.고객선택정보.좌석.초기화(),_movieListType==MOVIE_LIST_TYPE.SPECIALTHEATER&&setDataIndexToTheater(_movieListSubType),_theaterListType==THEATER_LIST_TYPE.SPECIALTHEATER&&setDataIndexToTheater(_selectedTheaterLeftTabIndex)}function clearTimeTableData(){$.cgv.data.TIMETABLE.초기화()}function loadScheduleAll(a){var i;switch(_movieListType){case MOVIE_LIST_TYPE.ALL:i=$.cgv.api.ticket.GetScheduleTotalDefault;break;case MOVIE_LIST_TYPE.MOVIECOLLAGE:i=$.cgv.api.ticket.GetScheduleCollageDefault;break;case MOVIE_LIST_TYPE.SPECIALTHEATER:i=$.cgv.api.ticket.GetScheduleSCScreenDefault}var e={};e.ISNormal=$.cgv.data.고객선택정보.극장.극장특성,e.Language=$.cgv.config.LANGUAGE,e.Screen_Rating_Cd=$.cgv.data.고객선택정보.극장.상영관종류,_movieListType==MOVIE_LIST_TYPE.MOVIECOLLAGE&&(e.Third_Attr_Cd=$.cgv.data.고객선택정보.영화.세번째속성코드),timeStampStart("[AJAX] loadScheduleAll"),$.cgv.net.loadAPI(i,e,{success:function(e){timeStampEnd("[AJAX] loadScheduleAll"),timeStampStart("[AJAX-Callback] loadScheduleAll");var t=i.parseData(e);null==t.GroupMovies&&(t={GroupMovies:{},Movies:{},Theaters:{},STheaters:{},PlayDays:{},Screen:{}}),$.cgv.data.SCHEDULE=t,$.cgv.data.SCHEDULE_BY_MOVIE=$.cgv.util.clone(t),$.cgv.data.SCHEDULE_BY_THEATER=$.cgv.util.clone(t),$.cgv.data.SCHEDULE_BY_DATE=$.cgv.util.clone(t),a&&a(),timeStampEnd("[AJAX-Callback] loadScheduleAll")},error:silentLoadErrorListener})}function loadScheduleByMovie(a){var i;switch(_movieListType){case MOVIE_LIST_TYPE.ALL:i=$.cgv.api.ticket.GetScheduleTotalMovie;break;case MOVIE_LIST_TYPE.MOVIECOLLAGE:i=$.cgv.api.ticket.GetScheduleCollageMovie;break;case MOVIE_LIST_TYPE.SPECIALTHEATER:i=$.cgv.api.ticket.GetScheduleSCScreenMovie}var e={};e.TheaterCd=$.cgv.data.고객선택정보.극장.극장코드,e.ISNormal=$.cgv.data.고객선택정보.극장.극장특성,e.PlayYMD=$.cgv.data.고객선택정보.날짜.상영일자,e.ScreenRatingCd=$.cgv.data.고객선택정보.극장.상영관종류,e.Language=$.cgv.config.LANGUAGE,$.cgv.net.loadAPI(i,e,{success:function(e){var t=i.parseData(e);null==t.SMS_RESULT||"0000"!=t.SMS_RESULT.RES_CD||null==t.GroupMovies?$.cgv.data.SCHEDULE_BY_MOVIE={GroupMovies:{},Movies:{}}:$.cgv.data.SCHEDULE_BY_MOVIE=t,a&&a()},error:silentLoadErrorListener})}function loadScheduleByTheater(a){var i;switch(_movieListType){case MOVIE_LIST_TYPE.ALL:i=$.cgv.api.ticket.GetScheduleTotalTheater;break;case MOVIE_LIST_TYPE.MOVIECOLLAGE:i=$.cgv.api.ticket.GetScheduleCollageTheater;break;case MOVIE_LIST_TYPE.SPECIALTHEATER:i=$.cgv.api.ticket.GetScheduleSCScreenTheater}var e={};e.PlayYMD=$.cgv.data.고객선택정보.날짜.상영일자,e.ISNormal=$.cgv.data.고객선택정보.극장.극장특성,e.MovieGroupCd=$.cgv.data.고객선택정보.영화.영화그룹코드,e.MovieTypeCd=$.cgv.data.고객선택정보.영화.영화타입코드,e.Subtitle_CD=$.cgv.data.고객선택정보.영화.Subtitle_CD,e.SOUNDX_YN=$.cgv.data.고객선택정보.영화.SOUNDX_YN,e.Third_Attr_CD=$.cgv.data.고객선택정보.영화.Third_Attr_CD,e.Language=$.cgv.config.LANGUAGE,$.cgv.net.loadAPI(i,e,{success:function(e){var t=i.parseData(e);null==t.SMS_RESULT||"0000"!=t.SMS_RESULT.RES_CD||null==t.Theaters&&null==t.STheaters?$.cgv.data.SCHEDULE_BY_THEATER={Theaters:{},STheaters:{}}:$.cgv.data.SCHEDULE_BY_THEATER=t,a&&a()},error:silentLoadErrorListener})}function loadScheduleByDate(a){var i;switch(_movieListType){case MOVIE_LIST_TYPE.ALL:i=$.cgv.api.ticket.GetScheduleTotalPlayYMD;break;case MOVIE_LIST_TYPE.MOVIECOLLAGE:i=$.cgv.api.ticket.GetScheduleCollagePlayYMD;break;case MOVIE_LIST_TYPE.SPECIALTHEATER:i=$.cgv.api.ticket.GetScheduleSCScreenPlayYMD}var e={};e.TheaterCd=$.cgv.data.고객선택정보.극장.극장코드,e.ISNormal=$.cgv.data.고객선택정보.극장.극장특성,e.MovieGroupCd=$.cgv.data.고객선택정보.영화.영화그룹코드,e.ScreenRatingCd=$.cgv.data.고객선택정보.극장.상영관종류,e.MovieTypeCd=$.cgv.data.고객선택정보.영화.영화타입코드,e.Subtitle_CD=$.cgv.data.고객선택정보.영화.Subtitle_CD,e.SOUNDX_YN=$.cgv.data.고객선택정보.영화.SOUNDX_YN,e.Third_Attr_CD=$.cgv.data.고객선택정보.영화.Third_Attr_CD,e.Language=$.cgv.config.LANGUAGE,timeStampStart("[AJAX] loadScheduleByDate"),$.cgv.net.loadAPI(i,e,{success:function(e){timeStampEnd("[AJAX] loadScheduleByDate"),timeStampStart("[AJAX-Callback] loadScheduleByDate");var t=i.parseData(e);null==t.SMS_RESULT||"0000"!=t.SMS_RESULT.RES_CD||null==t.PlayDays?$.cgv.data.SCHEDULE_BY_DATE={PlayDays:{}}:$.cgv.data.SCHEDULE_BY_DATE=t,a&&a(),timeStampEnd("[AJAX-Callback] loadScheduleByDate")},error:silentLoadErrorListener})}function loadTimeTable(a){var e={};e.MovieGroupCd=$.cgv.data.고객선택정보.영화.영화그룹코드,e.TheaterCd=$.cgv.data.고객선택정보.극장.극장코드,e.PlayYMD=$.cgv.data.고객선택정보.날짜.상영일자,e.MovieType_Cd=$.cgv.data.고객선택정보.영화.영화타입코드,e.Subtitle_CD=$.cgv.data.고객선택정보.영화.Subtitle_CD,e.SOUNDX_YN=$.cgv.data.고객선택정보.영화.SOUNDX_YN,e.Third_Attr_CD=$.cgv.data.고객선택정보.영화.Third_Attr_CD,e.Language=$.cgv.config.LANGUAGE,_movieListType==MOVIE_LIST_TYPE.SPECIALTHEATER?e.IS_NORMAL="N":e.IS_NORMAL="",timeStampStart("[AJAX] loadTimeTable"),$.cgv.net.loadAPI($.cgv.api.ticket.GetTimeTable,e,{success:function(e){timeStampEnd("[AJAX] loadTimeTable"),timeStampStart("[AJAX-Callback] loadTimeTable");var t=$.cgv.api.ticket.GetTimeTable.parseData(e);$.cgv.data.TIMETABLE.Table=t.Table,$($.cgv.data.TIMETABLE.Table).each(function(e,t){t.SCREEN_CD==$.cgv.data.빠른예매정보.상영관코드&&t.PLAY_START_TM==$.cgv.data.빠른예매정보.상영시간&&($.cgv.data.고객선택정보.상영관시간.상영회차=t.PLAY_NUM)}),a&&a(),timeStampEnd("[AJAX-Callback] loadTimeTable")},error:silentLoadErrorListener})}function loadRemainSeat(e,t,a,i){var l={};l.TheaterCd=e,l.MovieCd=t,l.PlayYMD=a,timeStampStart("[AJAX] loadRemainSeat"),$.cgv.net.loadAPI($.cgv.api.ticket.GetRemainSeat,l,{success:function(e){timeStampEnd("[AJAX] loadRemainSeat"),timeStampStart("[AJAX-Callback] loadRemainSeat");var t=$.cgv.api.ticket.GetRemainSeat.parseData(e);$.cgv.data.REMAIN_SEAT_INFO=$.cgv.data.REMAIN_SEAT_INFO.concat(t.REMAIN_SEAT_INFO),i&&i(),timeStampEnd("[AJAX-Callback] loadRemainSeat")},error:silentLoadErrorListener})}function loadTCAlert(e,t,a,i){var l=$.cgv.api.ticket.TCAlert.PARAMS;(l={}).TheaterCode=e,l.MovieIdx=t,l.PlayYMD=a,$.cgv.net.loadAPI($.cgv.api.ticket.TCAlert,l,{success:function(e){timeStampEnd("[AJAX] loadTCAlert"),timeStampStart("[AJAX-Callback] loadTCAlert");$.cgv.api.ticket.TCAlert;var t=$.xml2json(unescape(e.d.data.DATA));if(null!=t&&null!=t.Table&&null!=t.Table.Notice&&0<t.Table.Notice.length){var a="알림";return IS_ENGLISH&&(a="Notice"),void ticketAlert(a,t.Table.Notice,null,function(){i&&i()})}i&&i()},error:loadTCAlertListenerStep1})}function loadTCAlertListenerStep1(){ticketStepShow(2),ticketNeedScrollToTop(!0),loadAdvertise(_ticketCurrentStep)}function loadGetMovieCollageMenu(){var e=$.cgv.api.ticket.GetMovieCollageMenu.PARAMS;(e={}).업체코드=$.cgv.data.통신.업체코드,e.언어=$.cgv.config.LANGUAGE,timeStampStart("[AJAX] loadGetMovieCollageMenu"),$.cgv.net.loadAPI($.cgv.api.ticket.GetMovieCollageMenu,e,{success:function(e){timeStampEnd("[AJAX] loadGetMovieCollageMenu"),timeStampStart("[AJAX-Callback] loadGetMovieCollageMenu");var t=$.cgv.api.ticket.GetMovieCollageMenu.parseData(e);$.cgv.data.MOVIECOLLAGE_MENU=t.Table,ticketStep1UpdateMovieCollageList(),timeStampEnd("[AJAX-Callback] loadGetMovieCollageMenu"),timeStampEnd("첫 진입시 스크립트로 측정가능한 최대 시간")},error:silentLoadErrorListener})}function setDataIndexToTheater(e){var t="";0===e&&(t=""),1===e&&(t="11"),2===e&&(t="02"),3===e&&(t="05"),4===e&&(t="09"),5===e&&(t="04"),6===e&&(t="08"),7===e&&(t="15"),8===e&&(t="06"),9===e&&(t="18"),10===e&&(t="32"),11===e&&(t="23"),$.cgv.data.고객선택정보.극장.상영관종류=t,$.cgv.data.고객선택정보.극장.극장특성="N"}function reloadScheduleDataCompleteListenerInvoke(){0<_reloadScheduleDataCompleteCount&&0==--_reloadScheduleDataCompleteCount&&(_reloadScheduleDataCompleteListener&&(_reloadScheduleDataCompleteListener(),_reloadScheduleDataCompleteListener=null),timeStampEnd("reloadScheduleData()"))}function loadScheduleByMovieSuccess(){updateMovieSection(!1),reloadScheduleDataCompleteListenerInvoke()}function loadScheduleByTheaterSuccess(){updateTheaterSection(!1),reloadScheduleDataCompleteListenerInvoke()}function loadScheduleByDateSuccess(){updateDateSection(!1),reloadScheduleDataCompleteListenerInvoke()}function loadTimeTableSuccess(){timeStamp("loadTimeTableSuccess()"),$.cgv.data.REMAIN_SEAT_INFO=[],updateTimeSection(!0);var a=new Object;$($.cgv.data.TIMETABLE.Table).each(function(e,t){null==a[t.MOVIE_CD]&&(a[t.MOVIE_CD]=!0,loadRemainSeat(t.THEATER_CD,t.MOVIE_CD,$.cgv.data.고객선택정보.날짜.상영일자,updateTimeSection))})}function ftScrollTo(e){if(0!=e.length){var t=e.parents("ul.content"),a=t.parents(".nano"),i=a.height(),l=e.offset().top-a.offset().top,s=l+e.height(),o=t.scrollTop();l<0?t.scrollTop(o+l):i<s&&t.scrollTop(o+s-i)}}function setScreenReaderMTD(e){var t;e.find(".sreader").html(""),0<(t=e.filter(".selected")).length&&(IS_ENGLISH?t.find(".sreader").html("selected"):t.find(".sreader").html("선택됨")),0<(t=e.filter(".dimmed")).length&&(IS_ENGLISH?t.find(".sreader").html("can not select"):t.find(".sreader").html("선택불가")),0<(t=e.filter(":hidden")).length&&(IS_ENGLISH?t.find(".sreader").html("can not select"):t.find(".sreader").html("선택불가"))}function setScreenReaderTime(e){var a,i,l,s=IS_ENGLISH;e.find(".sreader.mod").html(""),e.each(function(e,t){l="",a=$(t),i=a.find(".sreader.mod"),a.hasClass("morning")&&(l+=s?" early time":" 조조"),a.hasClass("night")&&(l+=s?" midnight":" 심야"),a.hasClass("disabled")&&(l+=s?" can not select":" 선택불가"),a.hasClass("selected")&&(l+=s?" selected":" 선택됨"),i.html(l)})}