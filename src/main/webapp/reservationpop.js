function ticketAlert(e,t,a,n,i){var s=$(".popup_alert.original").clone().removeClass("original");s.focus();var o=$("*:focus");s.find(".pop_close, .btn_close, .layer_close").click(l),s.find(".btn_ok").click(function(){"0001_1500_event"==a?ticketNewWindow("http://section.cgv.co.kr/Event/develop/GangByeon15.aspx"):"중계이벤트"==a?ticketNewWindow("http://www.cgv.co.kr/culture-event/event/detail-view.aspx?idx=10136&menu=0"):"울산삼산이벤트"==a?ticketNewWindow("http://www.cgv.co.kr/culture-event/event/detail-view.aspx?idx=10168&menu=0"):"신촌아트리온이벤트"==a||("청담씨네시티이벤트"==a?ticketNewWindow("http://www.cgv.co.kr/culture-event/event/detail-view.aspx?idx=10191&menu=0"):"중복예매"==a&&($.cgv.data.고객정보.비회원여부?ticketGuestLogin($.cgv.data.통신.암호화($.cgv.data.예매확정정보.고객명),$.cgv.data.통신.암호화($.cgv.data.예매확정정보.주민번호)):FlashReserveMyCGV())),void 0===i?l():i(l)});var c=s.find(".ft"),p=c.find(".btn_ok"),r=c.find(".btn_close");function l(){s.closest(".ft_layer_popup").hide(),0==$(".ft_layer_popup:visible").size()&&$(".blackscreen").hide(),o&&o.focus(),n&&n(),s.remove()}"noblesses"===a?(p.addClass("btn_red"),p.find("span").text("가입하기"),p.click(function(){noblessesClub.doJoin()})):"adultNotice"===a?(p.addClass("btn_red"),r.hide(),p.find("span").text(IS_ENGLISH?"agree proceed":"동의하고 진행하기")):(p.removeClass("btn_red"),p.find("span").text(IS_ENGLISH?"OK":"확인")),s.find(".alert_title").html(e),s.find(".alert_msg").html(t),null!=a&&""!=a||r.hide(),popupSetPosition(s)}function ticketAlert2(e,t,a){var n=$(".popup_alert.w450.base").clone().removeClass("base");a&&(n.find(".bd").addClass("p0"),"content"===a&&n.addClass("txt")),n.find(".layer_close, .btn_ok, .btn_close").click(function(){n.closest(".ft_layer_popup").hide(),0===$(".ft_layer_popup:visible").size()&&$(".blackscreen").hide();n.remove()}),n.find(".btn_close").hide(),n.find(".alert_title").html(e),n.find(".alert_msg").html(t),$(document.body).append(n),$(".blackscreen").show(),n.show()}function ticketNewWindow(e){var t=$('<form method="get" target="_blank" action="'+e+'"></form>');$(document.body).append(t),t.submit()}function ticketNewPopup(e,t,a,n){window.open(e,t,"left=0, top=0, width="+a+", height="+n+", resizable=yes, scrollbars=yes, status=no, menubar=no")}function ticketPopupInit(){$(".ft_layer_popup .layer_close, .ft_layer_popup .btn_close, .ft_layer_popup .btn_cancel, .ft_layer_popup .pop_close").unbind("click").bind("click",function(){ticketPopupHide($(this).closest(".ft_layer_popup").attr("name"))}),IS_ENGLISH&&$(".ft_layer_popup").addClass("english")}function ticketPopupShow(n,e,t,a){if(!e||!e.hasClass("disabled")){var f=$("."+n);if(f.attr("name",n),t?f.data("closeListener",t):f.data("closeListener",null),a?f.data("confirmListener",a):f.data("confirmListener",null),"popup_samsung_upoint"==n||"popup_okcashbag"==n||"popup_kiaRedPoint"==n){var i=f.find('input[type="text"]'),s=f.find(".btn_confirm");i.val("");var o=null,c=null,p=null,r=["오케이캐쉬백적립카드번호","삼성U포인트적립카드번호","기아RED포인트적립카드번호"];switch(n){case"popup_samsung_upoint":o=MSG3_CHECK_SAMSUNG_UPLUS_CARDNUM,c=$.cgv.api.payment.GetSamsungUPoint,pointApply_cardNum=r[1];break;case"popup_okcashbag":o=MSG3_CHECK_OK_CASHBAG_CARDNUM,c=$.cgv.api.payment.GetOKCashBagPopup,pointApply_cardNum=r[0];break;case"popup_kiaRedPoint":o=MSG3_CHECK_CREDIT_CARD_NUM,c=$.cgv.api.payment.GetKiaRedPoint,pointApply_cardNum=r[2]}s.unbind("click").bind("click",function(){var e=!0,t="",a=null;i.each(function(){if(""===(a=$(this).val())||a.length<4)return $(this).focus(),e=!1;t+=a}),e?function(a){(p=c.PARAMS).카드번호=a,p.아이디=$.cgv.data.좌석가확보완료정보.고객아이디,p.고객명=$.cgv.data.좌석가확보완료정보.고객명,last_payment_check=$.cgv.data.결제.최종결제정보,"popup_samsung_upoint"!=n&&(p.비밀번호="9999");$.cgv.net.loadAPI(c,p,{success:function(e){var t=c;result=t.parseData(e),SMS_RESULT=result.SMS_RESULT,null!=SMS_RESULT&&"00000"==SMS_RESULT.RES_CD?(savePointCard.set(a),ticketPopupHide(n)):alert(null==SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:SMS_RESULT.RES_MSG)},error:function(){}})}(t):alert(o)})}switch(n){case"popup_olleh_internet_coupon_register":var l=$("#popup_olleh_internet_coupon_register_couponno"),d=f.find(".btn_regist");l.val(""),d.unbind("click").bind("click",function(e){if(0==l.val().length)return alert(MSG3_CHECK_COUPON_NUM),void l.focus();var t=$.cgv.api.coupon.CouponRegisterOllehInternet.PARAMS;(t={}).관람권번호=l.val(),t.주민번호=$.cgv.data.좌석가확보완료정보.고객주민번호,t.고객아이디=$.cgv.data.좌석가확보완료정보.고객아이디,t.아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,$.cgv.net.loadAPI($.cgv.api.coupon.CouponRegisterOllehInternet,t,{success:function(e){$.cgv.api.coupon.CouponRegisterOllehInternet.parseData(e);"00000"==e.d.data.RES_CD?(alert(MSG_COUPON_REGISTER_SUCCESS),ticketPopupHide("popup_olleh_internet_coupon_register"),cancelOllehCoupon(),initOllehCoupon()):alert(e.d.data.RES_MSG)},error:function(){}})});break;case"popup_shinsegae_vip_coupon_register":l=$("#popup_shinsegae_vip_coupon_register_no"),d=f.find(".btn_regist");l.val(""),d.unbind("click").bind("click",function(e){if(0==l.val().length)return alert(MSG3_CHECK_COUPON_NUM),void l.focus();var t=$.cgv.api.coupon.CouponRegisterShinsegaeVIP.PARAMS;(t={}).관람권번호=l.val(),t.주민번호=$.cgv.data.좌석가확보완료정보.고객주민번호,t.고객아이디=$.cgv.data.좌석가확보완료정보.고객아이디,t.아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,$.cgv.net.loadAPI($.cgv.api.coupon.CouponRegisterShinsegaeVIP,t,{success:function(e){$.cgv.api.coupon.CouponRegisterShinsegaeVIP.parseData(e);"00000"==e.d.data.RES_CD?(alert(MSG_COUPON_REGISTER_SUCCESS),ticketPopupHide("popup_shinsegae_vip_coupon_register"),cancelShinsegaeCoupon(),initShinsegaeCoupon()):alert(e.d.data.RES_MSG)},error:function(){}})});break;case"popup_olleh_internet_coupon_list":var v=(h=f.find("table")).find("tbody"),S=f.find(".page-box");v.empty(),S.empty(),IS_ENGLISH?v.append("<tr class='placeholder'><td colspan='4'>No registered coupon.</td></tr>"):v.append("<tr class='placeholder'><td colspan='4'>등록된 올레인터넷가입고객쿠폰이 없습니다.</td></tr>");var _=$.cgv.api.coupon.CouponListOllehInternet.PARAMS;(_={}).임시예매번호=$.cgv.data.좌석가확보완료정보.임시예매번호,_.극장코드=$.cgv.data.좌석가확보완료정보.극장코드,_.영화코드=$.cgv.data.좌석가확보완료정보.영화코드,_.상영일자=$.cgv.data.좌석가확보완료정보.상영일자,_.상영회차=$.cgv.data.좌석가확보완료정보.상영회차,_.시작시간=$.cgv.data.좌석가확보완료정보.상영시간,_.상영관코드=$.cgv.data.좌석가확보완료정보.상영관코드,_.총결제금액=$.cgv.data.좌석가확보완료정보.총결제금액,_.총예매매수=$.cgv.data.좌석가확보완료정보.예매인원수+"",_.관람권번호="",_.고객아이디=$.cgv.data.좌석가확보완료정보.고객아이디,_.주민번호=$.cgv.data.좌석가확보완료정보.고객주민번호,_.조회구분="T",_.기할인금액="0",_.기할인매수="0",_.결제수단코드="0450",_.아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,$.cgv.net.loadAPI($.cgv.api.coupon.CouponListOllehInternet,_,{success:function(e){var t=$.cgv.api.coupon.CouponListOllehInternet.parseData(e);if(0!=e.d.success&&null!=t)if(null!=t.SMS_RESULT&&"0000"==t.SMS_RESULT.RES_CD){if(null!=t.CJ_COUPON){var a=t.CJ_COUPON;v.empty();var d=a.length,_=0,u=1;null==d&&(d=1),$(a).each(function(e,t){10<=_&&(_=0,++u);var a=t.EXPERY_DATE_START.replace(/-/g,"."),n=t.EXPERY_DATE_END.replace(/-/g,"."),i="",s=!1;i="0"==t.COUPON_STATE?(s=!0,IS_ENGLISH?"Applicable":"적용가능"):(s=!1,IS_ENGLISH?"Inapplicable":"적용불가");var o=$("<tr></tr>").attr("page",u),c=$('<td class="f_style1"></td>').text(d),p=$('<td class="f_style1"></td>').text(t.NO),r=$('<td class="f_style1"></td>').text(a+"~"+n),l=$("<td></td>").text(i);o.append(c),o.append(p),o.append(r),o.append(l),h.append(o),s&&(o.addClass("use"),l.addClass("t_use")),--d,++_});for(var n=1;n<=u;n++){var i=$('<a href="#" onclick="return false"></a>').text(n);i.bind("click",function(){var e=$(this).text();S.find("a").removeClass("on"),$(this).addClass("on"),v.find("tr").hide(),v.find("tr[page="+e+"]").show()}),1==n&&i.addClass("on"),S.append(i)}v.find("tr").hide(),v.find("tr[page=1]").show()}}else"CPN01"!=t.SMS_RESULT.RES_CD&&alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG);else alert(e.d.errorNM)},error:function(){}});break;case"popup_shinsegae_vip_coupon_list":v=(h=f.find("table")).find("tbody"),S=f.find(".page-box");v.empty(),S.empty(),IS_ENGLISH?v.append("<tr class='placeholder'><td colspan='4'>No registered coupon.</td></tr>"):v.append("<tr class='placeholder'><td colspan='4'>등록된 신세계 VIP 무료쿠폰이 없습니다.</td></tr>");_=$.cgv.api.coupon.CouponListShinsegaeVIP.PARAMS;(_={}).임시예매번호=$.cgv.data.좌석가확보완료정보.임시예매번호,_.극장코드=$.cgv.data.좌석가확보완료정보.극장코드,_.영화코드=$.cgv.data.좌석가확보완료정보.영화코드,_.상영일자=$.cgv.data.좌석가확보완료정보.상영일자,_.상영회차=$.cgv.data.좌석가확보완료정보.상영회차,_.시작시간=$.cgv.data.좌석가확보완료정보.상영시간,_.상영관코드=$.cgv.data.좌석가확보완료정보.상영관코드,_.총결제금액=$.cgv.data.좌석가확보완료정보.총결제금액,_.총예매매수=$.cgv.data.좌석가확보완료정보.예매인원수+"",_.관람권번호="",_.고객아이디=$.cgv.data.좌석가확보완료정보.고객아이디,_.주민번호=$.cgv.data.좌석가확보완료정보.고객주민번호,_.조회구분="T",_.기할인금액="0",_.기할인매수="0",_.결제수단코드="0540",_.아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,$.cgv.net.loadAPI($.cgv.api.coupon.CouponListShinsegaeVIP,_,{success:function(e){var t=$.cgv.api.coupon.CouponListShinsegaeVIP.parseData(e);if(0!=e.d.success&&null!=t)if(null!=t.SMS_RESULT&&"0000"==t.SMS_RESULT.RES_CD){if(null!=t.CJ_COUPON){var a=t.CJ_COUPON;v.empty();var d=a.length,_=0,u=1;null==d&&(d=1),$(a).each(function(e,t){10<=_&&(_=0,++u);var a=t.EXPERY_DATE_START.replace(/-/g,"."),n=t.EXPERY_DATE_END.replace(/-/g,"."),i="",s=!1;i="0"==t.COUPON_STATE?(s=!0,IS_ENGLISH?"Applicable":"적용가능"):(s=!1,IS_ENGLISH?"Inapplicable":"적용불가");var o=$("<tr></tr>").attr("page",u),c=$('<td class="f_style1"></td>').text(d),p=$('<td class="f_style1"></td>').text(t.NO),r=$('<td class="f_style1"></td>').text(a+"~"+n),l=$("<td></td>").text(i);o.append(c),o.append(p),o.append(r),o.append(l),h.append(o),s&&(o.addClass("use"),l.addClass("t_use")),--d,++_});for(var n=1;n<=u;n++){var i=$('<a href="#" onclick="return false"></a>').text(n);i.bind("click",function(){var e=$(this).text();S.find("a").removeClass("on"),$(this).addClass("on"),v.find("tr").hide(),v.find("tr[page="+e+"]").show()}),1==n&&i.addClass("on"),S.append(i)}v.find("tr").hide(),v.find("tr[page=1]").show()}}else"CPN01"!=t.SMS_RESULT.RES_CD&&alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG);else alert(e.d.errorNM)},error:step3popErrorListener});break;case"popup_cgv_discount_coupon_register":l=$("#popup_cgv_discount_coupon_register_no"),d=f.find(".btn_regist");l.val(""),d.unbind("click").bind("click",function(e){if(0==l.val().length)return alert(MSG3_CHECK_COUPON_NUM),void l.focus();var t=l.val();"005601"===t&&(t="3030826"),"000102"===t&&(t="3030827"),"009003"===t&&(t="3030828"),"001004"===t&&(t="3030829"),"005805"===t&&(t="3030830"),"000706"===t&&(t="3030791"),"001507"===t&&(t="3030831"),"008908"===t&&(t="3030832"),"015009"===t&&(t="3030833"),"000310"===t&&(t="3030834"),"011211"===t&&(t="3030835"),"000412"===t&&(t="3030836"),"012813"===t&&(t="3030837"),"011314"===t&&(t="3030838"),"005515"===t&&(t="3030839"),"013116"===t&&(t="3030840"),"019917"===t&&(t="3030841"),"022818"===t&&(t="3030842"),"018119"===t&&(t="3030843"),"019120"===t&&(t="3030844");var a=$.cgv.api.coupon.CouponRegisterCGVDiscount.PARAMS;(a={}).아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,a.쿠폰번호=t,$.cgv.net.loadAPI($.cgv.api.coupon.CouponRegisterCGVDiscount,a,{success:function(e){var t=$.cgv.api.coupon.CouponRegisterCGVDiscount.parseData(e);0!=e.d.success&&null!=t?null!=t.SMS_RESULT&&"0000"==t.SMS_RESULT.RES_CD?(alert(MSG_COUPON_REGISTER_SUCCESS),ticketPopupHide("popup_cgv_discount_coupon_register"),couponCGV.cancel()):alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG):alert(e.d.errorNM)},error:function(){}})});break;case"popup_cgv_discount_coupon_list":v=(h=f.find("table")).find("tbody"),S=f.find(".page-box");v.empty(),S.empty(),IS_ENGLISH?v.append("<tr class='placeholder'><td colspan='5'>No registered coupon.</td></tr>"):v.append("<tr class='placeholder'><td colspan='5'>등록된 CGV할인쿠폰이 없습니다.</td></tr>");_=$.cgv.api.coupon.CouponListNAuthCGVDiscount.PARAMS;(_={}).극장코드=$.cgv.data.좌석가확보완료정보.극장코드,_.영화코드=$.cgv.data.좌석가확보완료정보.영화코드,_.상영일자=$.cgv.data.좌석가확보완료정보.상영일자,_.상영관코드=$.cgv.data.좌석가확보완료정보.상영관코드,_.상영회차=$.cgv.data.좌석가확보완료정보.상영회차,_.자사쿠폰번호="",_.좌석등급코드=$.cgv.data.좌석가확보완료정보.예매좌석등급코드,_.계약번호="",_.주민번호=$.cgv.data.좌석가확보완료정보.고객주민번호,_.아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,_.조회구분="A",_.총결제금액="",_.총예매매수=$.cgv.data.좌석가확보완료정보.예매인원수+"",_.쿠폰기적용금액="",_.쿠폰기적용매수="",_.임시예매번호="",_.할인구분="",_.할인구분자="",_.할인값="",_.변경구분코드="",_.변동금액="",_.할인최소수량="",_.할인수량="",_.잔여할인대상매수="",_.예매수량=$.cgv.data.좌석가확보완료정보.예매인원수+"",_.임시예매번호=$.cgv.data.좌석가확보완료정보.임시예매번호,$.cgv.net.loadAPI($.cgv.api.coupon.CouponListNAuthCGVDiscountTotal,_,{success:function(e){var t=$.cgv.api.coupon.CouponListNAuthCGVDiscountTotal.parseData(e);if(0!=e.d.success&&null!=t)if(null!=t.SMS_RESULT&&"00000"==t.SMS_RESULT.RES_CD){if(null!=t.CGV_COUPON){var a=t.CGV_COUPON;v.empty();var _=a.length,u=0,g=1;null==_&&(_=1),$(a).each(function(e,t){10<=u&&(u=0,++g);var a=t.COUPON_SDT.substr(0,4)+"."+t.COUPON_SDT.substr(4,2)+"."+t.COUPON_SDT.substr(6,2),n=t.COUPON_EDT.substr(0,4)+"."+t.COUPON_EDT.substr(4,2)+"."+t.COUPON_EDT.substr(6,2),i="",s=!1;i="1"==t.USABLE?(s=!0,IS_ENGLISH?"Applicable":"적용가능"):(s=!1,IS_ENGLISH?"Inapplicable":"적용불가");var o=$("<tr></tr>").attr("page",g),c=$('<td class="f_style1"></td>').text(_),p=$("<td></td>").text(t.COUPON_NAME),r=$('<td class="f_style1"></td>').text(t.COUPONCERT_NO),l=$('<td class="f_style1"></td>').text(a+"~"+n),d=$("<td></td>").text(i);o.append(c),o.append(p),o.append(r),o.append(l),o.append(d),h.append(o),s&&(o.addClass("use"),d.addClass("t_use")),--_,++u});for(var n=1;n<=g;n++){var i=$('<a href="#" onclick="return false"></a>').text(n);i.bind("click",function(){var e=$(this).text();S.find("a").removeClass("on"),$(this).addClass("on"),v.find("tr").hide(),v.find("tr[page="+e+"]").show()}),1==n&&i.addClass("on"),S.append(i)}v.find("tr").hide(),v.find("tr[page=1]").show()}}else alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG);else alert(e.d.errorNM)},error:function(){}});break;case"popup_cgv_ticket_register":l=$("#popup_cgv_ticket_register_no"),d=f.find(".btn_regist");l.val(""),d.unbind("click").bind("click",function(e){var t=l.val().replace(/ /g,"");if(0==t.length)return alert(MSG3_CHECK_PASSWORD),void l.focus();var a=$.cgv.api.coupon.CouponRegisterMovieMoney.PARAMS;(a={}).아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,a.무비머니번호="",a.무비머니인증번호=t,a.구분자="C",$.cgv.net.loadAPI($.cgv.api.coupon.CouponRegisterMovieMoney,a,{success:function(e){var t=$.cgv.api.coupon.CouponRegisterMovieMoney.parseData(e);0!=e.d.success&&null!=t?null!=t.SMS_RESULT&&"0000"==t.SMS_RESULT.RES_CD?(alert(MSG_TICKET_REGISTER_SUCCESS),ticketPopupHide("popup_cgv_ticket_register"),cancelCGVTicketList(),initCGVTicketList()):alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG):alert(e.d.errorNM)},error:function(){}})});break;case"popup_primus_ticket_register":l=$("#popup_primus_ticket_register_no"),d=f.find(".btn_regist");l.val(""),d.unbind("click").bind("click",function(e){var t=l.val().replace(/ /g,"");if(0==t.length)return alert(MSG3_CHECK_COUPON_NUM),void l.focus();var a=$.cgv.api.coupon.CouponRegisterMovieMoney.PARAMS;(a={}).아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,a.무비머니번호="",a.무비머니인증번호=t,a.구분자="P",$.cgv.net.loadAPI($.cgv.api.coupon.CouponRegisterMovieMoney,a,{success:function(e){var t=$.cgv.api.coupon.CouponRegisterMovieMoney.parseData(e);0!=e.d.success&&null!=t?null!=t.SMS_RESULT&&"0000"==t.SMS_RESULT.RES_CD?(alert(MSG_TICKET_REGISTER_SUCCESS),ticketPopupHide("popup_primus_ticket_register"),cancelPrimusTicketList(),initPrimusTicketList()):alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG):alert(e.d.errorNM)},error:function(){}})});break;case"popup_moviecollage_passcard_register":l=$("#popup_moviecollage_passcard_register_no"),d=f.find(".btn_regist");l.val(""),d.unbind("click").bind("click",function(e){var t=l.val().replace(/ /g,"");if(0==t.length)return alert(MSG3_CHECK_MOVIE_COLLAGE_CARDNUM),void l.focus();var a=$.cgv.api.coupon.CouponRegisterMovieCollagePasscard.PARAMS;(a={}).아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,a.카드번호=t,$.cgv.net.loadAPI($.cgv.api.coupon.CouponRegisterMovieCollagePasscard,a,{success:function(e){var t=$.cgv.api.coupon.CouponRegisterMovieCollagePasscard.parseData(e);0!=e.d.success&&null!=t?null!=t.SMS_RESULT&&"0000"==t.SMS_RESULT.RES_CD?(alert(MSG_REGISTER_SUCCESS),ticketPopupHide("popup_moviecollage_passcard_register"),cancelMovieCollagePasscardList(),initMovieCollagePasscardList()):alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG):alert(e.d.errorNM)},error:function(){}})});break;case"popup_moviecollage_passcard_list":v=(h=f.find("table")).find("tbody"),S=f.find(".page-box");v.empty(),S.empty(),IS_ENGLISH?v.append("<tr class='placeholder'><td colspan='5'>No registered passcard.</td></tr>"):v.append("<tr class='placeholder'><td colspan='5'>등록된 무비꼴라쥬 패스카드가 없습니다.</td></tr>");_=$.cgv.api.coupon.CouponListNAuthMovieCollagePasscard.PARAMS;(_={}).극장코드=$.cgv.data.좌석가확보완료정보.극장코드,_.상영관코드=$.cgv.data.좌석가확보완료정보.상영관코드,_.상영일자=$.cgv.data.좌석가확보완료정보.상영일자,_.시작시간=$.cgv.data.좌석가확보완료정보.상영시간,_.상영회차=$.cgv.data.좌석가확보완료정보.상영회차,_.영화코드=$.cgv.data.좌석가확보완료정보.영화코드,_.총결제금액=$.cgv.data.좌석가확보완료정보.총결제금액,_.총예매매수=$.cgv.data.좌석가확보완료정보.예매인원수+"",_.임시예매번호=$.cgv.data.좌석가확보완료정보.임시예매번호,_.카드번호="",_.조회구분="T",_.무비꼴라쥬인증번호="",_.고객아이디=$.cgv.data.좌석가확보완료정보.고객아이디,_.아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,$.cgv.net.loadAPI($.cgv.api.coupon.CouponListNAuthMovieCollagePasscard,_,{success:function(e){var t=$.cgv.api.coupon.CouponListNAuthMovieCollagePasscard.parseData(e);if(0!=e.d.success&&null!=t)if(null!=t.SMS_RESULT&&"00000"==t.SMS_RESULT.RES_CD){if(null!=t.MOVIE_COLLAGE){var a=t.MOVIE_COLLAGE;v.empty();var _=a.length,u=0,g=1;null==_&&(_=1),$(a).each(function(e,t){10<=u&&(u=0,++g);var a=t.REG_DATE.substr(0,4)+"."+t.REG_DATE.substr(4,2)+"."+t.REG_DATE.substr(6,2),n=t.EXP_DATE.substr(0,4)+"."+t.EXP_DATE.substr(4,2)+"."+t.EXP_DATE.substr(6,2),i=t.STATE,s=!1;i="1"==t.STATE?(s=!0,IS_ENGLISH?"Applicable":"적용가능"):(s=!1,IS_ENGLISH?"Inapplicable":"적용불가");var o=$("<tr></tr>").attr("page",g),c=$('<td class="f_style1"></td>').text(_),p=$("<td></td>").text(t.CARD_KIND),r=$('<td class="f_style1"></td>').text(t.CARD_NO),l=$('<td class="f_style1"></td>').text(a+"~"+n),d=$("<td></td>").text(i);o.append(c),o.append(p),o.append(r),o.append(l),o.append(d),h.append(o),s&&(o.addClass("use"),d.addClass("t_use")),--_,++u});for(var n=1;n<=g;n++){var i=$('<a href="#" onclick="return false"></a>').text(n);i.bind("click",function(){var e=$(this).text();S.find("a").removeClass("on"),$(this).addClass("on"),v.find("tr").hide(),v.find("tr[page="+e+"]").show()}),1==n&&i.addClass("on"),S.append(i)}v.find("tr").hide(),v.find("tr[page=1]").show()}}else alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG);else alert(e.d.errorNM)},error:function(){}});break;case"popup_cgv_ticket_list":v=(h=f.find("table")).find("tbody"),S=f.find(".page-box");v.empty(),S.empty(),IS_ENGLISH?v.append("<tr class='placeholder'><td colspan='5'>No registered ticket.</td></tr>"):v.append("<tr class='placeholder'><td colspan='5'>등록된 CGV영화관람권이 없습니다.</td></tr>");_=$.cgv.api.coupon.CouponListNAuthMovieMoney.PARAMS;(_={}).극장코드=$.cgv.data.좌석가확보완료정보.극장코드,_.영화코드=$.cgv.data.좌석가확보완료정보.영화코드,_.상영일자=$.cgv.data.좌석가확보완료정보.상영일자,_.상영관코드=$.cgv.data.좌석가확보완료정보.상영관코드,_.상영회차=$.cgv.data.좌석가확보완료정보.상영회차,_.무비머니번호="",_.무비머니인증번호="",_.좌석등급코드=$.cgv.data.좌석가확보완료정보.예매좌석등급코드,_.주민번호=$.cgv.data.좌석가확보완료정보.고객주민번호,_.아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,_.조회구분="TC",$.cgv.net.loadAPI($.cgv.api.coupon.CouponListNAuthMovieMoney,_,{success:function(e){var t=$.cgv.api.coupon.CouponListNAuthMovieMoney.parseData(e);if(0!=e.d.success&&null!=t)if(null!=t.SMS_RESULT&&"00000"==t.SMS_RESULT.RES_CD){if(null!=t.MOVIE_MONEY){var a=t.MOVIE_MONEY;v.empty();var d=a.length,_=0,u=1;null==d&&(d=1),$(a).each(function(e,t){10<=_&&(_=0,++u);var a=t.MVMUSEBYDATE.substr(0,4)+"."+t.MVMUSEBYDATE.substr(4,2)+"."+t.MVMUSEBYDATE.substr(6,2),n="",i=!1;n="0"==t.MVMSTATE?(i=!0,IS_ENGLISH?"Applicable":"적용가능"):(i=!1,IS_ENGLISH?"Inapplicable":"적용불가");var s=$("<tr></tr>").attr("page",u),o=$('<td class="f_style1"></td>').text(d),c=$("<td></td>").text(t.MVMNAME),p=$('<td class="f_style1"></td>').text(t.MVMNO),r=$('<td class="f_style1"></td>').text("~"+a),l=$("<td></td>").text(n);s.append(o),s.append(c),s.append(p),s.append(r),s.append(l),h.append(s),i&&(s.addClass("use"),l.addClass("t_use")),--d,++_});for(var n=1;n<=u;n++){var i=$('<a href="#" onclick="return false"></a>').text(n);i.bind("click",function(){var e=$(this).text();S.find("a").removeClass("on"),$(this).addClass("on"),v.find("tr").hide(),v.find("tr[page="+e+"]").show()}),1==n&&i.addClass("on"),S.append(i)}v.find("tr").hide(),v.find("tr[page=1]").show()}}else alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG);else alert(e.d.errorNM)},error:function(){}});break;case"popup_primus_ticket_list":v=(h=f.find("table")).find("tbody"),S=f.find(".page-box");v.empty(),S.empty(),IS_ENGLISH?v.append("<tr class='placeholder'><td colspan='5'>No registered ticket.</td></tr>"):v.append("<tr class='placeholder'><td colspan='5'>등록된 프리머스 영화관람권이 없습니다.</td></tr>");_=$.cgv.api.coupon.CouponListNAuthMovieMoney.PARAMS;(_={}).극장코드=$.cgv.data.좌석가확보완료정보.극장코드,_.영화코드=$.cgv.data.좌석가확보완료정보.영화코드,_.상영일자=$.cgv.data.좌석가확보완료정보.상영일자,_.상영관코드=$.cgv.data.좌석가확보완료정보.상영관코드,_.상영회차=$.cgv.data.좌석가확보완료정보.상영회차,_.무비머니번호="",_.무비머니인증번호="",_.좌석등급코드=$.cgv.data.좌석가확보완료정보.예매좌석등급코드,_.주민번호=$.cgv.data.좌석가확보완료정보.고객주민번호,_.아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,_.조회구분="TP",$.cgv.net.loadAPI($.cgv.api.coupon.CouponListNAuthMovieMoney,_,{success:function(e){var t=$.cgv.api.coupon.CouponListNAuthMovieMoney.parseData(e);if(0!=e.d.success&&null!=t)if(null!=t.SMS_RESULT&&"00000"==t.SMS_RESULT.RES_CD){if(null!=t.MOVIE_MONEY){var a=t.MOVIE_MONEY;v.empty();var d=a.length,_=0,u=1;null==d&&(d=1),$(a).each(function(e,t){10<=_&&(_=0,++u);var a=t.MVMUSEBYDATE.substr(0,4)+"."+t.MVMUSEBYDATE.substr(4,2)+"."+t.MVMUSEBYDATE.substr(6,2),n="",i=!1;n="0"==t.MVMSTATE?(i=!0,IS_ENGLISH?"Applicable":"적용가능"):(i=!1,IS_ENGLISH?"Inapplicable":"적용불가");var s=$("<tr></tr>").attr("page",u),o=$('<td class="f_style1"></td>').text(d),c=$("<td></td>").text(t.MVMNAME),p=$('<td class="f_style1"></td>').text(t.MVMNO),r=$('<td class="f_style1"></td>').text("~"+a),l=$("<td></td>").text(n);s.append(o),s.append(c),s.append(p),s.append(r),s.append(l),h.append(s),i&&(s.addClass("use"),l.addClass("t_use")),--d,++_});for(var n=1;n<=u;n++){var i=$('<a href="#" onclick="return false"></a>').text(n);i.bind("click",function(){var e=$(this).text();S.find("a").removeClass("on"),$(this).addClass("on"),v.find("tr").hide(),v.find("tr[page="+e+"]").show()}),1==n&&i.addClass("on"),S.append(i)}v.find("tr").hide(),v.find("tr[page=1]").show()}}else alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG);else alert(e.d.errorNM)},error:function(){}});break;case"popup_cjone_discount_list":var h;v=(h=f.find("table")).find("tbody"),S=f.find(".page-box");v.empty(),S.empty(),IS_ENGLISH?v.append("<tr class='placeholder'><td colspan='5'>No registered coupon.</td></tr>"):v.append("<tr class='placeholder'><td colspan='5'>등록된 CJ ONE 할인쿠폰이 없습니다.</td></tr>");_=$.cgv.api.coupon.CouponListNAuthCJONEDiscount.PARAMS;(_={}).극장코드=$.cgv.data.좌석가확보완료정보.극장코드,_.상영관코드=$.cgv.data.좌석가확보완료정보.상영관코드,_.상영일자=$.cgv.data.좌석가확보완료정보.상영일자,_.상영회차=$.cgv.data.좌석가확보완료정보.상영회차,_.영화코드=$.cgv.data.좌석가확보완료정보.영화코드,_.좌석등급코드=$.cgv.data.좌석가확보완료정보.예매좌석등급코드,_.총결제금액=$.cgv.data.좌석가확보완료정보.총결제금액,_.총예매매수=$.cgv.data.좌석가확보완료정보.예매인원수,_.임시예매번호=$.cgv.data.좌석가확보완료정보.임시예매번호,_.통합포인트회원여부=$.cgv.data.좌석가확보완료정보.CJONE포인트회원여부,_.아이핀번호=$.cgv.data.좌석가확보완료정보.아이핀번호,_.회원번호=$.cgv.data.좌석가확보완료정보.CJONE회원번호,_.조회구분="A",$.cgv.net.loadAPI($.cgv.api.coupon.CouponListNAuthCJONEDiscount,_,{success:function(e){var t=$.cgv.api.coupon.CouponListNAuthCJONEDiscount.parseData(e);if(0!=e.d.success&&null!=t)if(null!=t.SMS_RESULT&&"00000"==t.SMS_RESULT.RES_CD){if(null!=t.CJONE_COUPON){var a=t.CJONE_COUPON;v.empty();var _=a.length,u=0,g=1;null==_&&(_=1),$(a).each(function(e,t){10<=u&&(u=0,++g);var a=t.COUPON_SDT.substr(0,4)+"."+t.COUPON_SDT.substr(4,2)+"."+t.COUPON_SDT.substr(6,2),n=t.COUPON_EDT.substr(0,4)+"."+t.COUPON_EDT.substr(4,2)+"."+t.COUPON_EDT.substr(6,2),i="",s=!1;i="1"==t.USABLE?(s=!0,IS_ENGLISH?"Applicable":"적용가능"):(s=!1,IS_ENGLISH?"Inapplicable":"적용불가");var o=$("<tr></tr>").attr("page",g),c=$('<td class="f_style1"></td>').text(_),p=$("<td></td>").text(t.ONLINE_NM),r=$('<td class="f_style1"></td>').text(t.CJONE_COUPON_NO),l=$('<td class="f_style1"></td>').text(a+"~"+n),d=$("<td></td>").text(i);o.append(c),o.append(p),o.append(r),o.append(l),o.append(d),h.append(o),s&&(o.addClass("use"),d.addClass("t_use")),--_,++u});for(var n=1;n<=g;n++){var i=$('<a href="#" onclick="return false"></a>').text(n);i.bind("click",function(){var e=$(this).text();S.find("a").removeClass("on"),$(this).addClass("on"),v.find("tr").hide(),v.find("tr[page="+e+"]").show()}),1==n&&i.addClass("on"),S.append(i)}v.find("tr").hide(),v.find("tr[page=1]").show()}}else if(null==t.SMS_RESULT)alert(MSG_CMN_SMS_RESULT_ERROR);else{if(t.SMS_RESULT.RES_MSG==MSG3_NO_AVAIABLE_COUPON||"01000"==t.SMS_RESULT.RES_CD)return;alert(t.SMS_RESULT.RES_MSG)}else alert(e.d.errorNM)},error:function(){}});break;case"popup_sms_info":null==$.cgv.data.좌석가확보완료정보.휴대전화번호||0==$.cgv.data.좌석가확보완료정보.휴대전화번호.length?$(".popup_sms_info .bxType06").html(MSG_UNREGISTERED_PHONE):$(".popup_sms_info .bxType06").html($.cgv.data.좌석가확보완료정보.휴대전화번호);var u=f.find(".btn_send"),g=f.find(".btn_change");u.unbind("click").bind("click",function(e){if(null!=$.cgv.data.좌석가확보완료정보.휴대전화번호&&0!=$.cgv.data.좌석가확보완료정보.휴대전화번호.length){var t=$.cgv.data.예매확정정보.극장명.replace(/ /g,"");t=$.cgv.util.stringEllipsisDot(t,8,"..");var a=$.cgv.data.예매확정정보.영화명.replace(/ /g,"");a=$.cgv.util.stringEllipsisDot(a,14,"..");var n=$.cgv.data.예매확정정보.고객예매번호,i=$.cgv.data.예매확정정보.상영일자,s=$.cgv.data.예매확정정보.상영시간,o=o="예매번호\r\n"+n+"\r\n\r\n"+t+"\r\n"+a+"\r\n"+(i.substr(4,2)+"/"+i.substr(6,2)+" "+s.substr(0,2)+":"+s.substr(2,2))+" 총"+$.cgv.data.예매확정정보.예매매수+"명\r\n",c=$.cgv.api.payment.SMSSend.PARAMS;(c={}).EncUserId=$.cgv.data.예매확정정보.고객아이디,c.ReserveNum=$.cgv.data.예매확정정보.예매번호,c.MobileNum=$.cgv.data.좌석가확보완료정보.휴대전화번호,c.ReserveContents=o,$.cgv.net.loadAPI($.cgv.api.payment.SMSSend,c,{success:function(e){$.cgv.api.payment.SMSSend;var t=$.xml2json(unescape(e.d.data.DATA));null!=t&&"0000"==e.d.data.RES_CD?(alert(t.Table1.MSG),ticketPopupHide("popup_sms_info"),++ts4_smssend_count):alert(null==t?MSG_CMN_SMS_RESULT_ERROR:e.d.data.RES_MSG)},error:function(){}})}else alert(MSG_UNREGISTERED_PHONE)}),g.unbind("click").bind("click",function(e){ticketPopupShow("popup_sms_info2",ticketPopupHide("popup_sms_info",!0))});break;case"popup_sms_info2":var b=$("div.popup_sms_info2"),E=b.find("p.txt_type01"),C=b.find("div.bxType06"),M=C.find("label"),m=b.find("a.btn_send");b.css({height:"auto"}),C.css({padding:"10px 0"}),E.css({"text-align":"center","margin-bottom":"10px"}),m.css({width:"auto"}),m.find("span").css({padding:"0 20px"}),IS_ENGLISH?E.text("Please enter the mobile number to send reservation details. (Optional)."):(E.text("고객님의 예매내역이 입력하신 휴대폰번호로 문자 발송됩니다."),M.text("수신번호"));var R=b.find("div.option_agree"),k=b.find("a.btn_cancel");R.remove(),k.remove();var N=$.cgv.data.좌석가확보완료정보.휴대전화번호;N=N.split("-");var y=f.find(".selected-text"),P=f.find("#popup_sms_info2_num1"),U=f.find("#popup_sms_info2_num2");y.text(N[0]),P.val(N[1]),U.val(N[2]);u=f.find(".btn_send");var x=f.find(".btn_cancel"),L=f.find("#step4_phone_modify_agree");f.find(".select-box select").unbind("change").bind("change",function(){f.find(".selected-text").html($(this).val())}),u.unbind("click").bind("click",function(e){var t=f.find(".selected-text").html(),a=f.find("#popup_sms_info2_num1").val(),n=f.find("#popup_sms_info2_num2").val();if(""==$.trim(a))return f.find("#popup_sms_info2_num1").focus().select(),alert(MSG3_WRONG_MOBILE_PHONE_NUM),!1;if(""==$.trim(n))return f.find("#popup_sms_info2_num2").focus().select(),alert(MSG3_WRONG_MOBILE_PHONE_NUM),!1;if(L.is(":checked")){var i=$.trim(t),s=$.trim(a),o=$.trim(n);ticketNeedInfoModifyMobile(i,s,o)}var c=$.trim(t)+$.trim(a)+$.trim(n),p=$.cgv.data.예매확정정보.고객예매번호,r=$.cgv.util.stringEllipsisDot($.cgv.data.예매확정정보.영화명.replace(/ /g,""),11,".."),l=$.cgv.util.stringEllipsisDot($.cgv.data.예매확정정보.극장명.replace(/ /g,""),9,".."),d=$.cgv.util.stringEllipsisDot($.cgv.data.예매확정정보.상영관명.replace(/ /g,""),9,".."),_=resvSeatInfo.get().length,u=$.cgv.data.예매확정정보.상영일자.substr(4,2)+"/"+$.cgv.data.예매확정정보.상영일자.substr(6,2),g=$.cgv.data.예매확정정보.상영시간.substr(0,2)+":"+$.cgv.data.예매확정정보.상영시간.substr(2,2),v=$.cgv.api.payment.SMSSend.PARAMS;(v={}).EncUserId=$.cgv.data.예매확정정보.고객아이디,v.ReserveNum=$.cgv.data.예매확정정보.예매번호,v.MobileNum=c,v.ReserveContents=p+"\r\n"+l+"\r\n"+d+"\r\n"+r+"\r\n"+u+" "+g+" 총"+_+"명",$.cgv.net.loadAPI($.cgv.api.payment.SMSSend,v,{success:function(e){$.cgv.api.payment.SMSSend;var t=$.xml2json(unescape(e.d.data.DATA));null!=t&&"0000"==e.d.data.RES_CD?(alert(t.Table1.MSG),ticketPopupHide("popup_sms_info2"),++ts4_smssend_count):alert(null==t?MSG_CMN_SMS_RESULT_ERROR:e.d.data.RES_MSG)},error:silentLoadErrorListener})}),x.unbind("click").bind("click",function(e){ticketPopupHide("popup_sms_info2")});break;case"popup_hyundaicard_mpoint":f.find(".btn_ok").unbind("click").bind("click",function(e){validateHyundaiMPointForPopup()&&confirmHyundaiMPointForPopup()&&ticketPopupHide("popup_hyundaicard_mpoint")}),initHyundaiMPointForPopup();break;case"popup_cash_receipts":var A=f.find(".btn_publish");$option_jumin=f.find(".form_table .option.jumin"),$option_phone=f.find(".form_table .option.phone"),$option_business=f.find(".form_table .option.business"),A.unbind("click").bind("click",function(e){var t=f.find("#cash_receipts_type select").prop("selectedIndex"),a=f.find("input[type='radio'][name='cash_receipts_publish_type']:checked").closest("label").index(),n=$("#cash_receipts_jumin1"),i=$("#cash_receipts_jumin2"),s=$("#cash_receipts_phone1"),o=$("#cash_receipts_phone2"),c=$("#cash_receipts_phone3"),p=$("#cash_receipts_business1"),r=$("#cash_receipts_business2"),l=$("#cash_receipts_business3");switch(t){case 0:if(0==a){if(n.val().length<6)return alert(MSG3_CHECK_SSN_NUM_1),void n.focus().select();if(i.val().length<7)return alert(MSG3_CHECK_SSN_NUM_2),void i.focus().select()}else if(1==a){if(s.val().length<3)return alert(MSG3_CHECK_MOBILE_PHONE_NUM),void s.focus().select();if(o.val().length<3)return alert(MSG3_CHECK_MOBILE_PHONE_NUM),void o.focus().select();if(c.val().length<4)return alert(MSG3_CHECK_MOBILE_PHONE_NUM),void c.focus().select()}break;case 1:if(2==a){if(p.val().length<3)return alert(MSG3_CHECK_CORPORATE_NUM),void p.focus().select();if(r.val().length<2)return alert(MSG3_CHECK_CORPORATE_NUM),void r.focus().select();if(l.val().length<5)return alert(MSG3_CHECK_CORPORATE_NUM),void l.focus().select()}}var d="",_="";switch(t){case 0:0==a?(d+=n.val(),d+=i.val()):1==a&&(d+=s.val(),d+=o.val(),d+=c.val()),_="01";break;case 1:2==a&&(d+=p.val(),d+=r.val(),d+=l.val()),_="02"}null!=f.data("confirmListener")&&f.data("confirmListener")(_,d),ticketPopupHide("popup_cash_receipts",!1,!0)}),f.find("#cash_receipts_type select").unbind("change",CashReceiptsTypeChangeListener).bind("change",CashReceiptsTypeChangeListener),f.find("input[type='radio'][name='cash_receipts_publish_type']").unbind("change").bind("change",function(){var e=$(this).val();switch($option_jumin.hide(),$option_phone.hide(),$option_business.hide(),f.find("input[type=text]").val(""),f.find("input[type=password]").val(""),e){case"1":$option_jumin.show();break;case"2":$option_phone.show();break;case"3":$option_business.show()}}),f.find("#cash_receipts_type select").prop("selectedIndex",0).trigger("change");break;case"popup_cgv_giftcon_register":l=$("#popup_cgv_giftcon_register_no"),d=f.find(".btn_regist");l.val(""),d.unbind("click").bind("click",function(e){if(0==l.val().length)return alert(MSG3_CHECK_COUPON_NUM),void l.focus();var a=APILoader.init();a.URL="/CJ003.aspx/CJ_070",a.PARAMS["구분자"]="G",a.PARAMS["아이핀번호"]=$.cgv.data.좌석가확보완료정보.아이핀번호,a.PARAMS["무비머니번호"]=l.val(),a.PARAMS["무비머니인증번호"]="",$.cgv.net.loadAPI(a,a.PARAMS,{success:function(e){var t=a.parseData(e).SMS_RESULT;"00000"==t.RES_CD?(alert(MSG_COUPON_REGISTER_SUCCESS),ticketPopupHide("popup_cgv_giftcon_register"),initCGVGiftcon()):alert(t.RES_MSG)},error:function(){}})});break;case"popup_cgv_giftcon_list":var T=f.find("tbody"),I=f.find(".page-box");function G(e){var t=10*(void 0===e?1:e),a=t-10+1,n=$.cgv.data.좌석가확보완료정보,i=APILoader.init();i.URL="/CJ003.aspx/CJ_021_REG_SRCH_SMS",i.PARAMS["임시예매번호"]=n["임시예매번호"],i.PARAMS["극장코드"]=n["극장코드"],i.PARAMS["상영관코드"]=n["상영관코드"],i.PARAMS["상영일자"]=n["상영일자"],i.PARAMS["상영회차"]=n["상영회차"],i.PARAMS["영화코드"]=n["영화코드"],i.PARAMS["아이핀번호"]=n["아이핀번호"],i.PARAMS["페이징여부"]="Y",i.PARAMS["구분자"]="T",i.PARAMS["기프트콘구분"]="2",i.PARAMS["조회구분"]="0",i.PARAMS["조회시작번호"]=a,i.PARAMS["조회끝번호"]=t,i.PARAMS["시작일"]="",i.PARAMS["종료일"]="",$.cgv.net.loadAPI(i,i.PARAMS,{error:silentLoadErrorListener,success:function(e){var t=i.parseData(e);if(0===parseInt(t.SMS_RESULT.RES_CD.replace(/[^0~9]/g,""),10)){var a=0,n=parseInt(t.CGV_GIFT_CON_MST.TOTAL_CNT,10);0<n&&(a=Math.ceil(n/10)),function(e){if(I.empty().hide(),2<=e){20<e&&(e=20);for(var t=1;t<e+1;++t){var a=$('<a href="#" onclick="return false"></a>');a.text(t).data("index",t),a.on("click",function(){G($(this).data("index")),$(this).parent().find("a").removeClass("on"),$(this).addClass("on")}),I.append(a)}I.show()}}(a),listItemNum=parseInt(t.CGV_GIFT_CON_MST.PAGE_CNT,10),0<listItemNum&&function(e){T.empty();for(var t=0;t<e.length;++t){var a=e[t],n=a.EXPIRY_DATE.substr(0,4)+"."+a.EXPIRY_DATE.substr(4,2)+"."+a.EXPIRY_DATE.substr(6,2),i=$('<tr class="row">\t<td class="f_style1">'+(t+1)+'</td>\t<td class="pad">'+a.GIFT_CON_NO+'</td>\t<td class="f_style1">~'+n+'</td>\t<td calss="status">'+("Y"===a.USEABLE_YN?IS_ENGLISH?"Applicable":"적용가능":IS_ENGLISH?"Inapplicable":"적용불가")+"</td></tr>");"Y"===a.USEABLE_YN&&i.add("use").find(".status").addClass("t_use"),T.append(i)}}($.isArray(t.CGV_GIFT_CON)?t.CGV_GIFT_CON:[t.CGV_GIFT_CON])}else"000010"!=t.SMS_RESULT.RES_CD&&alert(null==t.SMS_RESULT?MSG_CMN_SMS_RESULT_ERROR:t.SMS_RESULT.RES_MSG)}})};I.empty(),T.empty().html('<tr class="placeholder"><td colspan="5">'+(IS_ENGLISH?"No registered CGV giftcon.":"등록된 CGV기프트콘이 없습니다.")+"</td></tr>"),G();break;case"popup_login":var O={wrapper:"",header:'<div class="hd"><div class="title_area"><h4>{{headerTitle}}</h4><span class="sreader">{{sreader}}</span></div><a href="#" class="layer_close">{{loginClose}}</a></div>{{addTabNav}}',body:{member:'<div class="bd"><div class="login_form"><div class="input_wrap id"><label for="txtUserId" class="blind">{{txtUserId}}</label><input name="txtUserId" id="txtUserId" maxlength="25"></div><div class="input_wrap password"><label for="txtPassword" class="blind">{{txtPassword}}</label><input name="txtPassword" id="txtPassword" maxlength="25" type="password"></div><button type="button" title="Login" class="btn_login"><span>{{btnLogin}}</span></button></div>{{addLinkBar}}</div>',nonMember:'<div class="bd2"><div class="login_form"><table class="non_member_form_table"><tr><td class="col_right"><label for="txtUserName">Name</label></td><td><input name="txtUserName" id="txtUserName" maxlength="25" type="text" class="input_name s1" placeholder="Full name"></td></tr><tr><td class="col_right"><label for="selUserPhone">Cellphone No. </label></td><td><div class="select_phone_wrap"><select name="" id="selUserPhone" class="select_phone"><option value="010" selected>010</option><option value="011">011</option><option value="016">016</option><option value="017">017</option><option value="018">018</option><option value="019">019</option></select></div><div class="select_phone_over"><span>010</span></div><input type="text" class="input_phone s2" maxlength="4" id="phone1" num="true"><input type="text" class="input_phone s2" maxlength="4" id="phone2" num="true"></td></tr><tr><td class="col_right"><label for="txtUserBirth">Date of Birth </label></td><td><input type="text" id="txtUserBirth" class="input_birth s2" placeholder="DD" maxlength="2" minlength="2" num="true"><input type="text" class="input_birth s2" placeholder="MM" maxlength="2" minlength="2" id="txtUserMonth" num="true"><input type="text" class="input_birth s2" placeholder="YYYY" maxlength="4" minlength="4" id="txtUserYear" num="true"></td></tr><tr><td class="col_right"><label for="txtUserPw">Password</label></td><td><input type="password" class="input_pw s1" id="txtUserPw" minlength="4" maxlength="4" num="true"></td></tr><tr><td class="col_right"><label for="txtUserPw2">Re-enter password </label></td><td><input type="password" class="input_pw s1" id="txtUserPw2" minlength="4" maxlength="4" num="true"></td></tr></table><hr><div class="agree"><input type="checkbox" id="chk_agree" class="chk_agree"><label for="chk_agree" class="txt_agree">I agree to the collection and use of personal information.</label> </div><div class="policy"><a href="privacyplicy.html" target="_blank" class="btn_policy" title="new window open">View Privacy Policy</a></div><button type="button" title="SignIn" class="btn_signin"><span>Sign in</span></button></div></div>'},footer:"",linkBar:'<div class="linkbar"><a href="#" class="join_member">회원가입</a><a href="#" class="join_guest">비회원 예매</a><a href="#" class="id_find">아이디찾기</a><a href="#" class="pw_find">비밀번호찾기</a></div>',tabNav:'<div class="tab_nav"><a href="#" class="tab_nav_txt1 {{memberSelected}}">Member</a> | <a href="#" class="tab_nav_txt2 {{nonMemberSelected}}">Non-Member</a></div>'},w="member",D={kor:{headerTitle:"CGV회원 로그인",sreader:"빠른예매는 레이어로 서비스 되기 때문에 가상커서를 해지(Ctrl+Shift+F12)한 후 사용합니다.",loginClose:"닫기",txtUserId:"아이디",txtPassword:"비밀번호",btnLogin:"로그인",addTabNav:"",addLinkBar:O.linkBar},en:{headerTitle:"CGV member Sign in",sreader:"Close a imaginary cursor(Ctrl+Shift+F12) because reservation service is based on layers.",loginClose:"close",txtUserId:"ID",txtPassword:"Password",btnLogin:"Sign in",addTabNav:O.tabNav,addLinkBar:""}},H="";function V(){var n=O.wrapper+O.header+("member"===w?O.body.member:O.body.nonMember)+O.footer,i="";if($.each(H,function(e,t){var a=new RegExp("{{"+e+"}}","g");i=""==i?n.replace(a,t):i.replace(a,t)}),IS_ENGLISH){var e=new RegExp("{{memberSelected}}","g"),t=new RegExp("{{nonMemberSelected}}","g");i="member"===w?i.replace(e,"selected").replace(t,""):i.replace(e,"").replace(t,"selected")}f.html(i),IS_ENGLISH?f.addClass("english"):f.removeClass("english"),function(_,e){var t=_.find(".btn_login"),a=_.find(".join_member"),n=_.find(".join_guest"),i=_.find(".id_find"),s=_.find(".pw_find"),o=_.find(".tab_nav"),c=o.find(".tab_nav_txt1"),p=o.find(".tab_nav_txt2"),r=_.find(".layer_close"),l=_.find(".btn_policy"),u=_.find(".select_phone_wrap select");_.find(".btn_signin").click(function(e){e.preventDefault();var t,a,i,s,o,n="",c="",p="",r={},l="",d="";a={txtUserName:(t=_).find("#txtUserName"),phone1:t.find("#phone1"),phone2:t.find("#phone2"),txtUserBirth:t.find("#txtUserBirth"),txtUserMonth:t.find("#txtUserMonth"),txtUserYear:t.find("#txtUserYear"),txtUserPw:t.find("#txtUserPw"),txtUserPw2:t.find("#txtUserPw2"),chkAgree:t.find("#chk_agree")},i={txtUserName:"Enter name.",phone1:"Enter phone number.",phone2:"Enter phone number.",txtUserBirth:"Enter day.",txtUserMonth:"Enter month.",txtUserYear:"Enter year.",txtUserPw:"Enter password.",txtUserPw2:"Enter password.",chkAgree:"You must agree to the terms and conditions.",number:"You can contain only the digits.",pw:"Passwords do not match."},s={num:new RegExp("^[0-9]+$")},o=!0,$.each(a,function(e,t){if("chkAgree"!==e){if(""===t.val()||t.val()===t.attr("placeholder"))return o=!1,K({target:t,message:i[e]}),!1;if(t.attr("num")&&!s.num.test(t.val()))return o=!1,K({target:t,message:i.number}),!1;if(t.attr("num")&&t.attr("minlength")){var a=t.attr("minlength"),n=t.val();if(s.num[a]||(s.num[a]=new RegExp("^[0-9]{"+a+"}$")),!(o=s.num[a].test(n)))return K({target:t,message:"Key in"+a+"-digit number."}),!1}}else if(!t.is(":checked"))return o=!1,K({target:t,message:i[e]}),!1}),o&&a.txtUserPw.val()!==a.txtUserPw2.val()&&(o=!1,K({target:a.txtUserPw,message:i.pw})),o&&(n=_.find("#txtUserName").val(),d=_.find("#txtUserYear").val()+_.find("#txtUserMonth").val()+_.find("#txtUserBirth").val(),p=u.find(":selected").val()+_.find("#phone1").val()+_.find("#phone2").val(),pw=_.find("#txtUserPw").val(),c=8==d.length?d.substr(2):d,r={gUserName:encriptURLEncode(encriptData(n)),gUserID:"Cgv-Guest-332211",gSSN:encriptURLEncode(encriptData(c)),Phone_HRIA:encriptURLEncode(encriptData(pw)),Mobile_HRIA:encriptURLEncode(encriptData(p)),gFullbirthday:encriptURLEncode(encriptData(d))},$.each(r,function(e,t){l+=e+"="+t+"&"}),l=l.replace(/\&$/,""),$.cookie.raw=!0,$.cookie("cgv.cookie.Guest",l,{expires:1,path:"/",domain:"cgv.co.kr"}),ticketPopupHide("popup_login"),location.reload())}),"placeholder"in document.createElement("input")||_.find(":input[placeholder]").each(function(e){$(this).val($(this).attr("placeholder")).focus(function(e){var t=$(this),a=t.attr("placeholder"),n=t.val();""==n||n==a?t.val("").data("placeholder",a).removeClass("placeholder"):t.removeClass("placeholder")}).blur(function(e){var t=$(this),a=t.data("placeholder"),n=t.val();""!=n&&n!=a||t.val(a).addClass("placeholder")})});u.change(function(e){var t=$(":selected",this).val();$(this).parent().next().find("span").empty().text(t)}),l.click(function(e){e.preventDefault();var t=window.open("privacypolicy.html","privacypolicy","width=500, height=650, toolbar=no, location=no, status=no, scrollbars=yes");$(t).focus()}),r.click(function(e){e.preventDefault(),ticketPopupHide("popup_login")}),t.click(function(e){e.preventDefault();var t=_.find("#txtUserId"),a=_.find("#txtPassword");return 0==t.val().length?(alert(MSG3_CHECK_USER_ID),void t.focus().select()):0==a.val().length?(alert(MSG3_CHECK_USER_PASSWORD),void a.focus().select()):void ticketLogin(t.val(),a.val())}),c.click(function(e){e.preventDefault(),w="member",V()}),p.click(function(e){e.preventDefault(),w="nonMember",V()}),a.click(function(e){e.preventDefault(),ticketNeedLocationHref("/user/join/")}),n.click(function(e){e.preventDefault(),ticketSaveQuickdata(),ticketNeedLocationHref("/user/guest/login-agreement.aspx")}),i.click(function(e){e.preventDefault(),ticketNeedLocationHref("/user/login/find-account.aspx")}),s.click(function(e){e.preventDefault(),ticketNeedLocationHref("/user/login/find-account.aspx?act=pw")})}(f,IS_ENGLISH)};function K(e){var t=e.target,a=e.message;alert(a),t.focus()};H=IS_ENGLISH?D.en:D.kor,V();break;case"popup_guide":f.find(".guide_bd .tab_menu ul li.a a").unbind("click").bind("click",function(e){$(".guide_step01").show(),$(".guide_step02").hide(),$(".guide_step03").hide(),$(this).parent().parent().find("li a").removeClass("on"),$(this).addClass("on")}).trigger("click"),f.find(".guide_bd .tab_menu ul li.b a").unbind("click").bind("click",function(e){$(".guide_step01").hide(),$(".guide_step02").show(),$(".guide_step03").hide(),$(this).parent().parent().find("li a").removeClass("on"),$(this).addClass("on")}),f.find(".guide_bd .tab_menu ul li.c a").unbind("click").bind("click",function(e){$(".guide_step01").hide(),$(".guide_step02").hide(),$(".guide_step03").show(),$(this).parent().parent().find("li a").removeClass("on"),$(this).addClass("on")}),f.find(".btnVisInfo").each(function(e){var t=$(this),a=t.parent().find(".infoBx");t.on("mouseenter focusin",function(){a.show(),t.parent().addClass("on")}),t.on("mouseleave focusout",function(){a.hide(),t.parent().removeClass("on")})});break;case"popup_samsungcard_paybacksave":f.find(".btn_print").unbind("click").bind("click",function(e){ticketNewWindow("http://section.cgv.co.kr/popup/samsungClauses.html")}),f.find("input[name=popup_samsungcard_paybacksave_agree_radio][value=0]").prop("checked",!0),f.find("#popup_samsungcard_paybacksave_save_agree").prop("checked",!1),f.find(".btn_ok").unbind("click").bind("click",function(e){return f.find("input[name=popup_samsungcard_paybacksave_agree_radio][value=0]").is(":checked")?(alert(MSG3_CHECK_COMPLY_CLAUSE),void f.find("input[name=popup_samsungcard_paybacksave_agree_radio][value=1]").focus()):0==$("#popup_samsungcard_paybacksave_save_agree").is(":checked")?(alert(MSG3_CHECK_COMPLY_CHARGE),void $("#popup_samsungcard_paybacksave_save_agree").focus()):(null!=f.data("confirmListener")&&f.data("confirmListener")(),void ticketPopupHide("popup_samsungcard_paybacksave",!1,!0))});var Y="";Y=IS_ENGLISH?"http://section.cgv.co.kr/popup/samsungClauses_en.txt":"http://section.cgv.co.kr/popup/samsungClauses.txt",loadCrossDomainURL(Y,function(e){e=e.replace(/\n/g,"<br/>"),f.find(".agree_text .content").html(e),updateNanoScroller(f.find(".nano"))});break;case"popup_cinedechef":f.find("a").unbind("click").bind("click",function(e){ticketPopupHide("popup_cinedechef")});break;case"popup_reservation_delay":f.find(".btn_delay").unbind("click").bind("click",function(e){var t=$.cgv.api.ticket.PrereservateSeatsDelay.PARAMS;(t={}).임시예매번호=$.cgv.data.좌석가확보완료정보.임시예매번호,$.cgv.net.loadAPI($.cgv.api.ticket.PrereservateSeatsDelay,t,{success:function(e){var t=$.cgv.api.ticket.PrereservateSeatsDelay.parseData(e).SMS_RESULT;console.log("SMS_RESULT : ",t),null!=t&&"00000"==t.RES_CD?(a(),ticketPopupHide("popup_reservation_delay",!1,!0)):alert(null==t?MSG_CMN_SMS_RESULT_ERROR:t.RES_MSG)},error:function(){}})})}f.data("target",null),null!=e&&(e instanceof jQuery?f.data("target",e):f.data("target",$(e))),popupSetPosition(f),CMN_OSBR.ie&&(f.find("input[type='text']").unbind("keypress",ticketPopupDisbleEnterKey).bind("keypress",ticketPopupDisbleEnterKey),f.find("input[type='password']").unbind("keypress",ticketPopupDisbleEnterKey).bind("keypress",ticketPopupDisbleEnterKey))}}function ticketPopupHide(e,t,a){var n=$("."+e);return n.hide(),$(".blackscreen").hide(),null!=n.data("closeListener")&&1!=a&&n.data("closeListener")(),null!=n.data("target")&&1!=t?(n.data("target").is(":focusable")?n.data("target").focus():n.data("target").find(":focusable").eq(0).focus(),n.data("target")):null}function ticketPopupHideAll(){$(".ft_layer_popup").hide(),0==$(".ft_layer_popup:visible").size()&&$(".blackscreen").hide()}function ticketPopupDisbleEnterKey(e){13==e.keyCode&&e.preventDefault()}function ticketGetLoginSecurityLevel(){return $(".ft_layer_popup.popup_login .control_security .btn.on").data("security-level")}function ticketPopupToolbarToggle(){if(0<$(".test_popup_btns").size())$(".test_popup_btns").remove();else{var e=$("<div class='test_popup_btns'></div>").css({position:"fixed",top:"0",left:"0",overflow:"hidden","z-index":"999999"});$(document.body).append(e),$(["popup_cgv_discount_payment_info","popup_login","popup_reservation_check","popup_reservation_delay","popup_olleh_internet_coupon_register","popup_moviecollage_passcard_register","popup_hyundaicard_mpoint","popup_cgv_ticket_register","popup_okcashbag","popup_samsung_upoint","popup_primus_ticket_register","popup_shinsegae_vip_coupon_register","popup_cgv_giftcon_register","popup_cgv_discount_coupon_register","popup_primus_ticket_list","popup_moviecollage_passcard_list","popup_shinsegae_vip_coupon_list","popup_olleh_internet_coupon_list","popup_cgv_giftcon_list","popup_cjone_discount_list","popup_cgv_ticket_list","popup_cgv_discount_coupon_list","popup_sms_info","popup_sms_info2","popup_ticket_msg","popup_alert","popup_cash_receipts","popup_guide","popup_samsungcard_paybacksave","popup_cinedechef"]).each(function(){var t=$("<a></a>").text(this).attr("id","btn_"+this).css({clear:"both",float:"left",padding:"2px 2px",border:"solid 1px #666",color:"#fff","font-size":"9px","font-family":"Verdana","background-color":"#000",cursor:"pointer"});t.bind("click",function(e){ticketPopupShow(t.text(),$(this))}),e.append(t)}),$("#btn_popup_hyundaicard_mpoint").css("background-color","lightgreen"),$("#btn_popup_olleh_internet_coupon_list").css("background-color","lightgreen"),$("#btn_popup_shinsegae_vip_coupon_list").css("background-color","lightgreen"),$("#btn_popup_primus_ticket_register").css("background-color","lightgreen"),$("#btn_popup_moviecollage_passcard_list").css("background-color","lightgreen"),$("#btn_popup_moviecollage_passcard_register").css("background-color","lightgreen"),$("#btn_popup_olleh_internet_coupon_register").css("background-color","lightgreen"),$("#btn_popup_shinsegae_vip_coupon_register").css("background-color","lightgreen"),$("#btn_popup_cgv_ticket_register").css("background-color","lightgreen"),$("#btn_popup_cgv_discount_payment_info").css("background-color","lightgreen"),$("#btn_popup_reservation_check").css("background-color","lightgreen"),$("#btn_popup_okcashbag").css("background-color","lightgreen"),$("#btn_popup_samsung_upoint").css("background-color","lightgreen"),$("#btn_popup_cgv_discount_coupon_register").css("background-color","lightgreen"),$("#btn_popup_cgv_discount_coupon_list").css("background-color","lightgreen"),$("#btn_popup_cgv_ticket_list").css("background-color","lightgreen"),$("#btn_popup_primus_ticket_list").css("background-color","lightgreen"),$("#btn_popup_cjone_discount_list").css("background-color","lightgreen")}}function CashReceiptsTypeChangeListener(){var e=$(".popup_cash_receipts");switch(e.find("#cash_receipts_type select").prop("selectedIndex")){case 0:e.find("input.cash_receipts_publish_type1").closest("label").show(),e.find("input.cash_receipts_publish_type2").closest("label").show(),e.find("input.cash_receipts_publish_type3").closest("label").hide(),e.find("input[type='radio'][name='cash_receipts_publish_type']").eq(0).prop("checked",!0).trigger("change");break;case 1:e.find("input.cash_receipts_publish_type1").closest("label").hide(),e.find("input.cash_receipts_publish_type2").closest("label").hide(),e.find("input.cash_receipts_publish_type3").closest("label").show(),e.find("input[type='radio'][name='cash_receipts_publish_type']").eq(2).prop("checked",!0).trigger("change")}$("#cash_receipts_type .selected-text").text($("#cash_receipts_type select option:selected").text())}function step3popErrorListener(){}function ticketNoticeCctv(t){ticketAlert(MSG2_CINEMA_NOTI_T,'<div style="font-size:14px; line-height: 1.5em; letter-spacing: -0.01rem; text-align: center;"><p style="background:url(http://img.cgv.co.kr/CGV_RIA/Ticket/image/reservation/step2/ico_camera.png) 50% 0% no-repeat; padding-top: 85px; font-weight:bold; text-align:center;"><키즈 세이프 타임> 영화는 아동보호 및 사고·범죄 방지의 목적으로 상영관내부를 CCTV 촬영을 하고 있습니다.</p><div style="margin: 10px 0; padding: 20px 15px; background: #eaeaea; padding-bottom: 22px 15px;">\t<p style="font-weight:bold;">해당 CCTV촬영 영상은 로비에 설치된 모니터와 어플리케이션을 통해 실시간으로 송출되며, 송출되는 CCTV촬영 영상을 제3자가 볼 수 있습니다.</p><hr style="border-top: .5px solid #ccc; border-bottom: none; margin: 15px 0;"/><p style="text-align: left; font-size: 13px;"><em style="color: #555;">1. 개인정보를 제공 받는자 : </em>어플리케이션의 경우 영화예자 및 보호자.<br/>로비에 설치된 모니터의 경우, 영화예매자 및 제 3자<br/><em style="color: #555;">2. 개인정보의 이용목적 : </em>상영관 내 아동보호 및 사고 · 범죄방지<br/><em style="color: #555;">3. 이용 또는 제공하는 개인정보 항목 : </em>상영 10분전부터 상영시간 종료시까지 상영관 내부 CCTV 실시간 촬영 영상<br/><em style="color: #555;">4. 개인정보의 이용·제공기간 : </em>상영 10분 전부터 상영시간 종료시까지<br/><br/>· 해당 CCTV영상은 촬영일로부터 최대 30일 보관되며, 보관기간 만료시, 복원이 불가능한 방법으로 영구 삭제합니다.<br/>· 구체적인 개인정보 관련 사안은 &lsquo;CGV개인정보처리방침&rsquo; 에 따릅니다.<br/>· 위 기재된 목적 외에는 CCTV 영상을 이용·제공하지 않습니다.<br/>· 위 내용에 대해 정보주체는 동의를 거부할 권리가 있으며, 위 내용에 대해 미확인·미동의 시 영화 예매가 불가능합니다.</p></div><em><input id="chkKidsSafe" type="checkbox"/><label for="chkKidsSafe"><키즈 세이프 타임> CCTV 촬영에 동의합니다.</label></em></div>',"cctv",function(){console.log("close;")},function(e){$("#chkKidsSafe").prop("checked")?(t(),e()):alert("CCTV촬영 약관에 동의하셔야 예매 가능합니다.")})}function popupSetPosition(e){$(document.body).append(e),$(".blackscreen").show();var t=IFRAME_WINDOW_HEIGHT||$(window).height(),a=parseInt(e.height(),10),n=parseInt(t/2,10)-parseInt(a/2,10);if(_ticketCurrentStep<3)return e.css({top:n-110+"px",position:"absolute"}).show().focus(),!1;e.css({top:n+"px",position:"absolute"}).show().focus(),ticketNeedScrollTo(n,!0,300)}