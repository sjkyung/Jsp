var usePerformanceAnalyzer=!1;function timeStamp(e){if(usePerformanceAnalyzer){var t="[Analyze] "+e;console&&(console.timeStamp&&console.timeStamp(t),console.log&&console.log(t))}}function timeStampStart(e){usePerformanceAnalyzer&&console&&console.time&&console.time("[Analyze] "+e)}function timeStampEnd(e){usePerformanceAnalyzer&&console&&console.timeEnd&&console.timeEnd("[Analyze] "+e)}usePerformanceAnalyzer&&(CMN_OSBR.ie7||CMN_OSBR.ie8)&&(console.time=function(e,t){if(e){var a=(new Date).getTime();console.timeCounters||(console.timeCounters={});var n="KEY"+e.toString();!t&&console.timeCounters[n]||(console.timeCounters[n]=a)}},console.timeEnd=function(e){var t=(new Date).getTime();if(console.timeCounters){var a,n="KEY"+e.toString(),i=console.timeCounters[n];if(i){var o=e+": "+(a=t-i)+"ms";console.info&&console.info(o),delete console.timeCounters[n]}return a}}),timeStamp("reservation.js started"),timeStampStart("첫 진입시 스크립트로 측정가능한 최대 시간");var MAX_RESERVATION_COUNT="",DISTANCE_CLS="",IS_ENGLISH=!1,isStep3ResourcesLoaded=!1,SERVER_IP="",useTimeout=CMN_OSBR.ie7;document.domain="cgv.co.kr";var TICKET_STEP={NONE:0,STEP_1:1,STEP_2:2,STEP_3:3,STEP_4:4},_ticketCurrentStep=TICKET_STEP.NONE,DAYOFWEEK=["일","월","화","수","목","금","토"],DAYOFWEEK_EN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],AREAGROUP_NAMES=["서울","경기","인천","강원","대전/충청","대구","부산/울산","경상","광주/전라/제주"],AREAGROUP_NAMES_EN=["Seoul","Gyeonggi","Incheon","kangwon","Chungcheong","Daegu","Busan/Ulsan","Gyeongsang","Jeonlla/Jeju"],AREAGROUP_CODES=[["13"],["09"],["06"],["07"],["15","04","05"],["14"],["12","16"],["10","11"],["08","02","03","01"]],SPECIALTHEATERGROUP_NAMES=["4DX","IMAX","STARIUM","CINE DE CHEF","GOLD CLASS","Brand관","Premium관","CINE KIDS"],SPECIALTHEATERGROUP_NAMES_EN=["4DX","IMAX","STARIUM","CINE DE CHEF","GOLD CLASS","Brand","Premium","CINE KIDS"],SPECIALTHEATERGROUP_CODES=["11","02","05","09","04","08","15","06"],selectNumData={millitary:0,adult:0,youth:0,child:0,senior:0,special:0,total:function(){return this.millitary+this.adult+this.youth+this.child+this.senior+this.special}},screen_YMD="",senior_YMD=20210420;window.onload=function(){ticketNeedResize(),ticketNeedScrollUpdate()};var parentBody=$(window.parent.document.body),thisBody=parentBody.find("#ticket_iframe");function ticketInit(){$.cgv.config.LANGUAGE=IS_ENGLISH?"eng":"kor",$.cgv.net.setLoadingSelector("#ticket_loading"),ticketUpdateInitParams(),ticketStepShow(TICKET_STEP.STEP_1),tnbInit();var t=null;if(IS_ENGLISH){var e=$("#ticket.english .navi"),a=e.find(".newsletter > p > a"),n=e.find(".button-confirm-cancel");a.on("click",function(e){e.preventDefault(),t||(t=new Newsletter),$(this).hasClass("open")?($(this).removeClass("open"),t.cancel()):($(this).addClass("open"),t.init(this))}),a.parents("div.newsletter").append(n),n.css({display:"block",width:"120px",height:"30px","text-indent":"-9999px",background:'url("http://img.cgv.co.kr/CGV_RIA/Ticket/image/reservation/step1/ticket_bookingHistory.jpg")',"margin-top":"-5px"}).on("click",function(e){e.preventDefault(),confirmCancelTicketResult()})}}function confirmCancelTicketResult(){if(0!=$.cgv.data.고객정보.로그인여부){if(IS_ENGLISH){var e=(window.outerWidth-800)/2,t=(window.outerHeight-600)/2,a=null,n=$.cgv.data.고객정보;if(reservation_info_pl=$.cgv.data.좌석가확보완료정보,n.비회원여부){var i=decriptData(n.사용자핸드폰번호);a="http://www.cgv.co.kr/user/guest/reserve-eng.aspx?mobile="+encriptURLEncode(encriptData(i=i.replace("-","")))+"&userName="+encriptURLEncode(encriptData(decriptData(n.사용자명)))+"&ssn="+encriptURLEncode(encriptData(decriptData(n.사용자주민번호)))+"&password="+encriptURLEncode(encriptData(decriptData(n.사용자유선전화번호)))}else a="http://www.cgv.co.kr/user/mycgv/reserve-eng/default.aspx?ipin_ci="+encriptURLEncode(n.사용자IPIN);window.open(a,"Window","width=800, height=600,top="+t+", left="+e+", status=yes, scrollbars=yes ,resizable=no, menubar=no")}else $.cgv.data.고객정보.비회원여부?ticketNeedLocationHref("/user/guest/reserve.aspx"):ticketNeedLocationHref("/user/mycgv/reserve/#contaniner");logClick("예매확인/취소")}else alert(MSG_CMN_LOGIN)}function decriptData(e){return $.cgv.data["통신"]["복호화"](e)}function encriptData(e){return $.cgv.data["통신"]["암호화"](e)}function encriptURLEncode(e){return e,$.cgv.data.통신.UrlEncode(e)}function Newsletter(){var t=null;return _newsletter=null,_popNewsletter=null,_btnCancel=null,_btnRegister=null,_regExp={email:null},_template='<div class="pop_newsletter">   <div class="register_form">       <table class="regiter_form_table">           <colgroup>               <col class="col1"></col>               <col class="col2"></col>           </colgroup>       <tr><td><label for="newslettername">Full name</label></td><td><input type="text" id="newslettername" title="Full Name" require="true"></td></tr>       <tr><td><label for="newsletteremail">E-mail</label></td><td><input type="text" id="newsletteremail" title="E-mail" email="true" require="true"></td></tr>       </table>       <div class="agree">           <input type="checkbox" id="chk_agree" class="chk_agree" checkbox="checked">           <label for="chk_agree" class="txt_agree">I agree to the collection and use of personal information.</label>        </div>       <div class="policy"><a href="privacyplicy.html" target="_blank" class="btn_policy">View Privacy Policy</a></div>       <div class="btn_grp">          <button class="btn_cancle"><img src="http://img.cgv.co.kr/CGV_RIA/Ticket/image/reservation/popup/pop_newsletter_btn_cancle.png" alt="cancel" width="114" height="30"></button>          <button class="btn_register"><img src="http://img.cgv.co.kr/CGV_RIA/Ticket/image/reservation/popup/pop_newsletter_btn_register.png" alt="register" width="114" height="30"></button>      </div>    </div></div>',{init:function(e){t=t||$(e),_newsletter=_newsletter||t.closest("div"),_popNewsletter?this.reset().show():this.render()},reset:function(){return _popNewsletter.find("input").each(function(){$(this).val(""),$(this).is(":checkbox")&&$(this).prop("checked",!1)}),_popNewsletter},render:function(){var t=this;_newsletter.append(_template),_popNewsletter=_newsletter.find(".pop_newsletter"),_btnCancel=_popNewsletter.find(".btn_cancle"),_btnRegister=_popNewsletter.find(".btn_register"),_btnCancel.click(function(e){e.preventDefault(),t.cancel()}),_btnRegister.click(function(e){e.preventDefault(),t.register()}),_popNewsletter.find(".policy a").click(function(e){e.preventDefault();var t=window.open("privacypolicy.html","privacypolicy","width=500, height=650, toolbar=no, location=no, status=no, scrollbars=yes");$(t).focus()})},cancel:function(){_popNewsletter&&_popNewsletter.hide(),t.removeClass("open")},register:function(){var t=this,e="";t.validator()&&(username=$.cgv.data["통신"]["암호화"](_popNewsletter.find("#newslettername").val()),e=$.cgv.data["통신"]["암호화"](_popNewsletter.find("#newsletteremail").val()),loadCrossDomainURL("http://section.cgv.co.kr/ajax/ticket/NonmemberRevEn.aspx?firstname="+username+"&secondname="+username+"&email="+e,function(e){-1!=decodeURIComponent(e).indexOf("00000")?alert("Successfully registered."):alert("Unstable connection to server. Try again."),t.cancel()}))},validator:function(){var t=null,a=!0;return $el=_popNewsletter.find("input"),$el.each(function(){var e=$(this);return e.attr("require")&&""===e.val()?(alert("Enter "+e.attr("title")+"."),e.focus(),a=!1):e.attr("email")&&(_regExp.email=t=_regExp.email?_regExp.email:new RegExp("^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$"),!t.test(e.val()))?(alert("Please check your e-mail."),e.focus(),a=!1):e.attr("checkbox")&&!e.is(":checked")?(alert("You must agree to the terms and conditions."),e.focus(),a=!1):void 0}),a}}}function preselectSetting(e,t,a,n,i,o,r,c,s){if(""!=e+t+a+n+i+o+r+c+s){var l=n+"|"+i.toUpperCase()+"|"+t+"|"+a+"|"+o+"|"+c+"|"+s+"||||";$.cookie("quickdata",l,{expires:1,path:"/",domain:".cgv.co.kr"})}}function ticketUpdateInitParams(){var e=$.cookie("cgv.cookie"),t=$.cookie("cgv.cookie.Guest"),a=$.cgv.data.고객정보,n={};if(null!=e){for(var i=e.split("&"),o=0;o<i.length;o++)if(-1!=i[o].indexOf("=")){var r=i[o].substr(0,i[o].indexOf("=")),c=i[o].substr(i[o].indexOf("=")+1,i[o].length);n[r]=c}if(n.EMAIL_JS=n.EMail_HRIA?n.EMail_HRIA:"",n.IPIN_CI_JS=n.IPIN_CI_HRIA?n.IPIN_CI_HRIA:"",n.PHONE_JS=n.PHONE_HRIA?n.PHONE_HRIA:"",n.MOBILE_JS=n.MOBILE_HRIA?n.MOBILE_HRIA:"",n.USERNAME_JS=n.UserName_HRIA?n.UserName_HRIA:"",n.PAYMETHOD_JS=n.PAYMETHOD_HRIA?n.PAYMETHOD_HRIA:"",n.Lct_BirthDate_HRIA=n.Lct_BirthDate_HRIA?n.Lct_BirthDate_HRIA:"",a["로그인여부"]=!0,a["지역코드"]="",a["근처극장코드"]="",a["군인여부"]=n.IS_SOLDIER_YN_HRIA?n.IS_SOLDIER_YN_HRIA:"",a["성인여부"]=n.IsAduit_HRIA?n.IsAduit_HRIA:"",a["사용자명"]=n.USERNAME_JS?n.USERNAME_JS:"",a["사용자아이디"]=n.UserId_HRIA?n.UserId_HRIA:"",a["사용자나이"]=n.Lct_BirthDate_HRIA?n.Lct_BirthDate_HRIA:"",a["사용자주민번호"]=n.Lct_BirthDate_HRIA?n.Lct_BirthDate_HRIA:"",a["사용자주민번호여부"]=n.Ipin_realssn_YN_HRIA?n.Ipin_realssn_YN_HRIA:"",a["사용자유선전화번호"]=n.PHONE_JS?n.PHONE_JS:"",a["이메일주소"]=n.EMAIL_JS?n.EMAIL_JS:"",a["선호극장코드"]=n.FavoriteTheaters_HRIA?n.FavoriteTheaters_HRIA:"",a["VIP여부"]=n.IsVip?n.IsVip:"",a["CJ임원여부"]=n.IsCJVip?n.IsCJVip:"",a["CJ엔터테인먼직원여부"]=n.isCJEnter_HRIA?n.isCJEnter_HRIA:"",a["VIP파트너스여부"]=n.IsPartners?n.IsPartners:"",a["CJ임직원여부"]=n.IS_CJ_EMPLOYEE_HRIA?n.IS_CJ_EMPLOYEE_HRIA:"",a["CGV직원여부"]=n.IsCgvEmployee_HRIA?n.IsCgvEmployee_HRIA:"",a["CGV미소지기여부"]=n.IsMiso?n.IsMiso:"",a["CGVVIP관람카드여부"]=n.isCgvVip_HRIA?n.isCgvVip_HRIA:"",a["CGVSUPPORTERS여부"]=n.IsRiaSupporters?n.IsRiaSupporters:"",a["FREEPASSCARD여부"]=n.IsFreePassCard?n.IsFreePassCard:"",a["통합관람카드리스트"]=n.PAYMETHOD_JS?n.PAYMETHOD_JS:"",a["CJONE회원번호"]=n.Code_HRIA?n.Code_HRIA:"",""===a["CJONE회원번호"])a["CJ멤버십구분"]="1";else{var s=$.cgv.data.통신.복호화(n.Exsiting_Id_RE);a["CJ멤버십구분"]=""!=s&&null!=s?"2":"3"}n.IPIN_CI_JS&&(""==$.trim(n.SSN_JS)&&""==n.IPIN_CI_JS&&($.cgv.data.고객정보.로그인여부=!1),$.cgv.data.고객정보.사용자IPIN=n.IPIN_CI_JS);var l=$.cgv.data.고객정보.사용자아이디;loadCrossDomainURL("http://section.cgv.co.kr/ajax/ticket/GetMobileNumber.aspx?userId="+encodeURIComponent(l),function(e){if(-1!=e.indexOf("00000")){var t=decodeURIComponent(e);9<=t.length&&($.cgv.data.고객정보.사용자핸드폰번호=t.slice(9))}else console.log("휴대폰정보를 받아오는데 실패했습니다.")}),locStorage.init(n)}else if(null!=t){for(i=t.split("&"),o=0;o<i.length;o++)if(-1!=i[o].indexOf("=")){r=i[o].substr(0,i[o].indexOf("=")),c=i[o].substr(i[o].indexOf("=")+1,i[o].length);n[r]=c}$.cgv.data.고객정보.로그인여부=!0,$.cgv.data.고객정보.비회원여부=!0,$.cgv.data.고객정보.사용자명=n.gUserName?n.gUserName:"",$.cgv.data.고객정보.사용자아이디=n.gUserID?n.gUserID:"",8==$.cgv.data.통신.복호화(n.gSSN).length&&(n.gSSN=$.cgv.data.통신.암호화($.cgv.data.통신.복호화(n.gSSN).substr(2))),$.cgv.data.고객정보.사용자주민번호=n.gSSN?n.gSSN:"",$.cgv.data.고객정보.성인여부=n.gIsAdult?n.gIsAdult:"",$.cgv.data.고객정보.사용자유선전화번호=n.Phone_HRIA?n.Phone_HRIA:"",$.cgv.data.고객정보.사용자핸드폰번호=n.Mobile_HRIA?n.Mobile_HRIA:"",$.cgv.data.고객정보.사용자생년월일=n.gFullbirthday?n.gFullbirthday:""}var d="",p=$.cookie("cgv.cookie.Reserve");if(null!=p){var _=p.split("&");for(o=0;o<_.length;o++){var u=_[o].split("=");if(2==u.length){r=u[0],c=u[1];"partner"==r&&(d=c)}}}$("#test_partner span").text("CGV"),"benepia"==d?($.cgv.data.통신.업체코드="BENEPIA",$("#ticket").addClass("benepia"),$("#test_partner span").text("benepia")):($.cgv.data.통신.업체코드="CJSYSTEMS",$("#ticket").removeClass("benepia")),"hanatour"==d?($.cgv.data.고객정보.제휴사명="hanatour",$("#ticket").addClass("hanatour"),$("#test_partner span").text("hanatour")):$("#ticket").removeClass("hanatour"),1==$.cgv.data.고객정보.비회원여부?$("#ticket").addClass("guest"):$("#ticket").removeClass("guest"),$.cgv.data["고객정보"].adNumber=Math.floor(12*Math.random()+1)}function switchLanguage(){var e=location.href;e=IS_ENGLISH?($.cookie("IS_ENGLISH","",{expires:1}),e.replace("Reservation_en.aspx","Reservation.aspx")):($.cookie("IS_ENGLISH","true",{expires:1}),e.replace("Reservation.aspx","Reservation_en.aspx")),location.replace(e)}function openSchedulePopup(){IS_ENGLISH?ticketNewWindow("http://www.cgv.co.kr/reserve/show-times/eng/"):""==$.cgv.data.고객선택정보.영화.영화코드?ticketNewPopup("http://section.cgv.co.kr/theater/popup/r_TimeTable.aspx?code="+$.cgv.data.고객선택정보.극장.극장코드,"movie_schedule","700","auto"):ticketNewPopup("http://section.cgv.co.kr/theater/popup/r_MovieTimeTable.aspx?code="+$.cgv.data.고객선택정보.영화.영화코드,"movie_schedule","700","auto")}function ticketRestart(){_ticketCurrentStep==TICKET_STEP.STEP_3||_ticketCurrentStep==TICKET_STEP.STEP_4?loadPrereservateSeatsCancel(function(){location.reload()}):(isStep3ResourcesLoaded&&($.cgv.data.결제.적용결제수단리스트.적용결제리스트.length=0,$.cgv.data.결제.최종결제정보.초기화(),$.cgv.data.예매확정정보.초기화()),ticketInit(),tnbUpdate(),tnbPositionUpdate(),ts2ClearSeats())}function ticketStepShow(e){var t=parseInt(e),a=$("#ticket .step"),n=a.eq(t-1);_ticketCurrentStep=t,setupNanoScroller();var i=null;1===t&&(i=ticketStep1Init),2===t&&(i=ticketStep2Init),3===t&&(i=ticketPayment.init),4===t&&(i=ticketStep4Init),null!=i&&i(),4<t&&logWeb(t),a.hide(),n.show(),tnbUpdate(),tnbPositionUpdate(),ticketNeedResize(),ticketNeedScrollUpdate()}function ticketStepPrev(){switch(selectedMovieInfo.isBool("skyBox")&&(selectedMovieInfo.skyBoxEvt(_ticketCurrentStep),3===_ticketCurrentStep&&(_ticketCurrentStep=2,loadPrereservateSeatsCancel())),_ticketCurrentStep){case TICKET_STEP.STEP_2:_ticketCurrentStep=TICKET_STEP.STEP_1,$("#ticket .step").hide(),$("#ticket .step"+_ticketCurrentStep).show(),ts2ClearSeats(),onTicketStep1Prev(),logClick("SUMMARY/영화선택");break;case TICKET_STEP.STEP_3:ticketPopupHide("popup_reservation_check"),_ticketCurrentStep=TICKET_STEP.STEP_2,$("#ticket .step").hide(),$("#ticket .step"+_ticketCurrentStep).show(),onTicketStep2Prev(),ticketPayment.clear()}updateNanoScroller(),tnbUpdate(),tnbPositionUpdate(),ticketNeedScrollToTop(!0),loadAdvertise(_ticketCurrentStep)}function ticketStepNext(){var e=!0;if(selectedMovieInfo.isBool("package")&&selectedMovieInfo.packageEvt(_ticketCurrentStep),selectedMovieInfo.isBool("noShow")&&selectedMovieInfo.noShowEvt(_ticketCurrentStep),selectedMovieInfo.isBool("hotDeal")&&selectedMovieInfo.hotDealEvt(_ticketCurrentStep),!selectedMovieInfo.isBool("hotDeal")||!$.cgv.data.고객정보.비회원여부){if(selectedMovieInfo.isBool("skyBox")&&(selectedMovieInfo.skyBoxEvt(_ticketCurrentStep),3!==_ticketCurrentStep))return!1;switch(_ticketCurrentStep){case TICKET_STEP.STEP_1:if(!$.cgv.data.고객정보.사용자아이디)return home_login(),!1;var t=$.cgv.data.고객선택정보.영화.영화등급코드;if("01"==t&&0==$.cgv.data.고객정보.성인여부계산())return ticketAlert(MSG1_MOVIE_ADULT_t,MSG1_MOVIE_ADULT_c),!1;if("99"==t&&0==$.cgv.data.고객정보.성인여부계산())return ticketAlert(MSG1_MOVIE_ADULT_t,MSG1_MOVIE_NOTRT_c),!1;var a=$.cgv.data.고객선택정보.좌석;a["군인인원수"]=0,a["일반인원수"]=0,a["학생인원수"]=0,a["어린이인원수"]=0,a["경로인원수"]=0,a["우대인원수"]=0,screen_YMD=parseInt($.cgv.data.고객선택정보.날짜.상영일자,10),e=!1,loadTCAlert($.cgv.data.고객선택정보.극장.극장코드,$.cgv.data.고객선택정보.영화.영화그룹코드,$.cgv.data.고객선택정보.날짜.상영일자,loadTCAlertListenerStep1);break;case TICKET_STEP.STEP_2:e=!1,loadPrereservateSeats(function(){loadStep3Resources(function(){ticketStepShow(3),ticketNeedScrollToTop(!0),loadAdvertise(_ticketCurrentStep)})});break;case TICKET_STEP.STEP_3:""==$.cgv.data.예매확정정보.고객예매번호?(e=!1,setTimeout(ts3DoPayment,200)):(ticketStepShow(4),loadAdvertise(_ticketCurrentStep))}updateNanoScroller(),tnbUpdate(),tnbPositionUpdate(),e&&ticketNeedScrollToTop(!0)}}function ticketSaveQuickdata(){var e=$.cgv.data.고객선택정보.극장.지역코드+"|"+$.cgv.data.고객선택정보.극장.극장코드+"|"+$.cgv.data.고객선택정보.영화.영화그룹코드+"|"+$.cgv.data.고객선택정보.날짜.상영일자+"|"+$.cgv.data.고객선택정보.상영관시간.상영관코드+"|"+$.cgv.data.고객선택정보.상영관시간.상영시간+"|"+$.cgv.data.고객선택정보.영화.Third_Attr_CD;$.cookie("quickdata",e,{expires:1,path:"/",domain:".cgv.co.kr"})}function setupNanoScroller(e){var t=e||$(".nano");t.nanoScroller({alwaysVisible:!0,sliderMinHeight:50,sliderMaxHeight:50,sliderMinWidth:50,sliderMaxWidth:50,flash:!0,tabIndex:-1,preventPageScrolling:!0,disableResize:!0}),t.nanoScroller()}function updateNanoScroller(e){(e||$(".nano")).nanoScroller()}function loadStep3Resources(n){if(isStep3ResourcesLoaded)n&&n();else{var i=0;$(".step.step3").load("/Reservation/payment_new/Reservation3_smart.aspx",function(e,t,a){"success"==t&&3==++i&&loadStep3Resources_STEP2(n)}),$(".step.step4").load("/Reservation/Reservation4.aspx?temp=1",function(e,t,a){"success"==t&&3==++i&&loadStep3Resources_STEP2(n)}),$.ajax({cache:!1,url:"/Reservation/Reservation_popup2.aspx",dataType:"text",success:function(e,t,a){"success"==t&&($("#ticket > .popups").append(e),3==++i&&loadStep3Resources_STEP2(n))}})}}1<=thisBody.length&&$(window).bind("resize",function(e){$(window).resize(function(){clearTimeout(window.resizeEvt),window.resizeEvt=setTimeout(function(){},250)})}),$(function(){var e=$("#ie7_sucks");if(CMN_OSBR.ie8||CMN_OSBR.ie7?(e.show(),e.find("span").css({"text-align":"left","line-height":"35px"}),e.css({height:"35px"})):e.remove(),void 0===$.cookie("IS_ENGLISH"))$.cookie("IS_ENGLISH","",{expires:1});else{var t=location.href;-1<t.indexOf("Reservation_en")?"true"!==$.cookie("IS_ENGLISH")&&($.cookie("IS_ENGLISH","true",{expires:1}),location.replace(t)):"true"===$.cookie("IS_ENGLISH")&&($.cookie("IS_ENGLISH","",{expires:1}),location.replace(t))}$(document).ready(function(){$.cgv.config.ISDEV="true"==$.cookie("ISDEV");try{$.cgv.config.ISDEV&&devInit()}catch(e){}var e,t;SERVER_IP=$("#test_ip span").text(),e=null,((t=navigator.userAgent).match(/Android/i)||t.match(/BlackBerry/i)||t.match(/iPhone|iPad|iPod/i)||t.match(/Opera Mini/i)||t.match(/IEMobile/i))&&(e=!0),e&&(alert("PC버전 보기는 PC 환경에 최적화되어 있어\n모바일 기기에서 일부 기능이 정상 작동하지 않을 수 있습니다."),$("#ticket_banner").css("top","75px"),$("#wrap").prepend('<div id="mobile_notice" style="text-align:center;"><img src="http://img.cgv.co.kr/CGV_RIA/Ticket/image/reservation/temp/mobile_notice_pc.png" alt="모바일 접속" usemap="#mobileGo"/><map name="mobileGo"><area shape="rect" coords="300,35,450,60" href="http://m.cgv.co.kr" target="_top"/></map></div>')),ticketInit(),ticketPopupInit(),ADvertise.init()})}),CMN_OSBR.cr&&window.self!==window.top&&(alert=function(e){window.parent.alert(e)},confirm=function(e){return window.parent.confirm(e)});var step3PaymentInitializer=[],step3PaymentMethodArr=[];function loadStep3Resources_STEP2(e){$.cgv.util.includeScripts([CDN_PATH_JS+"step3/reservation.payment.js",CDN_PATH_JS+"step3/reservation.step3.form.js",CDN_PATH_JS+"step3/reservation.step3.base.js",CDN_PATH_JS+"step3/reservation.pay.creditCard.js",CDN_PATH_JS+"step3/reservation.pay.bcIsp.js",CDN_PATH_JS+"step3/reservation.pay.appCard.js",CDN_PATH_JS+"step3/reservation.pay.mobile.js",CDN_PATH_JS+"step3/reservation.pay.transfer.js",CDN_PATH_JS+"step3/reservation.pay.smartPay.js",CDN_PATH_JS+"step3/reservation.pay.naverPay.js",CDN_PATH_JS+"step3/reservation.pay.smilePay.js",CDN_PATH_JS+"step3/reservation.pay.ssgPay.js",CDN_PATH_JS+"step3/reservation.pay.chaiPay.js",CDN_PATH_JS+"step3/reservation.pay.kakaoPay.js",CDN_PATH_JS+"step3/reservation.pay.payco.js",CDN_PATH_JS+"step3/reservation.pay.payCoin.js",CDN_PATH_JS+"step3/reservation.pay.settleBank.js",CDN_PATH_JS+"step3/reservation.pay.tossPay.js",CDN_PATH_JS+"step3/reservation.pay.cDayEvent.js",CDN_PATH_JS+"step3/reservation.onlinePromo.js",CDN_PATH_JS+"step3/reservation.special.js",CDN_PATH_JS+"step3/reservation.cgv.js",CDN_PATH_JS+"step3/reservation.coupon.js",CDN_PATH_JS+"step3/reservation.point.js",CDN_PATH_JS+"step3/reservation.step3.js",CDN_PATH_JS+"step3/reservation.step4.js"],function(){isStep3ResourcesLoaded=!0,ticketPopupInit(),e&&e()})}var _tnbButtonEnabled=!0;function tnbInit(){$(window).unbind("resize scroll",tnbPositionUpdate).bind("resize scroll",tnbPositionUpdate),$(document.body).unbind("click",tnbPositionUpdate).bind("click",tnbPositionUpdate),tnbUpdate(),tnbPositionUpdate()}function tnbButtonEnable(){_tnbButtonEnabled=!0}function tnbButtonDisable(){_tnbButtonEnabled=!1}function tnbUpdate(){var e=$("#ticket_tnb > div.tnb"),t=e.find("a.btn-left"),a=e.find(".btn-right");switch(_ticketCurrentStep){case TICKET_STEP.STEP_1:e.removeClass("step2").removeClass("step3").addClass("step1"),t.attr("title",IS_ENGLISH?"Previous":"영화선택"),a.attr("title",IS_ENGLISH?"Next":"좌석선택").removeClass("on"),setTimeout("tnbUpdateStep1()",0);break;case TICKET_STEP.STEP_2:e.removeClass("step1").removeClass("step3").addClass("step2"),t.attr("title",IS_ENGLISH?"Previous":"영화선택"),a.attr("title",IS_ENGLISH?"Next":"결제선택").removeClass("on"),setTimeout("tnbUpdateStep2()",0);break;case TICKET_STEP.STEP_3:e.removeClass("step1").removeClass("step2").addClass("step3"),t.attr("title",IS_ENGLISH?"Previous":"좌석선택"),a.attr("title",IS_ENGLISH?"Next":"결제하기").addClass("on");break;case TICKET_STEP.STEP_4:e.hide()}}var tnbContainerObj={movie_poster:null,movie_title:null,movie_type:null,movie_rating:null,theater_name:null,theater_screen:null,theater_date:null,placeholder_movie:null,placeholder_theater:null};function tnbUpdateStep1(){null===tnbContainerObj.movie_poster&&(tnbContainerObj.movie_poster=$(".tnb .info.movie .movie_poster img")),null===tnbContainerObj.movie_title&&(tnbContainerObj.movie_title=$(".tnb .info.movie .row.movie_title .data a")),null===tnbContainerObj.movie_type&&(tnbContainerObj.movie_type=$(".tnb .info.movie .row.movie_type .data")),null===tnbContainerObj.movie_rating&&(tnbContainerObj.movie_rating=$(".tnb .info.movie .row.movie_rating .data"));var e=$.cgv.data.고객선택정보.영화;if(0<e["영화포스터url"].length?tnbContainerObj.movie_poster.attr("src",e["영화포스터url"]).show():tnbContainerObj.movie_poster.attr("src",e["영화포스터url"]).hide(),0<e["영화그룹명"].length?(tnbContainerObj.movie_title.text(e["영화그룹명"]).attr({title:e["영화그룹명"],href:"http://www.cgv.co.kr/movies/detail-view/?midx="+e["영화MOVIEIDX"]}),IS_ENGLISH&&tnbContainerObj.movie_title.removeAttr("href").removeAttr("title")):tnbContainerObj.movie_title.text(IS_ENGLISH?"":"영화정보 상세보기").removeAttr("title"),tnbContainerObj.movie_rating.text(e.getRatingName()).attr("title",e.getRatingName()),tnbContainerObj.movie_type.text("").removeAttr("title"),0<$.cgv.data.고객선택정보.상영관시간.상영관명.length){var t=$.cgv.data.TIMETABLE.Table;$(t).each(function(e,t){if(t.SCREEN_CD==$.cgv.data.고객선택정보.상영관시간.상영관코드&&t.PLAY_START_TM==$.cgv.data.고객선택정보.상영관시간.상영시간&&t.MOVIE_CD==$.cgv.data.고객선택정보.영화.영화코드){var a="";return a=""!=t.SUBTITLE_NM&&""!=t.MOVIE_ADD_ATTR?t.MOVIE_KIND_DISPLAY_NM+"("+t.SUBTITLE_NM+","+t.MOVIE_ADD_ATTR+")":""!=t.SUBTITLE_NM&&""==t.MOVIE_ADD_ATTR?t.MOVIE_KIND_DISPLAY_NM+"("+t.SUBTITLE_NM+")":""==t.SUBTITLE_NM&&""!=t.MOVIE_ADD_ATTR?t.MOVIE_KIND_DISPLAY_NM+"("+t.MOVIE_ADD_ATTR+")":t.MOVIE_KIND_DISPLAY_NM,tnbContainerObj.movie_type.text(a).attr("title",a),!1}})}null===tnbContainerObj.theater_name&&(tnbContainerObj.theater_name=$(".tnb .info.theater .row.name .data a")),null===tnbContainerObj.theater_date&&(tnbContainerObj.theater_date=$(".tnb .info.theater .row.date .data")),null===tnbContainerObj.theater_screen&&(tnbContainerObj.theater_screen=$(".tnb .info.theater .row.screen .data"));var a=$.cgv.data.고객선택정보.극장;if(0<a["극장명"].length?(tnbContainerObj.theater_name.text(a["극장명"]+" > ").attr({title:a["극장명"],href:"http://www.cgv.co.kr/theaters/?theaterCode="+a["극장코드"]}),IS_ENGLISH&&tnbContainerObj.theater_name.removeAttr("href").removeAttr("title")):tnbContainerObj.theater_name.html('<span class="sreader">극장정보 상세보기</span>').removeAttr("title"),tnbContainerObj.theater_screen.text("").removeAttr("title"),0<$.cgv.data.고객선택정보.상영관시간.상영관명.length&&tnbContainerObj.theater_screen.text($.cgv.data.고객선택정보.상영관시간.상영관명).attr("title",$.cgv.data.고객선택정보.상영관시간.상영관명),tnbContainerObj.theater_date.text("").removeAttr("title"),0<$.cgv.data.고객선택정보.날짜.상영일자.length){var n=$.cgv.util.parseDate($.cgv.data.고객선택정보.날짜.상영일자),i=n.getFullYear()+"."+(n.getMonth()+1)+"."+n.getDate()+"("+DAYOFWEEK[n.getDay()]+")";if(0<$.cgv.data.고객선택정보.상영관시간.상영시간.length){var o=$.cgv.data.고객선택정보.상영관시간.상영시간;i+=" "+(o=o.substr(0,2)+":"+o.substr(2,2))}tnbContainerObj.theater_date.text(i).attr("title",i)}$(".tnb .info.theater .row.number .data").text("").removeAttr("title"),null===tnbContainerObj.placeholder_movie&&(tnbContainerObj.placeholder_movie=$(".tnb .info.movie .placeholder")),null===tnbContainerObj.placeholder_theater&&(tnbContainerObj.placeholder_theater=$(".tnb .info.theater .placeholder")),0==$.cgv.data.고객선택정보.영화.영화포스터url.length&&0==$.cgv.data.고객선택정보.영화.영화그룹명.length&&0==$.cgv.data.고객선택정보.상영관시간.상영관명.length&&0==$.cgv.data.고객선택정보.영화.getRatingName().length?($(".tnb .info.movie .row").hide(),tnbContainerObj.placeholder_movie.show()):($(".tnb .info.movie .row").show(),tnbContainerObj.placeholder_movie.hide()),0==$.cgv.data.고객선택정보.극장.극장명.length&&0==$.cgv.data.고객선택정보.날짜.상영일자.length&&0==$.cgv.data.고객선택정보.상영관시간.상영관명.length?($(".tnb .info.theater .row").hide(),tnbContainerObj.placeholder_theater.show()):($(".tnb .info.theater .row").show(),tnbContainerObj.placeholder_theater.hide()),""!=$.cgv.data.고객선택정보.극장.극장코드&&""!=$.cgv.data.고객선택정보.날짜.상영일자&&""!=$.cgv.data.고객선택정보.영화.영화그룹코드&&""!=$.cgv.data.고객선택정보.상영관시간.상영시간?$(".tnb.step1 .btn-right").addClass("on"):$(".tnb.step1 .btn-right").removeClass("on")}function tnbUpdateStep2(e){var t=$(".tnb .info.movie").find(".row.movie_type").find(".data"),a=$(".tnb .info.seat"),n=$.cgv.data.고객선택정보;if(0<n["상영관시간"]["상영관명"].length){var i="";$($.cgv.data.TIMETABLE.Table).each(function(e,t){if(t.SCREEN_CD==n["상영관시간"]["상영관코드"]&&t.PLAY_START_TM==n["상영관시간"]["상영시간"]&&t.MOVIE_CD==n["영화"]["영화코드"])return i=""!=t.SUBTITLE_NM&&""!=t.MOVIE_ADD_ATTR?t.MOVIE_KIND_DISPLAY_NM+"("+t.SUBTITLE_NM+","+t.MOVIE_ADD_ATTR+")":""!=t.SUBTITLE_NM&&""==t.MOVIE_ADD_ATTR?t.MOVIE_KIND_DISPLAY_NM+"("+t.SUBTITLE_NM+")":""==t.SUBTITLE_NM&&""!=t.MOVIE_ADD_ATTR?t.MOVIE_KIND_DISPLAY_NM+"("+t.MOVIE_ADD_ATTR+")":t.MOVIE_KIND_DISPLAY_NM,!1}),t.text(i).attr("title",i)}var o=$(".tnb .info.theater"),r=o.find(".row.name \t> .data a"),c=o.find(".row.date \t> .data"),s=o.find(".row.screen \t> .data");if(r.text("").removeAttr("title").removeAttr("href"),c.text("").removeAttr("title"),s.text("").removeAttr("title"),0<n["극장"]["극장명"].length&&(r.text(n["극장"]["극장명"]),IS_ENGLISH||r.attr({href:"http://www.cgv.co.kr/theaters/?theaterCode="+n["극장"]["극장코드"],title:n["극장"]["극장명"]})),0<n["날짜"]["상영일자"].length){var l=$.cgv.util.parseDate(n["날짜"]["상영일자"]),d=l.getFullYear()+"."+(l.getMonth()+1)+"."+l.getDate()+"("+DAYOFWEEK[l.getDay()]+")";if(0<n["상영관시간"]["상영시간"].length){var p=n["상영관시간"]["상영시간"];d+=" "+(p=p.substr(0,2)+":"+p.substr(2,2))}c.text(d).attr("title",d)}0<n["상영관시간"]["상영관명"].length&&s.text(n["상영관시간"]["상영관명"]).attr("title",n["상영관시간"]["상영관명"]);var _=ft_ticket_prices,u=$.cgv.data.고객선택정보.좌석,v=[{type:"10",total:u["군인인원수"],selNum:0,P:0,S:0,E:0,N:0,price:[],loc_no:[],loc_y:[],seat_no:[],ratingCD:[]},{type:"01",total:u["일반인원수"],selNum:0,P:0,S:0,E:0,N:0,price:[],loc_no:[],loc_y:[],seat_no:[],ratingCD:[]},{type:"02",total:u["학생인원수"],selNum:0,P:0,S:0,E:0,N:0,price:[],loc_no:[],loc_y:[],seat_no:[],ratingCD:[]},{type:"05",total:u["어린이인원수"],selNum:0,P:0,S:0,E:0,N:0,price:[],loc_no:[],loc_y:[],seat_no:[],ratingCD:[]},{type:"04",total:u["경로인원수"],selNum:0,P:0,S:0,E:0,N:0,price:[],loc_no:[],loc_y:[],seat_no:[],ratingCD:[]},{type:"03",total:u["우대인원수"],selNum:0,P:0,S:0,E:0,N:0,price:[],loc_no:[],loc_y:[],seat_no:[],ratingCD:[]}],g="",S="";IS_ENGLISH||(S="명"),0<u["군인인원수"]&&(0!=g.length&&(g+=" , "),v[0].name=IS_ENGLISH?"Soldier":"군인",g+=v[0].name+" "+u["군인인원수"]+S),0<u["일반인원수"]&&(v[1].name=IS_ENGLISH?"Adult":"일반",g=v[1].name+" "+u["일반인원수"]+S),0<u["학생인원수"]&&(0!=g.length&&(g+=" , "),!kidsFamily.is()&&kidsFamily.cineKids()?v[2].name=IS_ENGLISH?"Child":"어린이":v[2].name=IS_ENGLISH?"Youth":"청소년",g+=v[2].name+" "+u["학생인원수"]+S),0<u["어린이인원수"]&&(0!=g.length&&(g+=" , "),v[3].name=IS_ENGLISH?"Child":"어린이",g+=v[3].name+" "+u["어린이인원수"]+S),0<u["경로인원수"]&&(0!=g.length&&(g+=" , "),v[4].name=screen_YMD<senior_YMD?IS_ENGLISH?"Preference":"우대":IS_ENGLISH?"Senior":"경로",g+=v[4].name+" "+u["경로인원수"]+S),0<u["우대인원수"]&&(0!=g.length&&(g+=" , "),v[5].name=IS_ENGLISH?"Preference":"우대",g+=v[5].name+" "+u["우대인원수"]+S);var m=[],h=[],I=!1,f=$(".section-seat .theater .seats .row .seat.selected");f.each(function(e,t){var a=$(t).data("xml"),n=!1,i=a.RATING_NM;"4D"==i&&(i="4DX");for(var o=0;o<m.length;++o){var r=m[o];"4DX"===m[o]&&(r="4D"),r==a.RATING_NM&&(n=!0)}n||I||m.push(i),h.push(ftGetLocName(a.LOC_Y_NM)+parseInt(a.SEAT_NO,10)),0!=I||"12"!=a.RATING_CD&&"13"!=a.RATING_CD&&"14"!=a.RATING_CD||(I=!0)}),e&&$.each(e,function(e,t){0===e&&m.push(t.RATING_NM),h.push(t.LOC_Y_NM+parseInt(t.SEAT_NO,10)),f.push($("<span/>").data("xml",t))});for(var E=seatPSE_Sort(f),T=0;T<E.length;T++){for(var C=E[T],A=C.RATING_CD,N=null,b=0;b<v.length;++b)if(v[b].total>v[b].selNum){(N=v[b]).selNum+=1;break}if(null===N)return;N.price.push(_[A+N.type]),N.loc_no.push(C.SEAT_LOC_NO),N.loc_y.push(C.LOC_Y_NM),N.seat_no.push(C.SEAT_NO),N.ratingCD.push(A),"12"==A?N.P+=1:"13"==A?N.S+=1:"14"==A?N.E+=1:N.N+=1}$(".tnb .info.theater .row.number .data").empty().text(g).attr("title",g),(a=$(".tnb .info.seat")).find(".row.seat_name").css({height:20*m.length+"px"}),a.find(".row.seat_name .data").html(m.join(",<br/>")).attr("title",m.join(",")),a.find(".row.seat_no .data").text(h.join(",")).attr("title",h.join(","));f.length;var k=$(".tnb .info.payment-ticket");if(amountCon_millitary=k.find(".row.payment-millitary"),amountCon_adult=k.find(".row.payment-adult"),amountCon_youth=k.find(".row.payment-youth"),amountCon_child=k.find(".row.payment-child"),amountCon_senior=k.find(".row.payment-senior"),amountCon_special=k.find(".row.payment-special"),amountCon_final=k.find(".row.payment-final"),k.find(".row").hide(),k.find(".row").find(".data span.quantity").hide(),k.css({width:"155px"}),screen_YMD<senior_YMD?amountCon_senior.find(".header").text(IS_ENGLISH?"Preference":"우대"):amountCon_senior.find(".header").text(IS_ENGLISH?"Senior":"경로"),0===f.length)return a.find("div.placeholder").show(),!1;(a.find("div.placeholder").hide(),0==$("#priceMapInfoIco").length)&&((O=$('<span id="priceMapInfoIco"/>')).css({position:"absolute",right:"-17px","margin-top":"3px",cursor:"pointer"}),O.html('<img src="http://img.cgv.co.kr/CGV_RIA/Ticket/image/reservation/step2/ico_circle_14.png" height="14" width="14" alt="mappingIco"/>'),O.hover(function(){L.fadeIn()},function(){L.fadeOut()}),(L=$('<div id="priceMappingContainer"/>')).css({display:"inline-block",position:"absolute",right:"-80px","z-index":"100",width:"150px",height:"auto",padding:"10px",background:"#333",color:"eaeaea"}).html("container!<br/>container!<br/>container!").hide(),amountCon_final.append(O).append(L));var R=IS_ENGLISH?" won":" 원";if(I){var P=0;for(T=0;T<v.length;++T){N=v[T];var D=null;targetAmountTotal=0,"01"===N.type&&(D=amountCon_adult),"02"===N.type&&(D=amountCon_youth),"04"===N.type&&(D=amountCon_senior),"03"===N.type&&(D=amountCon_special),"05"===N.type&&(D=amountCon_child),"10"===N.type&&(D=amountCon_millitary),"02"===N.type&&!kidsFamily.is()&&kidsFamily.cineKids()&&(D=amountCon_child);for(var M=0;M<N.price.length;++M)targetAmountTotal+=N.price[M];var y='<span class="price">'+addComma(targetAmountTotal)+R+"</span>";D.find("span.data").empty().html(y),P+=targetAmountTotal,0<targetAmountTotal&&D.show()}}else for(P=0,T=0;T<v.length;++T){N=v[T],D=null;targetAmountTotal=0,"01"===N.type&&(D=amountCon_adult),"02"===N.type&&(D=amountCon_youth),"05"===N.type&&(D=amountCon_child),"04"===N.type&&(D=amountCon_senior),"03"===N.type&&(D=amountCon_special),"10"===N.type&&(D=amountCon_millitary),!kidsFamily.is()&&kidsFamily.cineKids()&&("02"===N.type&&(D=amountCon_child),"05"===N.type&&(D=null));var w=0;1<=N.price.length&&(w=N.price[0]);y='<span class="price">'+addComma(w)+"</span>";y+='<span class="exe">'+R+" X </span>",y+='<span class="quantity">'+N.price.length+"</span>",P+=w*N.price.length,IS_ENGLISH&&D.find("span.data").css({width:"auto"}),null!==D&&D.find("span.data").empty().html(y),1<=N.price.length&&D.show()}amountCon_final.find(".data span.price").text(addComma(P)),amountCon_final.show(),u["선택좌석상세정보"]=v;var O=$("#priceMapInfoIco"),L=$("#priceMappingContainer");if(I){var x=v;O.show();var H="";for(T=0;T<x.length;++T){var G;G='<span class="typeNm" style="display:inline-block; width:60px;">'+x[T].name+"</span>",1<=x[T].P&&(H+=G+" : PRIME X "+x[T].P+"<br/>"),1<=x[T].S&&(H+=G+" : STANDARD X "+x[T].S+"<br/>"),1<=x[T].E&&(H+=G+" : LIGHT X "+x[T].E+"<br/>")}L.html(H).css({bottom:"115px"})}else O.hide();var U=$(".tnb.step2 .btn-right"),j=$(".section-seat .theater .seats .row .seat.selected").length;0==j||j<selectNumData.total()?U.removeClass("on"):U.addClass("on")}function seatPSE_Sort(e){var a=new Array,n=new Array,t=["14","13","12"];if(e.each(function(){var e=$(this).data("xml"),t=e.RATING_CD;"12"===t||"13"===t||"14"===t?a.push(e):n.push(e)}),null!=a&&""!==a)for(var i=0;i<t.length;i++)for(var o=0;o<a.length;o++)t[i]===a[o].RATING_CD&&n.push(a[o]);return n}function OnTnbLeftClick(){_tnbButtonEnabled&&(tnbButtonDisable(),setTimeout(tnbButtonEnable,1e3),ticketStepPrev())}function OnTnbRightClick(){if(_tnbButtonEnabled)if(tnbButtonDisable(),setTimeout(tnbButtonEnable,1e3),$(".tnb .btn-right").hasClass("on"))nextStepPropEvent(ticketStepNext);else switch(_ticketCurrentStep){case TICKET_STEP.STEP_1:""==$.cgv.data.고객선택정보.영화.영화그룹명?(alert(MSG1_NO_SELECT_MOVIE),skipToSomething("skip_movie_list")):""==$.cgv.data.고객선택정보.극장.극장명?(alert(MSG1_NO_SELECT_THEATER),skipToSomething("skip_theater_list")):""==$.cgv.data.고객선택정보.날짜.상영일자?(alert(MSG1_NO_SELECT_DATE),skipToSomething("skip_date_list")):""==$.cgv.data.고객선택정보.상영관시간.상영시간&&(alert(MSG1_NO_SELECT_TIME),skipToSomething("skip_time_list"));break;case TICKET_STEP.STEP_2:0===selectNumData.total()?(alert(MSG1_NO_SELECT_PERSON),skipToSomething("skip_seat_list")):(alert(MSG1_NO_MATCH_PERSON_SEAT),$(".section-seat .theater_minimap .seats").focus())}}function loadGetTime(a){var e=$.cgv.api.ticket.GetTime.PARAMS;e={},$.cgv.net.loadAPI($.cgv.api.ticket.GetTime,e,{success:function(e){var t=$.cgv.api.ticket.GetTime.parseData(e);$.cgv.data.고객정보.예매일자=t.SMS_RESULT.CURRENT_TIME,a&&a()},error:silentLoadErrorListener})}function loadTop3NNearData(n){var e={};e.ip="",e.Language=IS_ENGLISH?"ENG":"KOR",$.cgv.net.loadURL($.cgv.data.통신.메인주소+$.cgv.data.통신.메인주소PREFIX+"/RR000.aspx/CJ_TC_NEAR",e,{success:function(e){var t=$.xml2json(unescape(e.d.data.DATA));if(null!=t||null!=t.Table){var a=[];$(t.Table).each(function(e,t){switch(0==e&&($.cgv.data.고객정보.근처극장코드=t.TheaterCode),t.RegionCode){case"01":t.RegionCode="13";break;case"02":t.RegionCode="09";break;case"03":t.RegionCode="15";break;case"04":t.RegionCode="02";break;case"05":t.RegionCode="12";break;case"06":t.RegionCode="01";break;case"11":t.RegionCode="14";break;case"12":t.RegionCode="07";break;case"202":t.RegionCode="06";break;case"203":t.RegionCode="10";break;case"204":t.RegionCode="11";break;case"205":t.RegionCode="04";break;case"206":t.RegionCode="08";break;case"207":t.RegionCode="16"}a.push(t)}),$.cgv.data.FAVORITE_THEATERS=a,updateTheaterSectionForFavorite(),n&&n()}else alert(MSG_CMN_SYSTEM_ERROR)},error:silentLoadErrorListener}),setTimeout(function(){n&&n()},9e3),_hideLoading()}function loadCrossDomainURL(e,a){var t={};t.strURL=e,$.cgv.net.loadURL($.cgv.data.통신.메인주소+$.cgv.data.통신.메인주소PREFIX+"/RR000.aspx/CJ_VW_HTTPCONTEXT",t,{success:function(e){var t=e.d.data.DATA;"0000"==e.d.data.RES_CD?a&&a(t):alert(MSG_CMN_SYSTEM_ERROR)},error:silentLoadErrorListener},!1)}function loadAdvertise(e){var t={},a={},n={};switch(e){case 1:t.AdType="TICKETING",t.TheaterCode=$.cgv.data["고객정보"].adNumber,a.AdType="B_TICKETING",a.TheaterCode=$.cgv.data["고객정보"].adNumber;break;case 2:t.AdType="SEAT",t.TheaterCode=$.cgv.data["고객정보"].adNumber,a.AdType="B_SEAT",a.TheaterCode=$.cgv.data["고객정보"].adNumber;break;case 3:t.AdType="PAYMENT",t.TheaterCode=$.cgv.data["고객정보"].adNumber,a.AdType="B_PAYMENT",a.TheaterCode=$.cgv.data["고객정보"].adNumber;break;case 4:t.AdType="FINISH",t.TheaterCode=$.cgv.data["고객정보"].adNumber,a.AdType="B_FINISH",a.TheaterCode=$.cgv.data["고객정보"].adNumber,n.AdType="B_MIDDLE",n.TheaterCode=$.cgv.data["고객정보"].adNumber;break;default:return fasle}ADvertise.update(e),$.cgv.net.loadAPI($.cgv.api.ticket.GetAdvertise,a,{success:loadAvertiseSuccess2,error:silentLoadErrorListener},!0),4==e&&$.cgv.net.loadAPI($.cgv.api.ticket.GetAdvertise,n,{success:loadAvertiseSuccess3,error:silentLoadErrorListener},!0)}function loadAvertiseSuccess1(e){var t=$.cgv.api.ticket.GetAdvertise.parseData(e);null!=t&&null!=t.SMS_RESULT&&"0000"==t.SMS_RESULT.RES_CD&&updateMainAd(t.Table1)}function loadAvertiseSuccess2(e){var t=$.cgv.api.ticket.GetAdvertise.parseData(e);null!=t&&null!=t.SMS_RESULT&&"0000"==t.SMS_RESULT.RES_CD&&updateBannerAd(t.Table1)}function loadAvertiseSuccess3(e){var t=$.cgv.api.ticket.GetAdvertise.parseData(e);null!=t&&null!=t.SMS_RESULT&&"0000"==t.SMS_RESULT.RES_CD&&updateMiddleAd(t.Table1)}function updateMainAd(e){var t=e.AdBg,a=e.AdImg,n=e.AdLink,i=e.AdText,o=e.AdWidth;e.AdHeight;o<1280&&(r=1280);var r=Math.round((o-996)/2);a&&($("#ticket_banner").css("background-color",t),$("#ticket_banner > div > div").css({backgroundImage:"url("+a+")",width:o+"px",left:-r+"px"}),$("#ticket_banner a").attr("alt",i),$("#ticket_banner a").attr("href",n),$("#ticket_banner a").css("width",r+"px"),""==i?$("#ticket_banner a span").text("배너광고 영역"):$("#ticket_banner a span").text(i))}function updateBannerAd(e){var t=e.AdBg,a=e.AdImg,n=e.AdLink,i=e.AdText,o=$("#ticket_bottom_banner a"),r=$("#ticket_bottom_banner a img"),c=$("#ticket_bottom_banner a span");a&&(o.css("background-color",t),0<r.length?r.attr("src",a).attr("alt",i):o.append("<img src='"+a+"' alt='"+i+"' onload='ticketNeedResize();' style='width:996px;height:140px'/>"),o.attr("href",n),""==i?c.text("배너광고 영역"):c.text(i))}function updateMiddleAd(e){var t=e.AdBg,a=e.AdImg,n=e.AdLink,i=e.AdText,o=$("#ticket .section-complement .banner_area a"),r=$("#ticket .section-complement .banner_area a img"),c=$("#ticket .section-complement .banner_area a span");a&&(o.css("background-color",t),0<r.length?r.attr("src",a).attr("alt",i):o.append("<img src='"+a+"' alt='"+i+"' />"),o.attr("href",n),""==i?c.text("배너광고 영역"):c.text(i))}function skipToSomething(e){$("#"+e).focus()}function silentLoadErrorListener(){}if($(document).ready(function(){$(document).keydown(function(e){var t=e.target.nodeName.toLowerCase();if("input"!=t&&"textarea"!=t&&8===e.keyCode)return ticketStepPrev(),!1})}),!window.resvSeatInfo)var resvSeatInfo={};if(resvSeatInfo=function(){var i=null,l=null;function a(e){for(var t=0;t<e.length;++t){var a=e[t];a.discUsed=!1,a.discData.name="",a.discData.code="",a.discData.amount="",a.discData.productCD="",a.discData.authInfo=""}}function e(e){var t=n("productCD",e);1<=t.length&&a(t)}function n(e,t){var a=[];if(null!==l)for(var n=0;n<l.length;++n){l[n].discData[e]===t&&a.push(l[n])}return a}return{init:function(){i=$.cgv.data.고객선택정보.좌석.선택좌석상세정보,l=[];for(var e=0;e<i.length;++e)for(var t=i[e],a=0;a<t.total;++a){var n={ratingCD:t.ratingCD[a],loc_no:t.loc_no[a],price:t.price[a],gradeCD:t.type,discUsed:!1,discData:{name:"",code:"",amount:"",productCD:""}};l.push(n)}l.sort(function(e,t){return e.price>t.price?-1:e.price<t.price?1:0}),$.cgv.data.고객선택정보.선택좌석정보.표가격=[],$.cgv.data.고객선택정보.선택좌석정보.표가격_사용=[];for(e=0;e<l.length;++e)$.cgv.data.고객선택정보.선택좌석정보.표가격.push(l[e].price),$.cgv.data.고객선택정보.선택좌석정보.표가격_사용.push(l[e].price)},get:function(){return l},updateData:function(e,t){var a=e;return void 0===a||null==a?(console.log("적용 가능 좌석이 없음"),!1):!0===a.discUsed?(alert("할인이 적용된 좌석 입니다."),!1):void 0!==t&&(a.discUsed=!0,a.discData.name=t.name,a.discData.code=t.code,a.discData.amount=t.amount,a.discData.productCD=t.productCD,a.discData.authInfo=t.authInfo,void($("#payment_card_radio2").prop("checked")&&$("#lp_card_type_2 option").eq(0).prop("selected",!0)))},clearData:a,clearProCD:e,clearPayCD:function(e){var t=n("code",e);1<=t.length&&a(t)},findOKSeat:function(e,t){var a=parseInt(e,10),n=[],i=t.split("");if("000"===t)for(var o=0;o<l.length;++o)!0!==l[o].discUsed&&n.length<a&&n.push(l[o]);else for(o=0;o<l.length;++o)!0!==l[o].discUsed&&(r=l[o],c=void 0,c=!1,s=parseInt(r.ratingCD,10),"1"===i[0]&&12===s&&(c=!0),"1"===i[1]&&13===s&&(c=!0),"1"===i[2]&&14===s&&(c=!0),0==c&&12!==s&&13!==s&&14!==s&&(c=!0),c&&n.length<a&&n.push(l[o]));var r,c,s;return n},findByProductCD:e,discNum:function(){for(var e=0,t=0;t<l.length;++t)!0===l[t].discUsed&&(e+=1);return e}}}(),!window.lastPaymentOrderInfo)var lastPaymentOrderInfo={};if(lastPaymentOrderInfo=function(){$.cgv.data.결제["최종결제확장정보"]={};var n=$.cgv.data.결제["최종결제확장정보"],a=$.cgv.data.결제["최종결제정보"];return{addData:function(e){if("object"!=typeof e)return!1;var t=e;$.each(t,function(e,t){a[e]="",n[e]=""})},setParams:function(e){if("object"!=typeof e)return!1;$.each(e,function(e,t){n[e]=t})},setData:function(e){if("object"!=typeof e)return!1;var a={};return $.each(e,function(e,t){a[e]=t}),$.each(n,function(e,t){a[e]=t}),a},init:function(){$.each(n,function(e,t){n[e]=""})},clear:function(e){null!==e.params&&void 0!==e.params&&$.each(e.params,function(e,t){a[e]=""})}}}(),!window.ADvertise)var ADvertise={};ADvertise=function(){var a=null,n=null,i="RIA_Skin_";return{init:function(){null===a&&(a=$('<div class="AdvertiseCon"/>'),n=$('<div class="AdvertiseCon"/>'),a.css({width:"160px",height:"300px",background:"none",position:"absolute",top:"75px",left:"-164px",overflow:"hidden"}).hide(),n.css({width:"160px",height:"300px",background:"none",position:"absolute",top:"75px",left:"1000px",overflow:"hidden"}).hide(),$("#ticket_banner > div").empty().append(a).append(n))},update:function(e){var t="";1===e&&(t=i+"Ticketing"),2===e&&(t=i+"Seat"),3===e&&(t=i+"Payment"),4===e&&(t=i+"Finish"),a.attr("id",t+"_L"),n.attr("id",t+"_R"),a.hide(),n.hide(),$.getScript("http://ad.cgv.co.kr/NetInsight/text/CGV/CGV_201608/RIA@"+t).done(function(e,t){$("div.AdvertiseCon").find("a").css({top:"0"}),$("div.AdvertiseCon").find("img").css({width:"160px",height:"300px"}),a.fadeIn(500),n.fadeIn(500)}).fail(function(e,t,a){console.log("load Fail")})}}}();var specialEventMovie={code:"20011072",alertMent1:"<닥터 스트레인지 하이라이트 시사회>는 비회원예매로 예매할수 없습니다.",alertMent2:"<닥터 스트레인지 하이라이트 시사회>는 2인까지 예매 가능합니다.\n인원을 다시 선택해주세요."},selectedMovieInfo=function(){var o,r,c,s,l,d,p;return{set:function(e){p=l=s=c=r=o=d=!1,"Y"===e.MOVIE_PKG_YN&&(r=!0),"Y"===e.MOVIE_NOSHOW_YN&&(c=!0),"18"===e.PLAY_TIME_CD&&(d=!0),"0013"!==e.THEATER_CD||"021"!==e.SCREEN_CD&&"025"!==e.SCREEN_CD||(s=!0),"24"===e.SCREEN_RATING_CD&&(l=!0),"26"===e.SCREEN_RATING_CD&&(p=!0)},isBool:function(e){var t=null;if("cultureDay"===e&&(t=d),"hotDeal"===e&&(t=o),"package"===e&&(t=r),"noShow"===e&&(t=c),"skyBox"===e&&(t=s),"cineFore"===e&&(t=l),"led"===e&&(t=p),"greenCinema"===e){var a=$.cgv.data.고객선택정보.영화.영화코드,n=["20013382","20013383","20013384","20013386","20013387","20020519"];t=!1;for(var i=0;i<n.length;++i)a==n[i]&&(t=!0)}return t},hotDealEvt:function(e){if(1==e)if(IS_ENGLISH){var t="This movie is only available to customers\nwho purchased 'Hot Deal' voucher\nthrough 'Movie Hot Deal' event.'\n\nYou may participate in 'Movie Hot Deal'\non CGV APP.'";alert(t)}else t="해당 영화는 ‘무비핫딜’ 이벤트를 통해\n핫딜 관람권을 구매하신 고객님만\n예매가 가능합니다.\n\n*핫딜쿠폰이 없으실 경우, CGV APP에서\n쿠폰을 구매해주세요!",alert("핫딜영화 예매 안내\n\n"+t);2==e&&(isEventMovieCD=!0)},packageEvt:function(e){2==e&&(isEventMovieCD=!0)},noShowEvt:function(e){},skyBoxEvt:function(e){if(1==e){if(!$.cgv.data.고객정보.사용자아이디)return home_login(),!1;if("01"==$.cgv.data.고객선택정보.영화.영화등급코드&&0==$.cgv.data.고객정보.성인여부계산())return ticketAlert(MSG1_MOVIE_ADULT_t,MSG1_MOVIE_ADULT_c),!1;loadSeatInfo(function(e){var t=$.cgv.data.SEAT_INFO,a=t.SEAT_INFO,n=0;$.isArray(t.PRICE_INFO)||(t.PRICE_INFO=[t.PRICE_INFO]),$.each(t.PRICE_INFO,function(e,t){"01"==t.TICKET_TYPE&&(n=t.PRICE)});var i=IS_ENGLISH?"SKYBOX is an independent room which can accommodate up to 4 people and Non-refundable on the day of showtime.":"SKYBOX는 상영관 내 독립공간으로 최대 "+a.length+"명까지 수용 가능한 특별관으로 당일 취소, 변경이 불가합니다.";if(confirm(i)){var o=$.cgv.data.고객선택정보.좌석;o["군인인원수"]=0,o["일반인원수"]=0,o["학생인원수"]=0,o["어린이인원수"]=0,o["경로인원수"]=0,o["우대인원수"]=0,o["일반인원수"]=a.length,tnbUpdateStep2(a),prereservateSeat(a,n,function(){loadStep3Resources(function(){ticketStepShow(3),ticketNeedScrollToTop(!0),loadAdvertise(3)})})}})}}}}();function home_login(){if(IS_ENGLISH)ticketPopupShow("popup_login");else{if(confirm("로그인이 필요한 서비스입니다.\n로그인 페이지로 이동하시겠습니까?")){var e=$.cgv.data.통신.UrlEncode("http://www.cgv.co.kr/ticket/default.aspx");ticketSaveQuickdata(),ticketNeedLocationHref("/user/login/?returnURL="+e)}}}function prereservateSeat(i,e,o){var r=$.cgv.data.고객정보,c=$.cgv.data.고객선택정보;selectNumData.milliatary=c["좌석"]["군인인원수"],selectNumData.adult=c["좌석"]["일반인원수"],selectNumData.youth=c["좌석"]["학생인원수"],selectNumData.child=c["좌석"]["어린이인원수"],selectNumData.senior=c["좌석"]["경로인원수"],selectNumData.special=c["좌석"]["우대인원수"],$.cgv.data.고객선택정보["좌석"]["일반인원수"]=selectNumData.adult,$.cgv.data.고객선택정보.좌석.예매인원수=selectNumData.total(),$.cgv.data.고객선택정보.선택좌석정보.표가격=[],$.cgv.data.고객선택정보.선택좌석정보.표가격_사용=[],$.cgv.data.고객선택정보.선택좌석정보.예매좌석정보=[],$.cgv.data.고객선택정보.선택좌석정보.총결제금액=0;for(var t=[],s=[],a=[],n=[],l=[],d=[],p=0;p<i.length;++p){var _=i[p];t.push(_.SEAT_LOC_NO),s.push(_.RATING_CD),a.push(e),n.push(_.LOC_Y_NM),l.push(_.SEAT_NO),d.push("01"),$.cgv.data.고객선택정보.선택좌석정보.총결제금액+=parseInt(e,10),$.cgv.data.고객선택정보.선택좌석정보.좌석등급코드=_.RATING_NM,$.cgv.data.고객선택정보.선택좌석정보.표가격.push(e),$.cgv.data.고객선택정보.선택좌석정보.표가격_사용.push(e),$.cgv.data.고객선택정보.선택좌석정보.예매좌석정보.push(_.LOC_Y_NM+parseInt(_.SEAT_NO,10))}var u=$.cgv.data["통신"]["복호화"],v=$.cgv.data["통신"].UrlDecode,g=$.cgv.data.고객정보.비회원여부,S=g?"":u($.cgv.data.고객정보.사용자아이디),m=g?"":u($.cgv.data.고객정보.CJONE회원번호),h=g?u($.cgv.data.고객정보.사용자핸드폰번호):v($.cgv.data.고객정보.사용자핸드폰번호),I=u($.cgv.data.고객정보.사용자주민번호).substr(2);"Cgv-Guest-332211"===S&&(I=u($.cgv.data.고객정보.사용자주민번호));var f=$.cgv.api.ticket.PrereservateSeats,E=f.PARAMS;(E={}).MOVIE_CD=$.cgv.data.고객선택정보.영화.영화코드,E.TheaterCd=$.cgv.data.고객선택정보.극장.극장코드,E.PlayYMD=$.cgv.data.고객선택정보.날짜.상영일자,E.ScreenCd=$.cgv.data.고객선택정보.상영관시간.상영관코드,E.PlayNum=$.cgv.data.고객선택정보.상영관시간.상영회차,E.ReseveCnt=selectNumData.total(),E.SeatInfo=t.join(";"),E.SeatRatingInfo=s.join(";"),E.TicketTypeInfo=d.join(";"),E.SeatPriceInfo=a.join(";"),E.LOC_Y_NM=n.join(";"),E.SEAT_NM=l.join(";"),E.MEMBER_ID=S,E.PLAY_TIME_CD=$.cgv.data.고객선택정보.상영관시간.상영시간코드,E.SOCIAL_NO=I,E.MOBILE_NO=h,$.cgv.net.loadAPI(f,E,{success:function(e){var t=f.parseData(e);if("00000"==t.SMS_RESULT.RES_CD){var a=$.cgv.data.좌석가확보완료정보;if(a["임시예매번호"]=t.SMS_RESULT.RESERVE_NO,a["아이핀번호"]=notNullDecryption(r["사용자IPIN"]),a["고객명"]=notNullDecryption(r["사용자명"]),a["고객아이디"]=S,a["고객이메일"]=notNullDecryption(r["이메일주소"]),a["고객주민번호"]=notNullDecryption(r["사용자주민번호"]),a["휴대전화번호"]=notNullDecryption(r["사용자핸드폰번호"]),a["집전화번호"]=notNullDecryption(r["사용자유선전화번호"]),a["예매일자"]=r["예매일자"],a["CJONE포인트회원여부"]="Y",a["CJONE회원번호"]=m,a["회원번호"]=m,a["극장명"]=c["극장"]["극장명"],a["극장코드"]=c["극장"]["극장코드"],a["상영관명"]=c["상영관시간"]["상영관명"],a["상영관코드"]=c["상영관시간"]["상영관코드"],a["상영시간"]=c["상영관시간"]["상영시간"],a["상영회차"]=c["상영관시간"]["상영회차"],a["상영일자"]=c["날짜"]["상영일자"],a["상영요일"]=c["날짜"]["상영요일"],a["상영종료시간"]=c["상영관시간"]["상영종료시간"],a["상영시간코드"]=c["상영관시간"]["상영시간코드"],a["영화명"]=c["영화"]["영화명"],a["영화코드"]=c["영화"]["영화코드"],a["영화등급코드"]=c["영화"]["영화등급코드"],a["영화포스터URL"]=c["영화"]["영화포스터url"],a["예매인원수"]=i.length,a["예매좌석등급코드"]=s[0],a["표가격"]=c["선택좌석정보"]["표가격"],a["총결제금액"]=c["선택좌석정보"]["총결제금액"],a["예매좌석정보"]=c["선택좌석정보"]["예매좌석정보"],a["군인인원수"]=c["좌석"]["군인인원수"],a["일반인원수"]=c["좌석"]["일반인원수"],a["학생인원수"]=c["좌석"]["학생인원수"],a["어린이인원수"]=c["좌석"]["어린이인원수"],a["경로인원수"]=c["좌석"]["경로인원수"],a["우대인원수"]=c["좌석"]["우대인원수"],"14"==c["상영관시간"]["상영시간코드"])alert(MSG2_PROMOTION_CULDAY_NOTICE);else{var n={};if(n.TYPE=t.SMS_RESULT.PROMOTION_TYPE,n.YN=t.SMS_RESULT.PROMOTION_YN,"Y"==n.YN){a["가격다변화코드"]=n.TYPE,a["가격다변화할인율"]=t.SMS_RESULT.DISC_COUNT_PRICE_PERCENTAGE;a["가격다변화명"];"001"===n.TYPE&&(IS_ENGLISH?"Front Seat Offer":"Front Seat 요금제"),"004"===n.TYPE&&(IS_ENGLISH?"Early Reservation Offer":"예매가격제"),"002"!==n.TYPE&&"003"!==n.TYPE&&"006"!==n.TYPE||(IS_ENGLISH?"Family Offer":"Family 요금제"),"001"===n.TYPE&&alert(MSG2_PROMOTION_001_NOTICE),"004"===n.TYPE&&alert(MSG2_PROMOTION_004_NOTICE),"002"!==n.TYPE&&"003"!==n.TYPE&&"006"!==n.TYPE||alert(MSG2_PROMOTION_002_NOTICE)}else a["가격다변화명"]="",a["가격다변화코드"]="",a["가격다변화할인율"]=0}o&&o()}else alert(t.SMS_RESULT.RES_MSG)},error:silentLoadErrorListener})}function cancelPreservate(){}function ticketLogin(e,t){ticketPopupHide("popup_login"),ticketSaveQuickdata(),e=escape($.cgv.data.통신.암호화(e)),t=escape($.cgv.data.통신.암호화(t)),$.postMessage("LOGIN@"+e+"@"+t,"http://www.cgv.co.kr/ticket/Proxy.html",proxyIframe.contentWindow)}function ticketGuestLogin(e,t){var a=escape($.cgv.data.통신.암호화(e)),n=escape($.cgv.data.통신.암호화(t));if(IS_IFRAME&&proxyIframe)$.postMessage("GUESTLOGIN@"+a+"@"+n,"http://www.cgv.co.kr/ticket/Proxy.html",proxyIframe.contentWindow);else{var i=$('<form method="post" action="http://www.cgv.co.kr/user/guest/GuestMember.aspx"><input id="id" name="userid" value="'+a+'" /><input id="password" name="password" value="'+n+'" /><input id="returnURL" name="returnURL" value="AA" /></form>');$(document.body).append(i),i.submit()}}function logWeb(e){var t="",a="",n="",i="",o="",r="",c="";switch(e){case 1:t="_TRK_PI=SMT1",a="_TRK_CP=/예매 메인/STEP1-영화&극장 선택",n="_TRK_DU=ticketing/movie_selection.aspx";break;case 2:t="_TRK_PI=SMT2",a="_TRK_CP=/예매 메인/STEP2-예약좌석 선택",n="_TRK_DU=ticketing/seat_selection.aspx";break;case 3:t="_TRK_PI=SMT3",a="_TRK_CP=/예매 메인/STEP3-결제 선택",n="_TRK_DU=ticketing/transaction.aspx";break;case 4:t="_TRK_PI=ODR",a="_TRK_CP=/예매 메인/STEP4-예매 완료",n="_TRK_DU=ticketing/reserve_done.aspx",i="_TRK_PNC="+$.cgv.data.예매확정정보.영화코드,o="_TRK_PNG="+$.cgv.data.예매확정정보.극장명,r="_TRK_AMT="+$.cgv.data.예매확정정보.결제금액,c="_TRK_EA="+$.cgv.data.예매확정정보.예매매수}setTimeout(function(){try{IS_IFRAME&&proxyIframe&&(""!=i?$.postMessage("LOGWEB@"+t+"@"+a+"@"+n+"@"+i+"@"+o+"@"+r+"@"+c,"http://www.cgv.co.kr/ticket/Proxy.html",proxyIframe.contentWindow):$.postMessage("LOGWEB@"+t+"@"+a+"@"+n,"http://www.cgv.co.kr/ticket/Proxy.html",proxyIframe.contentWindow))}catch(e){}},1e4)}function logClick(e){var t="";1==_ticketCurrentStep&&(t="STEP1 영화선택"),2==_ticketCurrentStep&&(t="STEP2 좌석선택"),3==_ticketCurrentStep&&(t="STEP3 결제선택"),4==_ticketCurrentStep&&(t="STEP4 예매완료");var a="예매/"+(IS_ENGLISH?"ENG":"KOR")+"/"+t+"/"+e;try{IS_IFRAME&&proxyIframe&&$.postMessage("LOGCLICK@EVT@"+a,"http://www.cgv.co.kr/ticket/Proxy.html",proxyIframe.contentWindow)}catch(e){}}!function(n){var i,o,r,c,s=1,l=this,d="postMessage",p="addEventListener",_=l[d];n[d]=function(e,t,a){t&&(e="string"==typeof e?e:n.param(e),a=a||parent,_?a[d](e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(a.location=t.replace(/#.*$/,"")+"#"+ +new Date+s+++"&"+e))},n.receiveMessage=c=function(a,t,e){_?(a&&(r&&c(),r=function(e){if("string"==typeof t&&e.origin!==t||n.isFunction(t)&&!1===t(e.origin))return!1;a(e)}),l[p]?l[a?p:"removeEventListener"]("message",r,!1):l[a?"attachEvent":"detachEvent"]("onmessage",r)):(i&&clearInterval(i),i=null,a&&(e="number"==typeof t?t:"number"==typeof e?e:100,i=setInterval(function(){var e=document.location.hash,t=/^#?\d+&/;e!==o&&t.test(e)&&a({data:(o=e).replace(t,"")})},e)))}}(jQuery);var msgCMS=function(){var n=$.cgv.data.고객선택정보,i={URL:"/RR000.aspx/CJ_NOTICE",PARAMS:{depth1:"",depth2:"",depth3:"",movie_cd:"",movie_kind_cd:"",movie_add_attr_cd:"",movie_rating_cd:"",theater_cd:"",screen_cd:"",screen_rating_cd:"",running_time:"",play_num:"",play_ymd:"",play_hm:"",ticket_kind_cd:"",seat_grade_cd:"",play_amt_type:"",member_level:"",member_group:"",row_cnt:"10"}};return{get:function(e,a){switch(e){case"enter":i.PARAMS.depth1="02",i.PARAMS.depth2="01",i.PARAMS.depth3="01";break;case"notice":i.PARAMS.depth1="02",i.PARAMS.depth2="01",i.PARAMS.depth3="03";break;default:i.PARAMS.depth1="",i.PARAMS.depth2="",i.PARAMS.depth3=""}!function(){i.PARAMS.movie_cd=n["영화"]["영화코드"],i.PARAMS.movie_kind_cd=n["영화"]["영화타입코드"],i.PARAMS.movie_add_attr_cd=n["영화"].MOVIE_ATTR_CD,i.PARAMS.movie_rating_cd=n["영화"]["영화등급코드"],i.PARAMS.theater_cd=n["극장"]["극장코드"],i.PARAMS.screen_cd=n["상영관시간"]["상영관코드"],i.PARAMS.screen_rating_cd=n["상영관시간"]["상영관등급코드"],i.PARAMS.running_time=n["상영관시간"]["상영시간"],i.PARAMS.play_num=n["상영관시간"]["상영회차"],i.PARAMS.play_ymd=n["날짜"]["상영일자"],i.PARAMS.play_hm=n["상영관시간"]["상영시간"],i.PARAMS.ticket_kind_cd="",i.PARAMS.seat_grade_cd="";for(var e=resvSeatInfo.get(),t=0;t<e.length;++t){var a="";1<=t&&(a="\\"),i.PARAMS.ticket_kind_cd+=e[t].gradeCD+a,i.PARAMS.seat_grade_cd+=e[t].ratingCD+a}i.PARAMS.pay_amt_type="",i.PARAMS.member_level="",i.PARAMS.member_group=""}(),$.cgv.net.loadAPI(i,i.PARAMS,{success:function(e){var t=e.d.data;"0000"===t.RES_CD&&(resultTxt=t.DATA,resultTxt=JSON.parse(resultTxt),a&&a(resultTxt))},error:silentLoadErrorListener})}}}(),homeCMS={get:function(n){var e=$.cgv.data.고객선택정보,t={URL:"/RR000.aspx/CJ_NOTICE_HOME",PARAMS:{movie_cd:e["영화"]["영화코드"],movie_kind_cd:e["영화"]["영화타입코드"],movie_add_attr_cd:e["영화"]["영화추가속성코드"],ticket_kind_cd:"",movie_rating_cd:e["영화"]["영화등급코드"],screen_rating_cd:e["상영관시간"]["상영관등급코드"],running_time:e["상영관시간"]["상영시간"],play_num:e["상영관시간"]["상영회차"],seat_grade_cd:"",theater_cd:e["극장"]["극장코드"],screen_cd:e["상영관시간"]["상영관코드"],pay_amt_type:"",member_level:"",member_group:"",play_ymd:e["날짜"]["상영일자"],play_hm:e["상영관시간"]["상영시간"],distancing_type:DISTANCE_CLS}};$.cgv.net.loadAPI(t,t.PARAMS,{success:function(e){var t=e.d.data,a="";"0000"===t.RES_CD&&(a=JSON.parse(t.DATA)),n&&n(a)},error:silentLoadErrorListener},"",!1)}},locStorage=function(){var r={},c=null;return{init:function(e){if(c=e.UserId_HRIA,r={},null===localStorage.getItem(c))localStorage.setItem(c,"");else for(var t=localStorage.getItem(c).split(";"),a=0;a<t.length;++a){var n=t[a].split(":");r[n[0]]=n[1]}},item:function(e,t,a){var n,i;switch(e){case"get":var o=r[t];return null==o?null:r[t];case"set":r[t]=a,n="",i=0,$.each(r,function(e,t){var a=";";0===i&&(a=""),n+=a+e.toString()+":"+t,i+=1}),localStorage.setItem(c,n)}}}}(),resvCompInfo=function(){var n=null,i=null,o=null,r=!1;isEng=null;return{set:function(e){console.log(e),i=$.cgv.data.통신.암호화(e.resvNum),o=e.memberIPIN,r=e.isMember,isEng=IS_ENGLISH?"Y":"N"},call:function(e){n="/CGV2011/RIA/home_ticket.aspx";var t=$(window).height(),a=$('<form action="'+n+'" method="post" target="homeTicket"/>');a.append('<input type="hidden" name="booking_no" id="booking_no" value="'+i+'">'),a.append('<input type="hidden" name="isMember"\tid="isMember" \tvalue="'+r+'">'),a.append('<input type="hidden" name="userPIN" \tid="userPIN" \tvalue="'+o+'">'),a.append('<input type="hidden" name="isEng" \t\tid="isEng" \t\tvalue="'+isEng+'">'),$("body").append(a),window.open("","homeTicket","width=620, height="+t+", resizable=no , status=no , scrollbars=yes"),a.submit().remove()}}}(),nextStepPropEvent=function(e){var t=!0;_ticketCurrentStep===TICKET_STEP.STEP_2&&"0274"===$.cgv.data.고객선택정보["극장"]["극장코드"]&&"007"===$.cgv.data.고객선택정보["상영관시간"]["상영관코드"]&&(ticketNoticeCctv(e),t=!1),t&&e()},IS_IFRAME=window.self!=window.top,IFRAME_WINDOW_HEIGHT=0,proxyIframe=null,cgvTicket=function(){var e=null,t=0,a=30;function n(){return e.height()+a}function i(){n()!==t&&(t=n(),IFRAME_WINDOW_HEIGHT=t,$.postMessage("NEEDRESIZE@"+t,"http://www.cgv.co.kr/ticket/Proxy.html",proxyIframe.contentWindow))}return setInterval(function(){console&&(console={log:function(e){return"console 을 지원하지 않는 서비스 입니다."}})},6e3),{scroll:function(e){e+=223,$.postMessage("NEEDSCROLLTO@"+e+"@"+!1,"http://www.cgv.co.kr/ticket/Proxy.html",proxyIframe.contentWindow)},scrollUpdate:function(){$.postMessage("NEEDSCROLLUPDATE@"+t,"http://www.cgv.co.kr/ticket/Proxy.html",proxyIframe.contentWindow)},href:function(e){$.postMessage("LOCATIONHREF@"+encodeURIComponent(e),"http://www.cgv.co.kr/ticket/Proxy.html",proxyIframe.contentWindow)},init:function(){if(null!==e)return!1;(proxyIframe=document.getElementById("proxy_iframe")).onload=function(){$.receiveMessage(function(e){e.data.split("@")[0]})},e=$("#wrap"),t=n(),IFRAME_WINDOW_HEIGHT=t,setInterval(i,300)}}}();function ticketNeedResize(){}function ticketNeedScrollUpdate(){}function ticketNeedScrollToTop(e){cgvTicket.scroll(0)}function ticketNeedScrollTo(e,t,a){cgvTicket.scroll(e)}function tnbPositionUpdate(){}function ticketNeedLocationHref(e){cgvTicket.href(e)}function ticketNeedInfoModifyMobile(e,t,a){var n="http://section.cgv.co.kr/user/join/UpdateUserInfoRia.aspx?mobile1="+encodeURIComponent($.cgv.data.통신.암호화(e,!1))+"&mobile2="+encodeURIComponent($.cgv.data.통신.암호화(t,!1))+"&mobile3="+encodeURIComponent($.cgv.data.통신.암호화(a,!1));$('<img src="'+n+'" />')}$(function(){cgvTicket.init()}),String.prototype.replaceAll=function(e,t){return this.split(e).join(t)};